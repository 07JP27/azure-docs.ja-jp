
Microsoft Azure クラウド サービスに関する問題を診断するためには、仮想マシン上で問題の発生に伴って生成されるクラウド サービスのログ ファイルを収集する必要があります。AzureLogCollector 拡張機能をオンデマンドで使用し、クラウド サービスの VM (Web ロールと worker ロールの両方) からログを都度収集して、Azure ストレージ アカウントにその収集したファイルを転送することができます。このとき、リモートから VM にログオンする必要は一切ありません。
> [AZURE.NOTE]ログに記録されるほとんどの情報の説明は、http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.asp で参照できます。

収集モードは 2 つあり、どちらが使用されるかは、収集するファイルの種類によって異なります。
- Azure ゲスト エージェント ログのみ (GA)。Azure のゲスト エージェントとその他の Azure コンポーネントに関連したすべてのログが対象となります。
- すべてのログ (Full)。GA モードで収集されるすべてのファイルに加え、次のファイルが収集されます。

  - システムとアプリケーションのイベント ログ
  
  - HTTP エラー ログ
  
  - IIS ログ
  
  - セットアップ ログ
  
  - その他のシステム ログ

いずれの収集モードも、次の構造体を使用してデータ収集フォルダーを追加指定できます。

- **Name**: 収集の名前。収集対象となる zip ファイル内のサブフォルダーの名前として使用されます。

- **Location**: 収集されたファイルが格納される、仮想マシン上のフォルダーのパス。

- **SearchPattern**: 収集対象ファイル名のパターン。既定値は “*” です。

- **Recursive**: 指定されたフォルダー内のファイルを再帰的に収集するかどうか。

<!---HONumber=AcomDC_0323_2016-->