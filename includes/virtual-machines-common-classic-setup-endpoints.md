---
title: インクルード ファイル
description: インクルード ファイル
services: virtual-machines-windows
author: cynthn
ms.service: virtual-machines-windows
ms.topic: include
ms.date: 05/17/2018
ms.author: cynthn
ms.custom: include file
ms.openlocfilehash: cfe675ca269a69c7c2bfa67638acd0afbcd1c8ea
ms.sourcegitcommit: b6319f1a87d9316122f96769aab0d92b46a6879a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/20/2018
---
各エンドポイントには、*パブリック ポート*と*プライベート ポート*があります。

* パブリック ポートは、インターネットから仮想マシンに発信される着信トラフィックをリッスンするときに、Azure Load Balancer によって使用されます。
* プライベート ポートは、一般的に仮想マシンで実行されているアプリケーションまたはサービスを宛先とする着信トラフィックをリッスンする仮想マシンによって使用されます。

Azure ポータルでエンドポイントを作成するときに、周知のネットワーク プロトコルの IP プロトコルと、TCP ポートまたは UDP ポートの既定値が提示されます。 カスタム エンドポイントの場合、正しい IP プロトコル (TCP または UDP) と、パブリック ポートとプライベート ポートを指定することが必要になります。 着信トラフィックを複数の仮想マシンにランダムに分散するには、複数のエンドポイントで構成される負荷分散セットを作成する必要があります。

エンドポイントを作成した後、アクセス制御リスト (ACL) を使用して、発信元 IP アドレスに基づいて、エンドポイントのパブリック ポートを宛先とする着信トラフィックの許可または拒否に役立つルールを定義できます。 ただし、仮想マシンが Azure Virtual Network 内にある場合、ネットワーク セキュリティ グループを代わりに使用する必要があります。 詳細については、「 [ネットワーク セキュリティ グループについて](../articles/virtual-network/security-overview.md)」を参照してください。

> [!NOTE]
> Azure が自動で設定するリモート接続エンドポイントに関連付けられているポートに対して、Azure 仮想マシンのファイアウォール構成が自動的に行われます。 他のすべてのエンドポイントに対して指定されているポートについては、仮想マシンのファイアウォールは自動的には構成されません。 仮想マシンにエンドポイントを作成するとき、仮想マシンのファイアウォールで、エンドポイントの構成に対応するプロトコルとプライベート ポートでトラフィックが許可されていることを確認する必要があります。 ファイアウォールを構成するには、仮想マシンで実行しているオペレーティング システムの文書またはオンライン ヘルプを参照してください。
>
>

## <a name="create-an-endpoint"></a>エンドポイントの作成
1. まだサインインしていない場合は、 [Azure ポータル](https://portal.azure.com)にサインインします。
2. **[Virtual Machines]** をクリックし、構成する仮想マシンの名前をクリックします。
3. **[設定]** グループで **[エンドポイント]** をクリックします。 **[エンドポイント]** ページには、仮想マシンの現在のすべてのエンドポイントが表示されます。 (この例は Windows VM です。 Linux VM の場合、SSH のエンドポイントが既定で表示されます。)

   <!-- ![Endpoints](./media/virtual-machines-common-classic-setup-endpoints/endpointswindows.png) -->
   ![エンドポイント](./media/virtual-machines-common-classic-setup-endpoints/endpointsblade.png)

4. エンドポイントのエントリの上部にあるコマンド バーで、**[追加]** をクリックします。
5. **[エンドポイントの追加]** ページで、**[名前]** にエンドポイントの名前を入力します。
6. **[プロトコル]** で、**[TCP]** または **[UDP]** のどちらかを選択します。
7. **[パブリック ポート]** に、インターネットから発信される着信トラフィックを着信するポートの番号を入力します。 **[プライベート ポート]** に、仮想マシンがリッスンするポート番号を入力します。 このポート番号は別の番号でもかまいません。 プロトコル (手順 6) とプライベート ポートに対応するトラフィックを許可するように、仮想マシン上のファイアウォールが構成されていることを確認します。
10. **[OK]** をクリックします。

新しいエンドポイントが **[エンドポイント]** ページの一覧に表示されます。

![エンドポイントの作成に成功](./media/virtual-machines-common-classic-setup-endpoints/endpointcreated.png)

## <a name="manage-the-acl-on-an-endpoint"></a>エンドポイントの ACL の管理
トラフィックを送信できるコンピューターを定義するために、エンドポイント上の ACL によって、発信元 IP アドレスに基づいてトラフィックを制限できます。 エンドポイントの ACL を追加、変更、削除するには、次のステップに従います。

> [!NOTE]
> エンドポイントが負荷分散セットの一部である場合、エンドポイントの ACL に対して行った変更はそのセット内のすべてのエンドポイントに適用されます。
>
>

仮想マシンが Azure 仮想ネットワーク内にある場合は、ACL の代わりにネットワーク セキュリティ グループを使用することをお勧めします。 詳細については、「 [ネットワーク セキュリティ グループについて](../articles/virtual-network/security-overview.md)」を参照してください。

1. まだサインインしていない場合は、Azure ポータルにサインインします。
2. **[Virtual Machines]** をクリックし、構成する仮想マシンの名前をクリックします。
3. **[エンドポイント]** をクリックします。 一覧から適切なエンドポイントを選択します。 ページの下部に ACL リストがあります。

   ![[HTTPS エンドポイントの ACL の詳細の指定]](./media/virtual-machines-common-classic-setup-endpoints/aclpreentry.png)

4. 一覧内の行を使用して、ACL のルールの追加、削除、編集を行い、順序を変更します。 **[リモート サブネット]** の値は、インターネットからのトラフィックを着信する IP アドレスの範囲です。Azure Load Balancer では、この値を使用して、発信元 IP アドレスに基づいてトラフィックを許可または拒否します。 IP アドレスの範囲は、CIDR 形式 (アドレス プレフィックス形式とも呼ばれる) で指定してください。 例: `10.1.0.0/8`。

 ![新しい ACL エントリ](./media/virtual-machines-common-classic-setup-endpoints/newaclentry.png)


ルールを使用して、インターネット上のご使用のコンピューターに該当する特定のコンピューターから発信されるトラフィックのみを許可することや、特定の範囲の既知のアドレスから発信されるトラフィックを拒否できます。

ルールの評価は、一覧の最初に示されているルールから開始され、最後に示されているルールで終了します。 つまり、一覧には、制限の最も少ないルールから制限の最も多いルールの順に整列されている必要があります。 例と詳細については、「[ネットワーク アクセス制御リストとは](../articles/virtual-network/virtual-networks-acl.md)」を参照してください。
