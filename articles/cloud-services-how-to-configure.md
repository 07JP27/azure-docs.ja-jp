<properties 
	pageTitle="クラウド サービスの構成方法 - Azure" 
	description="Azure のクラウド サービスの構成方法について説明します。クラウド サービスの構成の更新方法と、ロール インスタンスへのリモート アクセスの構成方法を紹介します。" 
	services="cloud-services" 
	documentationCenter="" 
	authors="Thraka" 
	manager="timlt" 
	editor=""/>

<tags 
	ms.service="cloud-services" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="10/21/2014" 
	ms.author="adegeo"/>




<h1><a id="configurecloudservice"></a>クラウド サービスの構成方法</h1>

クラウド サービスで最もよく使用される設定は Azure の管理ポータルで構成できます。また、構成ファイルを直接更新する場合は、サービス構成ファイルをダウンロードして内容を更新し、更新したファイルをアップロードして、クラウド サービスの構成を更新します。どちらの方法でも、構成の更新はすべてのロール インスタンスに適用されます。

クラウド サービスで実行中の 1 つまたはすべてのロールへのリモート デスクトップ接続を有効にすることもできます。リモート デスクトップを使用すると、アプリケーションの実行中にそのデスクトップにアクセスし、問題のトラブルシューティングや診断を行うことができます。アプリケーション開発時にリモート デスクトップのサービス定義ファイル (.csdef) を構成しなかった場合でも、ロールへのリモート デスクトップ接続を有効にできます。リモート デスクトップ接続を有効にするために、アプリケーションを再展開する必要はありません。

Azure で構成の更新中に 99.95% の可用性を保証できるのは、各ロールに少なくとも 2 つのロール インスタンスがある場合だけです。この場合、1 台の仮想マシンでクライアントからの要求を処理し、もう 1 台で更新を行うことができます。詳細については、「[サービス レベル アグリーメント](https://www.windowsazure.com/ja-jp/support/legal/sla/)」を参照してください。

## 目次##

* [方法: クラウド サービス構成の更新](#update)
* [方法:ロール インスタンスへのリモート アクセスの構成](#remoteaccess)


<h2><a id="update"></a>方法:クラウド サービス構成の更新</h2>

1. [Azure 管理ポータル](http://manage.windowsazure.com/)で **[クラウド サービス]** をクリックし、クラウド サービスの名前をクリックして、**[構成]** をクリックします。

	![Configuration Page](./media/cloud-services-how-to-configure/CloudServices_ConfigurePage1.png)
	
	**[構成]** ページでは、監視の構成、ロール設定の更新、およびロール インスタンスのゲスト オペレーティング システムとファミリの選択ができます。 

2. **[監視]** で、監視レベルの設定 ([詳細] または [最小])、および詳細監視に必要な診断接続文字列の構成を行います。手順については、「[クラウド サービスの監視方法](../how-to-monitor-a-cloud-service/)」を参照してください。


3. サービス ロールについては (ロールによりグループ分け)、次の設定を更新できます。

	>- **[設定]**   サービス構成ファイル (.cscfg) の *ConfigurationSettings* 要素で指定された各種構成設定値を変更します。
	
	>- **[証明書]**   ロールの SSL 暗号化で使用されている証明書のサムプリントを変更します。証明書を変更するには、まず、**[証明書]** ページで新しい証明書をアップロードする必要があります。次に、ロール設定に表示される証明書文字列のサムプリントを更新します。

4. **[オペレーティング システム]** で、ロール インスタンスのオペレーティング システム ファミリまたはバージョンを変更することも、**[自動]** を選択して、現在のオペレーティング システム バージョンの自動更新を有効にすることもできます。オペレーティング システムの設定は、Web ロールと Worker ロールには適用されますが、Virtual Machines は影響を受けません。

	展開中に、すべてのロール インスタンスに最新のオペレーティング システムがインストールされ、オペレーティング システムは既定で自動更新されます。 

	コードの互換性を維持するために異なるバージョンのオペレーティング システムでクラウド サービスを実行する必要がある場合は、オペレーティング システム ファミリおよびバージョンを選択できます。特定のバージョンのオペレーティング システムを選択すると、クラウド サービスで使用するオペレーティング システムの自動更新は中断されます。オペレーティング システムに更新プログラムが適用されるようユーザーが責任を持つ必要があります。

	最新バージョンのオペレーティング システムでアプリケーションに生じる互換性の問題がすべて解決された場合、オペレーティング システムのバージョンを **[自動]** に設定して、オペレーティング システムの自動更新を有効にできます。 

	![OS Settings](./media/cloud-services-how-to-configure/CloudServices_ConfigurePage_OSSettings.png)

5. 構成設定を保存してロール インスタンスに適用するには、**[保存]** をクリックします(変更を取り消すには、**[破棄]** をクリックします)。**[保存]** および **[破棄]** は、設定を変更するとコマンド バーに追加されます。

### クラウド サービス構成ファイルを手作業で更新するには###

1. 現在の構成を含むクラウド サービス構成ファイル (.cscfg) をダウンロードします。クラウド サービスの **[構成]** ページで、**[ダウンロード]** をクリックします。続いて **[保存]** または **[名前を付けて保存]** をクリックして、ファイルを保存します。

2. サービス構成ファイルを更新した後、次のステップでファイルをアップロードして構成の更新内容を適用します。

	a. **[構成]** ページで、**[アップロード]** をクリックします。

	![Upload Configuration](./media/cloud-services-how-to-configure/CloudServices_UploadConfigFile.png)

	b. **[構成ファイル]** で、**[参照]** を使って、更新した .cscfg ファイルを選択します。

	c. クラウド サービスにインスタンスが 1 つしかないロールがある場合は、**[1 つ以上のロールに単一のインスタンスが含まれている場合でも更新する]** チェック ボックスをオンにして、ロールの構成を更新できるようにして続行します。

	Azure では、各ロールに少なくとも 2 つのインスタンスを定義しない限り、サービス構成の更新中にクラウド サービスの最低 99.95% の可用性を保証することはできません。詳細については、「[サービス レベル アグリーメント](http://azure.microsoft.com/support/legal/sla/)」を参照してください。

	d. **[OK]** (チェックマーク) をクリックします。 


<h2><a id="remoteaccess"></a>方法:ロール インスタンスへのリモート アクセスの構成</h2>

リモート デスクトップを使用して、Azure で実行されているロールのデスクトップにアクセスできます。リモート デスクトップ接続を使用すると、アプリケーションの実行中にそのアプリケーションの問題のトラブルシューティングや診断を行うことができます。アプリケーションの設計時、またはアプリケーションを Azure に展開した後で、ロールでのリモート デスクトップ接続を有効にできます (ロールの実行中)。管理ポータルを通じて実行中のロールでリモート デスクトップ接続を有効にしても、アプリケーションを再展開する必要はありません。リモート デスクトップ接続を認証するには、前にアップロードした証明書を使用するか、新しい証明書を作成することができます。

クラウド サービスの **[構成]** ページで、リモート デスクトップを有効にしたり、仮想マシンへの接続に使用するローカルな管理者アカウントまたはパスワード、認証に使用する証明書、または有効期限を変更したりできます。

### サービス定義ファイルでリモート アクセスを構成するには###

サービス定義ファイル (.csdef) に **Import** 要素を追加して、RemoteAccess および RemoteForwarder モジュールをサービス モデルにインポートします。これらのモジュールが存在すると、Azure によってリモート デスクトップ用の構成設定がサービス構成ファイルに追加されます。リモート デスクトップの構成を完了するには、Azure に証明書をインポートして、サービス構成ファイルでその証明書を指定する必要があります。詳細については、「[Azure ロールのリモート デスクトップ接続をセットアップする][]」を参照してください。

### 管理ポータルでロール インスタンスのリモート アクセスを有効にする、または変更するには###

1. **[クラウド サービス]** をクリックし、クラウド サービスの名前をクリックして、**[構成]** をクリックします。

2. **[リモート]** をクリックします。

	 ![Cloud services remote](./media/cloud-services-how-to-configure/CloudServices_Remote.png)

	**警告:** 最初にリモート デスクトップを有効にして [OK] (チェックマーク) をクリックすると、すべてのロール インスタンスが再起動されます。再起動を防止するには、パスワードの暗号化に使用する証明書をロールにインストールする必要があります。

	証明書をインストールしてからこのダイアログに戻ってください (詳細については、「[Using Remote Desktop with Azure Roles (Azure ロールでのリモート デスクトップの使用)][]」を参照してください)。既存の証明書を選択すると、構成の更新がロール内のすべてのインスタンスに送信されます。

3. **[ロール]** で、更新するロールを選択します。すべてのロールの場合は、**[すべて]** をクリックします。

4. 必要に応じて次の変更を行います。

	- リモート デスクトップを有効にするには、**[リモート デスクトップを有効にする]** チェック ボックスをオンにします。リモート デスクトップを無効にするには、チェック ボックスをオフにします。

	- ロール インスタンスへのリモート デスクトップ接続で使用するアカウントを作成します。

	- 既存のアカウントのパスワードを更新します。

	- 認証に使用するために、アップロードした証明書を選択するか (**[証明書]** ページの **[アップロード]** を使用して証明書をアップロードします)、新しい証明書を作成します。 

	- リモート デスクトップ構成の有効期限を変更します。

5. 構成の更新が完了したら、**[OK]** (チェックマーク) をクリックします。

6. ロール インスタンスに接続するには:

	a. **[インスタンス]** をクリックして、**[インスタンス]** ページを開きます。

	b. リモート デスクトップが構成されたロール インスタンスを選択します。

	c. **[接続]** をクリックし、指示に従ってデスクトップを開きます。 

	d. **[開く]**、**[接続]** の順にクリックして、リモート デスクトップ接続を開始します。

### 管理ポータルでロール インスタンスのリモート アクセスを無効にするには###

1. **[クラウド サービス]** をクリックし、クラウド サービスの名前をクリックして、**[構成]** をクリックします。

2. **[リモート]** をクリックします。

3. **[ロール]** で、更新するロールを選択します。すべてのロールの場合は、**[すべて]** をクリックします。

4. **[リモート デスクトップを有効にする]** チェック ボックスをオフにします。

5. **[OK]** (チェックマーク) をクリックします。

[Azure ロールのリモート デスクトップ接続をセットアップする]: http://msdn.microsoft.com/library/windowsazure/hh124107.aspx

[Using Remote Desktop with Azure Roles (Azure ロールでのリモート デスクトップの使用)]: http://msdn.microsoft.com/library/windowsazure/gg443832.aspx
			

<!--HONumber=45--> 
