<properties 
	pageTitle="メディア コンテンツの管理方法 - Azure メディア サービス" 
	description="Azure メディア サービスでメディア コンテンツを管理する方法について説明します。" 
	services="media-services" 
	documentationCenter="" 
	authors="juliako" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="10/30/2014" 
	ms.author="juliako"/>





# メディア サービスのコンテンツの管理方法に関するページ #

この記事は、[メディア サービスのビデオ オンデマンド ワークフロー](media-services-video-on-demand-workflow.md) シリーズの一部です。 

このトピックでは、Azure の管理ポータルを使用して、メディア サービス アカウント内のメディア コンテンツを管理する方法について説明します。

現在は、次のコンテンツ操作をポータルから直接実行できます。

- コンテンツ情報 (発行状態、発行 URL、サイズ、日付、最終更新日時、アセットの暗号化の有無など) も確認できます。
- 新しいコンテンツのアップロード
- コンテンツのインデックス作成
- コンテンツのエンコード
- コンテンツの再生
- 暗号化
- コンテンツの発行と発行の取り消し



##<a id="upload"></a>方法:コンテンツをアップロードする 


1. [管理ポータル](http://go.microsoft.com/fwlink/?LinkID=256666&clcid=0x409)で、**[メディア サービス]** をクリックし、目的の メディア サービス アカウント名をクリックします。
2. [コンテンツ] ページを選択します。 
3. ページまたはポータルの下部にある **[アップロード]** をクリックします。 
4. **[コンテンツのアップロード]** ダイアログで、目的のアセット ファイルを見つけます。ファイルをクリックして、**[開く]** をクリックするか、**Enter** キーを押します。

	![UploadContentDialog][uploadcontent]

5. [コンテンツのアップロード] ダイアログで、チェック ボタンをクリックして、ファイル名とコンテンツ名をそのまま使用します。
6. アップロードが開始され、進捗状況はポータルの下部で確認できます。  

	![JobStatus][status]

アップロードが完了すると、コンテンツ一覧に新しいアセットが表示されます。通常、名前の末尾に "**-Source**" が付加され、エンコード タスクのソース コンテンツとして新しいコンテンツを見つけやすくなっています。

![ContentPage][contentpage]

アップロード処理が終了してもファイル サイズの値が更新されない場合は、**[メタデータの同期]** をクリックします。これによりアセットのファイル サイズがストレージの実際のファイル サイズと同期され、[コンテンツ] ページに表示される値が更新されます。	

##<a id="index"></a>方法:コンテンツのインデックス作成

Azure Media Indexer を使用すると、メディア ファイルのコンテンツを検索対応にしたり、字幕やキーワード用にフルテキストのトランスクリプトを生成したりできます。コンテンツのインデックスは、管理ポータルから以下に示した手順で作成できます。ただし、対象となるファイルの選択やインデックス作成ジョブの動作を細かく制御する必要がある場合は、Media Services SDK for .NET または REST API を使用してください。詳細については、[Azure Media Indexer によるメディア ファイルのインデックス作成](https://msdn.microsoft.com/ja-jp/library/azure/dn783455.aspx)をご覧ください。

管理ポータルを使用してコンテンツのインデックスを作成するには、次の手順を実行します。

1. インデックスの作成対象となるファイルを選択します。
	そのファイル タイプのインデックスを作成できる場合、[コンテンツ] ページの一番下にある [プロセス] ボタンが有効になります。
1. [プロセス] ボタンをクリックします。
2. **[プロセス]** ダイアログで **[Azure Media Indexer]** プロセッサを選択します。
3. 次に、[プロセス] ダイアログで、入力メディア ファイルの**タイトル**と**説明**を詳しく入力します。
	
	![Process][process]

##<a id="encode"></a>方法:コンテンツのエンコード

インターネット経由でデジタル ビデオを配信するには、メディアを圧縮する必要があります。メディア サービスには、コンテンツのエンコード方法 (使用するコーデック、ファイル形式、解像度、ビットレートなど) を指定できるメディア エンコーダーが用意されています。 

クライアントに対するアダプティブ ビットレート ストリーミング配信は、Azure メディア サービスの代表的な用途の 1 つです。アダプティブ ビットレート ストリーミングでは、現在のネットワーク帯域幅、CPU 使用率などの条件に基づいてビデオが表示されるため、高低のビットレート ストリームの切り替えをクライアント側で行うことができます。メディア サービスでは、HTTP ライブ ストリーミング (HLS)、スムーズ ストリーミング、MPEG DASH、HDS (Adobe PrimeTime/Access のライセンス所有者のみ使用可能) の各アダプティブ ビットレート ストリーミング技術がサポートされています。 

メディア サービスには動的パッケージ化機能があり、アダプティブ ビットレート MP4 やスムーズ ストリーミングでエンコードされたコンテンツを、メディア サービスでサポートされるストリーミング形式 (MPEG DASH、HLS、スムーズ ストリーミング、HDS) でそのまま配信できます。つまり、これらのストリーミング形式に再度パッケージ化する必要がありません。 

動的パッケージ化機能を利用するには、次の作業が必要となります。

- メザニン (ソース) ファイルを一連のアダプティブ ビットレート MP4 ファイルまたはアダプティブ ビットレート スムーズ ストリーミング ファイルにエンコードします (エンコードの手順は、このチュートリアルの後半で説明しています)。
- コンテンツに配信するストリーミング エンドポイントの 1 つ以上のオンデマンド ストリーミング ユニットを取得します。詳細については、[オンデマンド ストリーミング占有ユニットの規模変更方法](media-services-manage-origins#scale_streaming_endpoints.md)をご覧ください。

動的パッケージ化機能を使用した場合、保存と課金の対象となるのは、単一のストレージ形式のファイルのみです。メディア サービスがクライアントからの要求に応じて適切な応答を構築して返します。 

動的パッケージ化機能を使用できることに加え、オンデマンド ストリーミング占有ユニットを使用すると、専用の送信容量を 200 Mbps 単位で購入できます。既定では、オンデマンド ストリーミングは、サーバー リソース (コンピューティング、送信容量など) を他のユーザーと共有する共有インスタンス モデルとして構成されます。オンデマンド ストリーミングのスループットを高めるために、オンデマンド ストリーミング占有ユニットの購入をお勧めします。

ここでは、管理ポータルから Azure Media Encoder でコンテンツをエンコードするための手順について説明します。

1.  エンコードの対象となるファイルを選択します。
	そのファイル タイプのエンコードがサポートされている場合、[コンテンツ] ページの一番下にある [プロセス] ボタンが有効になります。
4. **[プロセス]** ダイアログで **[Azure メディア エンコーダー]** プロセッサを選択します。
5. いずれかの**エンコーディング構成**を選択します。

	![Process2][process2]

		
	**[アダプティブ ストリーミング用プリセット (動的パッケージ化)]**、**[プログレッシブ ダウンロード用プリセット]**、**[アダプティブ ストリーミング用レガシ プリセット]** の各プリセットの意味については、「[Media Services Encoder 用のタスク プリセット](https://msdn.microsoft.com/ja-jp/library/azure/dn619392.aspx)」  のトピックをご覧ください。  


	以下、**[その他]** の構成について説明します。

	+ **[PlayReady コンテンツ保護を使用したエンコード]**。このプリセットは、PlayReady コンテンツ保護を使用してエンコードされたアセットを生成します。  
	
	
		既定では、Media Services PlayReady ライセンス サービスが使用されます。クライアントが PlayReady 暗号化コンテンツを再生するためにライセンスを取得可能な他のサービスを指定するには、REST または Media Services .NET SDK API を使用します。詳細については、[静的暗号化を使用したコンテンツの保護]()に関するページを参照し、Media Encryptor プリセットの **licenseAcquisitionUrl** プロパティを設定してください。代わりに、「[PlayReady 動的暗号化とライセンス提供サービスの使用](http://go.microsoft.com/fwlink/?LinkId=507720 )」に説明されているように、動的暗号化を使用して **PlayReadyLicenseAcquisitionUrl** プロパティを設定できます。 
	+ **[PC/Mac での再生 (Flash/Silverlight を使用)]**。このプリセットは、次のような特徴を持つスムーズ ストリーミング アセットを作成します。AAC を使用して 96 kbps で CBR エンコードされた 44.1 kHz 16 ビット/サンプルのステレオ オーディオ、H.264 Main Profile を使用して 3,400 ～ 400 kbps の範囲で 6 ビットレートで CBR エンコードされた 720p ビデオ、そして 2 秒の GOP。
	+ **[HTML5 (IE/Chrome/Safari) を使用した再生]**。このプリセットは、次のような特徴を持つ単一の MP4 ファイルを作成します。AAC を使用して 128 kbps で CBR エンコードされた 44.1 kHz 16 ビット/サンプルのステレオ オーディオ、H.264 Main Profile を使用して 4,500 kbps で CBR エンコードされた 720p ビデオ。
	+ **[iOS デバイスと PC/Mac での再生]**。このプリセットは、スムーズ ストリーミング アセット (上述) と同じ特徴を持つアセットを作成しますが、Apple HLS ストリームを iOS デバイスに配信するときに使用できる形式で作成します。 

5. 次に、わかりやすい出力コンテンツ名を入力するか、既定値をそのまま使用します。チェック ボタンをクリックすると、エンコード処理が開始され、進捗状況はポータルの下部で確認できます。
6. [OK] をクリックします。

	エンコードが完了すると、[コンテンツ] ページにエンコード済みのファイルが表示されます。 

	エンコード ジョブの進行状況を確認するには、**[ジョブ]** ページに切り替えます。  


	エンコードが終了してもファイル サイズの値が更新されない場合は、**[メタデータの同期]** をクリックします。これにより出力アセットのファイル サイズがストレージの実際のファイル サイズと同期され、[コンテンツ] ページに表示される値が更新されます。	

##<a id="encrypt"></a>方法:コンテンツを暗号化する

メディア サービスで AES キーまたは PlayReady DRM を使用してアセットを暗号化するには、次の操作を実行します。

- メザニン (ソース) ファイルを一連のアダプティブ ビットレート MP4 ファイルまたはアダプティブ ビットレートスムーズ ストリーミング ファイルにエンコードします (エンコーディングの手順は [エンコード](#encode)セッションで説明しています) 。
- コンテンツに配信するストリーミング エンドポイントの 1 つ以上のオンデマンド ストリーミング ユニットを取得します。詳細については、[オンデマンド ストリーミング占有ユニットの規模変更方法](media-services-manage-origins#scale_streaming_endpoints.md)をご覧ください。
- 「既定の AES クリア キー サービス ポリシー」または「既定 PlayReady ライセンス サービス ポリシー」を構成します。詳細については、[コンテンツ キー承認ポリシーを構成する](media-services-portal-configure-content-key-auth-policy.md)をご覧ください。  


	暗号化を有効にする準備ができたら、**コンテンツ** ページの下部にある **[暗号化]** ボタンを押します。

	![Encrypt][encrypt] 

	暗号化を有効にすると、プレーヤーからストリームが要求されるたびに、メディア サービスは指定されたキーを使用して、AES または PlayReady 暗号化でコンテンツを動的に暗号化します。ストリームの暗号化を解除するには、プレーヤーはキー配信サービスからキーを要求します。ユーザーのキーの取得が承認されているかどうかを判断するために、サービスはキーに指定した承認ポリシーを評価します。

##<a id="publish"></a>方法:コンテンツを発行する

コンテンツを発行すると、ストリーミング URL またはプログレッシブ ダウンロード URL が提供されます。クライアントは、その URL を使用してビデオを再生できます。

1. 発行するアセットをクリックします。 
2. 次に発行ボタンをクリックします。 
	
	コンテンツが URL に発行されると、エンコードされたコンテンツを描画できるクライアント プレーヤーでその URL を開くことができるようになります。

 ![PublishedContent][publishedcontent]

## 方法:ポータルでコンテンツを再生する

ビデオは、管理ポータルにある メディア サービス コンテンツ プレ-ヤーを使用してテストできます。

目的のビデオ コンテンツをクリックし、ポータルの下部にある **[再生]** をクリックします。 
 
ポータルから再生できるのは、発行されたコンテンツだけです。また、エンコード方法がブラウザーでサポートされている必要があります。


<!-- Images -->
[portaloverview]: ./media/media-services-manage-content/media-services-content-page.png
[publishedcontent]: ./media/media-services-manage-content/media-services-upload-content-published.png
[uploadcontent]: ./media/media-services-manage-content/UploadContent.png
[status]: ./media/media-services-manage-content/Status.png
[encoder]: ./media/media-services-manage-content/EncoderDialog2.png
[branding]: ./media/branding-reporting.png
[contentpage]: ./media/media-services-manage-content/media-services-content-page.png
[process]: ./media/media-services-manage-content/media-services-process-video.png
[process2]: ./media/media-services-manage-content/media-services-process-video2.png
[encrypt]: ./media/media-services-manage-content/media-services-encrypt-content.png
<!--HONumber=45--> 
