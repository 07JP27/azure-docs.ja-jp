---
title: "リモート監視ソリューションを使ってみる - Azure | Microsoft Docs"
description: "このチュートリアルでは、シミュレートされたシナリオを使用して、リモート監視の構成済みソリューションを紹介します。 これらのシナリオは、最初にリモート監視の構成済みソリューションをデプロイするときに作成されます。"
services: 
suite: iot-suite
author: dominicbetts
manager: timlt
ms.author: dobett
ms.service: iot-suite
ms.date: 02/15/2018
ms.topic: article
ms.devlang: NA
ms.tgt_pltfrm: NA
ms.workload: NA
ms.openlocfilehash: 5bc01c7e70e6837989c6bebd843ba1f41c8c5aeb
ms.sourcegitcommit: d87b039e13a5f8df1ee9d82a727e6bc04715c341
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/21/2018
---
# <a name="explore-the-capabilities-of-the-remote-monitoring-preconfigured-solution"></a>リモート監視の構成済みソリューションについて知る

このチュートリアルでは、リモート監視ソリューションの主要な機能を紹介します。 これらの機能を紹介するために、このチュートリアルでは、Contoso という会社のシミュレートされた IoT アプリケーションを使用して一般的な顧客シナリオを示します。

このチュートリアルは、リモート監視ソリューションに既定で用意されている一般的な IoT シナリオを理解するのに役立ちます。

このチュートリアルで学習する内容は次のとおりです。

>[!div class="checklist"]
> * ダッシュボードでデバイスの視覚化とフィルター処理を行う
> * アラームに対処する
> * デバイスのファームウェアを更新する
> * 資産を整理する
> * シミュレートされたデバイスを停止し、起動する

次のビデオでは、リモート監視ソリューションのチュートリアルを示します。

>[!VIDEO https://channel9.msdn.com/Shows/Internet-of-Things-Show/Part-28-An-introduction-to-Azure-IoT-through-the-new-Remote-Monitoring-Preconfigured-Solution/Player]

## <a name="prerequisites"></a>前提条件

このチュートリアルを実行するには、Azure サブスクリプションにデプロイされたリモート監視ソリューションのインスタンスが必要です。

まだリモート管理ソリューションをデプロイしていない場合は、「[リモート管理の事前構成済みソリューションをデプロイする](iot-suite-remote-monitoring-deploy.md)」チュートリアルを実行する必要があります。

## <a name="the-contoso-sample-iot-deployment"></a>Contoso のサンプル IoT デプロイ

Contoso のサンプル IoT デプロイを使用して、リモート監視ソリューションに既定で用意されている基本シナリオを理解できます。 これらのシナリオは実際の IoT デプロイに基づいています。 ほとんどの場合では、特定の要件を満たすためにリモート監視ソリューションをカスタマイズしますが、Contoso のサンプルは基礎を学ぶのに役立ちます。

> [!NOTE]
> CLI を使用して構成済みソリューションをデプロイした場合は、デプロイに関する情報 (デプロイされたサンプルにアクセスするための URL など) がファイル `deployment-{your deployment name}-output.json` に含まれます。

Contoso のサンプルでは、シミュレートされたデバイスとそれらに影響を及ぼす規則がプロビジョニングされます。 基本シナリオを理解したら、[リモート管理ソリューションを使用した高度なデバイス監視の実行](iot-suite-remote-monitoring-monitor.md)に関するチュートリアルに進んで、ソリューションの機能についてさらに詳しく学習できます。

Contoso は、さまざまな資産を複数の異なる環境で管理している企業です。 Contoso は、クラウドベースの IoT アプリケーションの力を利用して、一元化されたアプリケーションから複数の資産をリモートで監視および管理しようとしています。 以下のセクションでは、Contoso サンプルの初期構成の概要を示します。

> [!NOTE]
> この Contoso のデモは、シミュレートされたデバイスのプロビジョニングと規則の作成を行う方法の 1 つにすぎません。 他のプロビジョニング方法として、独自のカスタム デバイスを作成することもできます。 独自のデバイスと規則を作成する方法の詳細については、「[デバイスの管理と作成](iot-suite-remote-monitoring-manage.md)」と「[しきい値に基づくルールを使用して問題を検出する](iot-suite-remote-monitoring-automate.md)」をご覧ください。

### <a name="contoso-devices"></a>Contoso のデバイス

Contoso は、さまざまな種類のスマート デバイスを使用しています。 これらのデバイスは会社のために異なる役割を果たし、さまざまなテレメトリ ストリームを送信します。 さらに、デバイスの種類ごとに、デバイスのプロパティとサポートされるメソッドが異なります。

次の表に、プロビジョニングされるデバイスの種類の概要を示します。

| デバイスの種類        | テレメトリ                                  | [プロパティ]                                  | タグ                    | メソッド                                                                                      |
| ------------------ | ------------------------------------------ | ------------------------------------------- | ----------------------- | -------------------------------------------------------------------------------------------- |
| 冷却装置            | 温度、湿度、圧力            | タイプ、ファームウェアのバージョン、モデル               | 場所、フロア、キャンパス | 再起動、ファームウェアの更新、非常弁の解放、圧力を上げる                          |
| プロトタイプ作成デバイス | 温度、圧力、地理的な場所        | タイプ、ファームウェアのバージョン、モデル               | 場所、モード          | 再起動、ファームウェアの更新、デバイスの移動、デバイスの停止、温度を下げる、温度を上げる |
| エンジン             | タンク燃料レベル、冷却液センサー、振動 | タイプ、ファームウェアのバージョン、モデル               | 場所、フロア、キャンパス | 再起動、ファームウェアの更新、タンクを空にする、タンクを満たす                                              |
| トラック              | 地理的な場所、速度、貨物温度     | タイプ、ファームウェアのバージョン、モデル               | 場所、積荷          | 貨物温度を下げる、貨物温度を上げる、ファームウェアの更新                         |
| エレベーター           | フロア、振動、温度              | タイプ、ファームウェアのバージョン、モデル、地理的な場所 | 場所、キャンパス        | エレベーターの停止、エレベーターの起動、ファームウェアの更新                                               |

> [!NOTE]
> Contoso のデモ サンプルでは、1 種類につき 2 つのデバイスがプロビジョニングされます。 各種類で、1 つは Contoso によって正常と定義された境界内で正常に動作しており、1 つは何らかの動作不良があります。 次のセクションで、Contoso がデバイスに対して定義している規則を示します。 これらの規則により、正常な動作の境界が定義されます。

### <a name="contoso-rules"></a>Contoso の規則

Contoso のオペレーターは、デバイスが正常に動作しているかどうかを判断するしきい値を把握しています。 たとえば、冷却装置からレポートされる圧力が 250 PSI を超えている場合、その冷却装置は正常に動作していません。 次の表に、Contoso がそれぞれのデバイスの種類に対して定義しているしきい値ベースの規則を示します。

| 規則の名前 | [説明] | しきい値 | 重大度 | 影響を受けるデバイス |
| --------- | ----------- | --------- | -------- | ---------------- |
| 冷却装置の圧力が高すぎる | 冷却装置が正常な圧力レベルを超えた場合にアラートを送信します   |P>250 psi       | 重大 | 冷却装置            |
| プロトタイプ作成デバイスの温度が高すぎる  | プロトタイプ作成デバイスが正常な温度レベルを超えた場合にアラートを送信します  |T>80&deg; F |重大 | プロトタイプ作成デバイス |
| エンジン タンクが空の状態である  | エンジンの燃料タンクが空に近づいた場合にアラートを送信します                     | F<5 ガロン | 情報     | エンジン             |
| 正常な貨物温度を超えている | トラックの貨物温度が正常な温度を超えた場合にアラートを送信します                 | T<45&deg; F |警告  | トラック              |
| エレベーターの振動が停止した      | エレベーターが完全に停止した場合 (振動レベルに基づいて判断) にアラートを送信します                     | V<0.1 mm |警告  | エレベーター           |

### <a name="operate-the-contoso-sample-deployment"></a>Contoso のサンプル デプロイの操作

これで、Contoso のサンプルの初期設定を確認できました。 以下のセクションでは、オペレーターがこの構成済みソリューションをどのように使用するかを示す Contoso サンプルの 3 つのシナリオについて説明します。

## <a name="respond-to-a-pressure-alarm"></a>圧力アラームへの対処

このシナリオでは、冷却装置デバイスによってトリガーされたアラームを識別して対処する方法を示します。 冷却装置はレドモンドの建物 43、フロア 2 にあります。

オペレーターはダッシュボードで、冷却装置の圧力に関するアラームが発生していることを発見します。 マップ上でパン/ズームすると詳細を確認できます。

1. **[ダッシュボード]** ページの **[System Alarms]\(システム アラーム\)** グリッドに、**[冷却装置の圧力が高すぎる]\(冷却装置の圧力が高すぎる\)** アラームが表示されています。 また、該当の冷却装置がマップ上で強調表示されます。

    ![圧力アラームとマップ上のデバイスが表示されたダッシュボード](media/iot-suite-remote-monitoring-explore/dashboardalarm.png)

1. デバイスの詳細とテレメトリを表示するには、マップ上で強調表示されている冷却装置をクリックします。 テレメトリは圧力のスパイクを示しています。

    ![マップ上のデバイスを選択して詳細を表示する](media/iot-suite-remote-monitoring-explore/dashboarddetail.png)

1. **[Device detail]\(デバイスの詳細\)** を閉じます。

1. **[メンテナンス]** ページに移動するには、ナビゲーション メニューで **[メンテナンス]** を選択します。

**[メンテナンス]** ページで、冷却装置の圧力アラームをトリガーした規則の詳細を確認できます。

1. 通知の一覧に、アラームがトリガーされた回数、確認された数、未解決のアラームと解決済みのアラームの数が表示されます。

    ![トリガーされたアラームの一覧が表示された [メンテナンス] ページ](media/iot-suite-remote-monitoring-explore/maintenancealarmlist.png)

1. 一覧内の最初のアラームが、最新のアラームです。 **[Chiller Pressure]\(冷却装置の圧力\)** アラームをクリックして、関連するデバイスとテレメトリを表示します。 テレメトリは冷却装置の圧力のスパイクを示しています。

    ![選択したアラームのテレメトリが表示された [メンテナンス] ページ](media/iot-suite-remote-monitoring-explore/maintenancetelemetry.png)

これで、アラームをトリガーした問題と、関連するデバイスを特定できました。 次にオペレーターが実行する手順は、アラームの確認と問題の緩和です。

1. これからアラームに対処することを示すために、**[Alarm status]\(アラームの状態\)** を **[確認済み]** に変更します。

    ![アラームを選択して確認する](media/iot-suite-remote-monitoring-explore/maintenanceacknowledge.png)

1. 冷却装置に対してアクションを実行するには、冷却装置を選択し、**[スケジュール]** を選択します。 **[EmergencyValveRelease]** を選択し、ジョブ名 **[ChillerPressureRelease]** を追加して、**[適用]** を選択します。 これらの設定により、すぐに実行されるジョブが作成されます。

    ![デバイスを選択してアクションをスケジュールする](media/iot-suite-remote-monitoring-explore/maintenanceschedule.png)

1. ジョブの状態を確認するには、**[メンテナンス]** ページに戻り、**ジョブ** ビューでジョブの一覧を確認します。 冷却装置で、弁の圧力を解放するジョブが実行されたことを確認できます。

    ![ジョブ ビューに表示されたジョブの状態](media/iot-suite-remote-monitoring-explore/maintenancerunningjob.png)

最後に、冷却装置からのテレメトリ値が正常に戻っていることを確認します。

1. アラーム グリッドを表示するには、**[ダッシュボード]** ページに移動します。

1. デバイスのテレメトリを表示するには、マップ上で元のアラームが発生したデバイスを選択し、正常に戻っていることを確認します。

1. インシデントを閉じるには、**[メンテナンス]** ページに移動し、アラームを選択して状態を **[Closed]\(解決済み\)** に設定します。

    ![アラームを選択して閉じる](media/iot-suite-remote-monitoring-explore/maintenanceclose.png)

## <a name="update-device-firmware"></a>デバイスのファームウェアの更新

Contoso は、新しい種類のデバイスを実地にテストしています。 テスト サイクルの一環として、デバイスのファームウェアの更新が正常に動作することを確認する必要があります。 次の手順では、リモートの監視ソリューションを使用して、複数のデバイスでファームウェアを更新する方法を示します。

必要なデバイス管理タスクを実行するには、**[デバイス]** ページを使用します。 まず、すべてのプロトタイプ作成デバイスをフィルターで抽出します。

1. **[デバイス]** ページに移動します。 **[フィルター]** ドロップダウンで、**[プロトタイプ作成デバイス]** フィルターを選択します。

    ![[デバイス] ページでフィルターを使用する](media/iot-suite-remote-monitoring-explore/devicesprototypingfilter.png)

    > [!TIP]
    > 利用可能なフィルターを管理するには、**[管理]** をクリックします。

1. いずれかのプロトタイプ作成デバイスを選択します。

    ![[デバイス] ページでデバイスを選択する](media/iot-suite-remote-monitoring-explore/devicesselect.png)

1. **[スケジュール]** ボタンをクリックし、**[ファームウェア更新]** を選択します。 **[ジョブ名]** と **[Firmware URI]\(ファームウェアの URI\)** の値を入力します。 **[適用]** を選択して、今すぐ実行するようにジョブをスケジュールします。

    ![デバイスのファームウェアの更新をスケジュールする](media/iot-suite-remote-monitoring-explore/devicesschedulefirmware.png)

    > [!NOTE]
    > シミュレートされたデバイスでは、**[Firmware URI]\(ファームウェアの URI\)** の値として任意の URL を使用できます。 シミュレートされたデバイスは、この URL にアクセスしません。

1. ジョブの影響を受けるデバイスの数をメモして、**[適用]** を選択します。

    ![ファームウェアの更新ジョブを送信する](media/iot-suite-remote-monitoring-explore/devicessubmitupdate.png)

**[メンテナンス]** ページを使用して、実行中のジョブを追跡できます。

1. **[メンテナンス]** ページに戻り、**[ジョブ]** をクリックしてジョブの一覧を表示します。

1. 作成したジョブに関連するイベントを見つけます。 ファームウェアの更新プロセスが正常に開始されたことを確認します。

ファームウェアのバージョンが正しく更新されたことを確認するためのフィルターを作成できます。

1. フィルターを作成するには、**[デバイス]** ページに移動して **[Manage filters]\(フィルターの管理\)** を選択します。

    ![デバイス フィルターを管理する](media/iot-suite-remote-monitoring-explore/devicesmanagefilters.png)

1. ファームウェアのバージョンが新しいデバイスのみを含めるフィルターを作成します。

    ![デバイス フィルターを作成する](media/iot-suite-remote-monitoring-explore/devicescreatefilter.png)

1. **[デバイス]** ページに戻り、デバイスのファームウェアのバージョンが新しいことを確認します。

## <a name="organize-your-assets"></a>資産を整理する

Contoso には、フィールド サービス アクティビティのための 2 つの異なるチームがあります。

* Smart Building (スマート ビルディング) チームは、冷却装置、エレベーター、エンジンを管理します。
* Smart Vehicle (スマート車両) チームは、トラックとプロトタイプ作成デバイスを管理します。

オペレーターがより簡単にデバイスを整理および管理できるように、それぞれのチーム名でデバイスにタグを付けます。

デバイスに使用するタグ名は作成できます。

1. すべてのデバイスを表示するために、**[デバイス]** ページに移動して **[すべてのデバイス]** フィルターを選択します。

    ![すべてのデバイスを表示する](media/iot-suite-remote-monitoring-explore/devicesalldevices.png)

1. **[トラック]** デバイスと **[Prototyping]\(プロトタイプ作成\)** デバイスを選択します。 次に、**[タグ]** を選択します。

    ![プロトタイプ作成デバイスとトラック デバイスを選択する](media/iot-suite-remote-monitoring-explore/devicesmultiselect.png)

1. **[タグ]** を選択し、値 **ConnectedVehicle** を使用して **FieldService** という新しいテキスト タグを作成します。 ジョブの名前を選択する 次に、**[適用]** をクリックします。

    ![プロトタイプ作成デバイスとトラック デバイスにタグを追加する](media/iot-suite-remote-monitoring-explore/devicesaddtag.png)

1. **[冷却装置]**、**[エレベーター]**、および **[エンジン]** デバイスを選択します。 次に、**[タグ]** を選択します。

    ![冷却装置、エンジン、エレベーター デバイスを選択する](media/iot-suite-remote-monitoring-explore/devicesmultiselect2.png)

1. **[タグ]** を選択し、値 **SmartBuilding** を使用して **FieldService** という新しいテキスト タグを作成します。 ジョブの名前を選択する その後、**[保存]**をクリックします。

    ![冷却装置、エンジン、エレベーター デバイスにタグを追加する](media/iot-suite-remote-monitoring-explore/devicesaddtag2.png)

このタグ値を使用して、フィルターを作成できます。

1. **[デバイス]** ページで、**[Manage filters]\(フィルターの管理\)** を選択します。

    ![デバイス フィルターを管理する](media/iot-suite-remote-monitoring-explore/devicesmanagefilters.png)

1. タグ名 **FieldService** と値 **SmartBuilding** を使用する新しいフィルターを作成します。 フィルターに **[Smart Building]\(スマート ビルディング\)** という名前を付けて保存します。

1. タグ名 **FieldService** と値 **ConnectedVehicle** を使用する新しいフィルターを作成します。 フィルターに **[Connected Vehicle]\(接続された車両\)** という名前を付けて保存します。

これで、Contoso のオペレーターは、デバイスで何も変更しなくても運用チームに基づいてデバイスのクエリを実行できます。

## <a name="stop-simulated-devices"></a>シミュレートされたデバイスの停止

設定メニューを使用して、シミュレートされたデバイスを停止することができます。 これにより、ソリューションのテストと調査のコストを削減できます。 シミュレートされたデバイスを停止し、起動するには:

1. **[設定]** アイコンを選択します。

1. **[実行中]** のオンとオフを切り替えます。

    ![設定メニュー](media/iot-suite-remote-monitoring-explore/settings.png)

## <a name="next-steps"></a>次の手順

このチュートリアルで学習した内容は次のとおりです。

>[!div class="checklist"]
> * ダッシュボードでデバイスの視覚化とフィルター処理を行う
> * アラームに対処する
> * デバイスのファームウェアを更新する
> * 資産を整理する
> * シミュレートされたデバイスを停止し、起動する

ここでは、リモート監視ソリューションの概要を紹介しました。次のステップとして、リモート監視ソリューションの高度な機能について学習することをお勧めします。

* [デバイスの監視](./iot-suite-remote-monitoring-monitor.md)
* [デバイスの管理](./iot-suite-remote-monitoring-manage.md)
* [規則の使用によるソリューションの自動化](./iot-suite-remote-monitoring-automate.md)
* [ソリューションのメンテナンス](./iot-suite-remote-monitoring-maintain.md)
