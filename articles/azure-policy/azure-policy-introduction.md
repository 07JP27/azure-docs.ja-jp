---
title: Azure Policy の概要 | Microsoft Docs
description: Azure Policy は Azure のサービスであり、Azure 環境でのポリシー定義の作成、割り当て、管理に使うことができます。
services: azure-policy
keywords: ''
author: bandersmsft
ms.author: banders
ms.reviewer: nini
ms.date: 03/29/2018
ms.topic: overview
ms.service: azure-policy
manager: carmonm
ms.custom: mvc
ms.openlocfilehash: f9cd00aec025748170a6576fe3ee4dbf794edfdb
ms.sourcegitcommit: 20d103fb8658b29b48115782fe01f76239b240aa
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/03/2018
---
# <a name="what-is-azure-policy"></a>Azure Policy とは

IT ガバナンスは、ビジネス目標と IT プロジェクトの間の関係を明確にします。 適切な IT ガバナンスには、イニシアチブの計画と、戦略的なレベルの優先順位の設定が含まれます。 解決できそうもないほど多くの IT の問題を企業が抱えている場合は、 ポリシーを実装すると、効率的にそれを管理し、発生を防ぐことができます。 ポリシーを実装するときに、Azure Policy を利用できます。

Azure Policy は Azure のサービスであり、ポリシー定義の作成、割り当て、管理に使うことができます。 ポリシー定義は、リソースにさまざまなルールとアクションを適用し、会社の標準とサービス レベル契約へのリソースの準拠が維持されるようにします。 Azure Policy によって、リソースの評価が実行され、ご自身のポリシー定義に準拠していないリソースがスキャンされます。 たとえば、あるポリシーによって、特定の種類の仮想マシンのみを許可できます。 それとは別に、すべてのリソースで特定のタグを必須にすることもできます。 その後、このようなポリシーは、リソースを作成および更新するときに評価されます。

## <a name="how-is-it-different-from-rbac"></a>RBAC との違いは何か。

ポリシーとロールベースのアクセス制御 (RBAC) には、いくつかの主要な違いがあります。 RBAC は、さまざまなスコープでのユーザーの操作に焦点を当てています。 たとえば、ご自身が、目的のスコープでリソース グループの共同作成者ロールに追加されている場合があります。 このロールにより、そのリソース グループを変更できます。 ポリシーは、既存のリソースについて、デプロイ中のプロパティに焦点を当てます。 たとえば、ポリシーを使用して、プロビジョニングできるリソースの種類を制御できます。 また、リソースをプロビジョニングできる場所を制限できます。 RBAC とは異なり、ポリシーは既定で許可し、明示的に否認するシステムです。

ポリシーを使用するには、RBAC で認証される必要があります。 具体的には、アカウントには次のものが必要です。

- ポリシーを定義するための `Microsoft.Authorization/policydefinitions/write` アクセス許可。
- ポリシーを割り当てるための `Microsoft.Authorization/policyassignments/write` アクセス許可。
- イニシアティブを定義するための `Microsoft.Authorization/policySetDefinitions/write` アクセス許可。
- イニシアティブを割り当てるための `Microsoft.Authorization/policyassignments/write` アクセス許可。


これらのアクセス許可は、**共同作成者**ロールには含まれていません。


## <a name="policy-definition"></a>ポリシー定義

すべてのポリシー定義に、ポリシーが強制される条件があります。 また、それには、条件が満たされた場合に実行される関連アクションも含まれます。

Azure Policy には、既定で使うことができる組み込みポリシーがいくつかあります。 例: 

- **SQL Server 12.0 を必要とする**: このポリシー定義の条件/ルールでは、すべての SQL Server がバージョン 12.0 を使うことが保証されます。 アクションでは、これらの条件を満たしていないすべてのサーバーが拒否されます。
- **許可されるストレージ アカウント SKU**: このポリシー定義の一連の条件/ルールでは、デプロイされているストレージ アカウントが SKU サイズのセット内かどうかが判定されます。 アクションでは、定義されている SKU サイズのセットに準拠していないすべてのサーバーが拒否されます。
- **許可されるリソースの種類**: このポリシー定義の一連の条件/ルールでは、組織がデプロイできるリソースの種類が指定されます。 アクションでは、この定義済みリストの一部ではないすべてのリソースが拒否されます。
- **許可された場所**: このポリシーでは、リソースをデプロイするときに組織が指定できる場所を制限できます。 そのアクションは、geo コンプライアンス要件を強制するときに使用されます。
- **許可された仮想マシンの SKU**: このポリシーでは、組織がデプロイできる一連の仮想マシン SKU を指定できます。
- **タグとその既定値を適用**: このポリシーは、必要なタグとその既定値を適用します (ユーザーによって指定されていない場合)。
- **タグとその値を強制**: このポリシーは、必要なタグとその値をリソースに強制します。
- **許可されないリソースの種類**: このポリシーでは、組織がデプロイできないリソースの種類を指定できます。

こうしたポリシーを割り当てるには、Azure Portal、PowerShell、または Azure CLI を使用します。

ポリシー定義の構造について詳しくは、「[ポリシー定義の構造](policy-definition.md)」をご覧ください。

## <a name="policy-assignment"></a>ポリシー割り当て

ポリシー割り当ては、特定のスコープ内で実行するように割り当てられたポリシー定義です。 このスコープの範囲は、管理グループからリソース グループまでです。 "*スコープ*" という用語は、ポリシー定義が割り当てられる、すべてのリソース グループ、サブスクリプション、または管理グループのことを指します。 ポリシー割り当ては、すべての子リソースによって継承されます。 したがって、リソース グループに適用されたポリシーは、そのリソース グループのすべてのリソースに適用されます。 ただし、サブスコープを、ポリシーの割り当てから除外できます。 たとえば、サブスクリプション スコープで、ネットワーク リソースの作成を禁止するポリシーを割り当てることができます。 ただし、ネットワーク インフラストラクチャを対象とした 1 つのリソース グループを、そのサブスクリプション内で除外します。 このネットワーク リソース グループへのアクセスは、信頼できるユーザーに許可し、そのユーザーがネットワーク リソースを作成できるようにします。

ポリシー定義と割り当ての設定の詳細については、「[ポリシーの割り当てを作成し、Azure 環境内の非対応リソースを特定する](assign-policy-definition.md)」を参照してください。

## <a name="policy-parameters"></a>ポリシー パラメーター

ポリシー パラメーターは、作成する必要があるポリシー定義の数を減らしてポリシーの管理を簡素化するのに役立ちます。 ポリシー定義を作成するときにパラメーターを定義して、ポリシー定義を汎用化できます。 その後、そのポリシー定義を、さまざまなシナリオで再利用できます。 これを行うには、ポリシー定義を割り当てるときに、さまざまな値を渡します。 たとえば、サブスクリプションに対して一連の場所を指定します。

パラメーターは、ポリシー定義を作成するときに定義/作成します。 パラメーターを定義するときは、名前と、必要に応じて値を指定します。 たとえば、"*場所*" というポリシーのパラメーターを定義できます。 その後、ポリシーを割り当てるときに、*EastUS*、*WestUS* など、さまざまな値を指定できます。

<!--
Next link should point to new Concept page for Parameters
-->
ポリシー パラメーターについて詳しくは、「[リソース ポリシーの概要 - パラメーター](policy-definition.md#parameters)」をご覧ください。

## <a name="initiative-definition"></a>イニシアチブ定義
イニシアチブ定義は、単一の包括的な目標を実現することを目的として調整されたポリシー定義のコレクションです。 イニシアチブ定義により、ポリシー定義の管理と割り当てが簡素化されます。 簡素化するには、一連のポリシーを 1 つのアイテムとしてグループ化します。 たとえば、Azure Security Center で利用可能なすべてのセキュリティ推奨事項を監視することを目的とする、"**Azure Security Center での監視を有効にする**" というタイトルのイニシアチブを作成できます。

このイニシアチブでは、次のようなポリシー定義を作成します。

1. **暗号化されていない SQL Database を Security Center で監視する** – 暗号化されていない SQL データベースとサーバーを監視します。
2. **OS の脆弱性を Security Center で監視する** – 構成されているベースラインを満たしていないサーバーを監視します。
3. **不足している Endpoint Protection を Security Center で監視する** – Endpoint Protection エージェントがインストールされていないサーバーを監視します。

<!--
For more information about initiative definitions, see Initiative Definitions.+ (instead of linking to this, link out to Concept page on Initiative Definitions)
-->

## <a name="initiative-assignment"></a>イニシアチブ割り当て
ポリシー割り当てと同様に、イニシアチブ割り当ては特定のスコープに割り当てられたイニシアチブの定義です。 イニシアチブを割り当てると、スコープごとに複数のイニシアチブを割り当てる必要性が低下します。 このスコープは、管理グループからリソース グループの範囲になる可能性があります。

前の例の **Azure Security Center での監視を有効にする**イニシアチブを、異なるスコープに割り当てることができます。 たとえば、ある割り当てを **subscriptionA** に割り当てることができます。 別の割り当てを **subscriptionB** に割り当てることができます。

## <a name="initiative-parameters"></a>イニシアチブ パラメーター
ポリシー パラメーターと同様に、イニシアチブ パラメーターは冗長性を減らすことでイニシアチブの管理を簡素化できます。 イニシアチブ パラメーターは、基本的に、イニシアチブ内のポリシー定義によって使われるパラメーターのリストです。

たとえば、2 つのポリシー定義を含むイニシアチブ定義 **initiativeC** のシナリオについて考えます。 各ポリシー定義では 1 つのパラメーターが定義されています。

| ポリシー | パラメーターの名前 |パラメーターの型  |注 |
|---|---|---|---|
| policyA | allowedLocations | array  |このパラメーターは、パラメーターの型が配列として定義されているため、文字列のリストが値として必要です。 |
| policyB | allowedSingleLocation |文字列 |このパラメーターは、パラメーターの型が文字列として定義されているため、1 つの単語が値として必要です。 |

このシナリオで **initiativeC** のイニシアチブ パラメーターを定義する場合、3 つのオプションがあります。

1. このイニシアチブのポリシー定義のパラメーターを利用します。この例では、*allowedLocations* と *allowedSingleLocation* が **initiativeC** のイニシアチブ パラメーターになります。
2. このイニシアチブ定義内でポリシー定義のパラメーターに値を指定します。 この例では、**policyA のパラメーター – allowedLocations** および **policyB のパラメーター – allowedSingleLocation** に場所のリストを提供できます。
このイニシアチブを割り当てるときに値を指定することもできます。
3. このイニシアチブを割り当てるときに使うことができる "*値*" オプションのリストを指定します。 このイニシアチブを割り当てるときは、イニシアチブ内のポリシー定義から継承したパラメーターは、この指定されたリストの値だけを持つことができます。

たとえば、*EastUS*、*WestUS*、*CentralUS*、および *WestEurope* を含むイニシアチブ定義で、値オプションのリストを作成する場合があります。 この場合、"*東南アジア*" などの異なる値はリストに含まれないので、イニシアチブ割り当てで入力できません。

## <a name="recommendations-for-managing-policies"></a>ポリシー管理に関する推奨事項

ポリシーの定義と割り当てを作成および管理するときは、以下の点に注意することをお勧めします。

- 環境でポリシー定義を作成する場合、最初は、拒否効果ではなく監査効果を定義して、環境のリソースでのポリシー定義の影響を追跡することをお勧めします。 アプリケーションを自動スケールアップするスクリプトが既にある場合、拒否効果を設定すると、このような自動化タスクが妨げられる場合があります。
- 定義と割り当てを作成するときは、組織階層に留意することが重要です。 高いレベルで定義を作成し (たとえば、管理グループやサブスクリプションのレベル)、次の子レベルに割り当てることをお勧めします。 たとえば、管理グループ レベルでポリシー定義を作成した場合、その定義のポリシー割り当てでは、管理グループ内のサブスクリプション レベルを対象にできます。
- 環境のコンプライアンスの状態をよりよく理解するため、Standard 価格レベルを使うことをお勧めします。 Microsoft の価格モデルと各サービスの詳細については、[価格](https://azure.microsoft.com/pricing/details/azure-policy)に関するページをご覧ください。
- 考えているポリシーが 1 つだけの場合でも、ポリシー定義ではなくイニシアチブ定義を常に使うことをお勧めします。 たとえば、ポリシー定義 *policyDefA* をイニシアチブ定義 *initiativeDefC* の下に作成すると、*policyDefA* と同じような目標を持つ *policyDefB* の別のポリシー定義を後で作成する場合、それを *initiativeDefC* の下に追加して適切に追跡できます。

   イニシアチブ定義からイニシアチブ割り当てを作成した場合、そのイニシアチブ定義に追加される新しいポリシー定義はすべて、そのイニシアチブ定義のイニシアチブ割り当てに自動的にまとめられることに注意してください。 ただし、新しいポリシー定義に新しいパラメーターを追加する場合は、イニシアチブの定義または割り当てを編集して、これを更新する必要があります。

## <a name="next-steps"></a>次の手順

Azure Policy の概要と主要な概念がわかったので、次に以下の記事を読むことをお勧めします。

- [ポリシー定義を割り当てる](./assign-policy-definition.md)
- [Azure CLI を使用してポリシー定義を割り当てる](./assign-policy-definition-cli.md)
- [PowerShell を使用してポリシー定義を割り当てる](./assign-policy-definition-ps.md)
