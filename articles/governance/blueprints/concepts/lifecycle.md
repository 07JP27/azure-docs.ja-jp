---
title: Azure Blueprint のライフサイクルの概要
description: ブループリントが経過するライフサイクルと各ステージの詳細について説明します。
services: blueprints
author: DCtheGeek
ms.author: dacoulte
ms.date: 09/18/2018
ms.topic: conceptual
ms.service: blueprints
manager: carmonm
ms.openlocfilehash: e0790168a8b9590aaa440a04cd99f26c2ece2818
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2018
ms.locfileid: "46991541"
---
# <a name="understand-the-life-cycle-of-an-azure-blueprint"></a>Azure Blueprint のライフサイクルの概要

Azure 内の多くのリソースと同じように、Azure Blueprint のブループリントにも一般的で自然なライフサイクルがあります。 ブループリントは、作成され、展開されて、必要性や関連性がなくなったら最終的に削除されます。
Blueprint は、従来の CRUD (作成/読み取り/更新/削除) のライフサイクル操作をサポートしますが、コードでインフラストラクチャを管理するユーザーが使用するための一般的な継続的インテグレーション/継続的配置 (CI/CD) パイプラインをサポートする追加の状態レベルも提供されています。これは、DevOps での主要な要素であり、コードとしてのインフラストラクチャ (IaC) と呼ばれます。

ブループリントとステージを完全に理解できるように、標準的なライフサイクルについて説明します。

> [!div class="checklist"]
> - ブループリントの作成と編集
> - ブループリントの発行
> - 新しいバージョンのブループリントの作成と編集
> - 新しいバージョンのブループリントの発行
> - 特定のバージョンのブループリントの削除
> - ブループリントの削除

## <a name="creating-and-editing-a-blueprint"></a>ブループリントの作成と編集

ブループリントを作成するときは、成果物を追加し、管理グループに保存し、一意の名前と一意のバージョンを指定します。 この時点では、ブループリントは**ドラフト** モードであり、まだ割り当てることはできません。 ただし、**ドラフト** モードの間でも、更新と変更を続けることはできます。

発行されていない**ドラフト** モードのブループリントには、**[ブループリントの定義]** ページで、**発行済み**のブループリントとは異なるアイコンが表示されます。 これらの未発行ブループリントについては、**[最新バージョン]** も **[ドラフト]** と表示されます。

ブループリントを作成および編集するには、[Azure portal](../create-blueprint-portal.md#create-a-blueprint) または [REST API](../create-blueprint-rest-api.md#create-a-blueprint) を使用します。

## <a name="publishing-a-blueprint"></a>ブループリントの発行

**ドラフト** モードのブループリントに対して必要な変更をすべて行った後は、**発行**して割り当て可能にできます。 **発行済み**バージョンのブループリントを変更することはできません。
**発行済み**のブループリントに対しては、**ドラフト**のブループリントと異なるアイコンが表示され、**[最新バージョン]** 列に指定されたバージョン番号が表示されます。

ブループリントを発行するには、[Azure portal](../create-blueprint-portal.md#publish-a-blueprint) または [REST API](../create-blueprint-rest-api.md#publish-a-blueprint) を使用します。

## <a name="creating-and-editing-a-new-version-of-the-blueprint"></a>新しいバージョンのブループリントの作成と編集

**発行済み**バージョンのブループリントを変更することはできませんが、新しいバージョンのブループリントを既存のブループリントに追加し、必要に応じて変更できます。 これは、既存のブループリントを変更することによって行います。 ブループリントが既に**発行済み**の場合、これらの変更を保存すると、ブループリントの定義の一覧に **[発行されていない変更]** と表示されます。 変更を保存すると、**ドラフト** バージョンのブループリントが保存されます。

ブループリントを編集するには、[Azure portal](../create-blueprint-portal.md#edit-a-blueprint) を使用します。

## <a name="publishing-a-new-version-of-the-blueprint"></a>新しいバージョンのブループリントの発行

最初のバージョンのブループリントを割り当てるために**発行**したのと同じように、同じブループリントの各後続バージョンも割り当てるには先に**発行する**必要があります。 **発行されていない変更**があるブループリントがまだ**発行**されていない場合、ブループリント編集ページの **[ブループリントを発行する]** ボタンを使用できます。 このボタンが表示されていない場合、そのブループリントは既に**発行済み**で**発行されていない変更**はありません。

> [!NOTE]
> 1 つのブループリントに対して複数の**発行済み**バージョンを作成でき、それぞれをサブスクリプションに割り当てることができます。

**発行されていない変更**があるブループリントを既存ブループリントの新しいバージョンとして発行する手順は、新しいブループリントを発行する手順と同じです。

## <a name="deleting-a-specific-version-of-the-blueprint"></a>特定のバージョンのブループリントの削除

ブループリントの各バージョンは一意のオブジェクトであり、個別に**発行**できます。 これは、ブループリントをバージョンごとに削除できることも意味します。 ブループリントのあるバージョンを削除しても、そのブループリントの他のバージョンには影響ありません。

> [!NOTE]
> アクティブな割り当てがあるブルー プリントを削除することはできません。 最初に割り当てを削除してから、バージョンを削除する必要があります。

1. Azure portal で **[すべてのサービス]** をクリックし、左側のウィンドウで「**ポリシー**」を検索して選択することで、Azure Blueprint サービスを起動します。 **[ポリシー]** ページで **[ブループリント]** をクリックします。

1. 左側のページで **[ブループリントの定義]** を選択し、フィルター オプションを使用してバージョンを削除するブループリントを検索します。 それをクリックして編集ページを開きます。

1. **[公開済みバージョン]** タブをクリックし、削除するバージョンを探します。

1. 削除するバージョンを右クリックして、**[このバージョンを削除する]** を選択します。

## <a name="deleting-the-blueprint"></a>ブループリントの削除

コア ブループリントも削除できます。 コア ブループリントを削除すると、状態が**ドラフト**か**発行済み**かに関係なく、そのブループリントのすべてのバージョンも削除されます。 ブループリントのバージョンの削除と同じように、コア ブループリントを削除しても、すべてのブループリント バージョンの既存の割り当ては削除されません。

> [!NOTE]
> アクティブな割り当てがあるブルー プリントを削除することはできません。 最初に割り当てを削除してから、バージョンを削除する必要があります。

ブループリントを削除するには、[Azure portal](../create-blueprint-portal.md#delete-a-blueprint) または [REST API](../create-blueprint-rest-api.md#delete-a-blueprint) を使用します。

## <a name="assignments"></a>割り当て

ライフサイクルの間に、ブループリントをサブスクリプションに割り当てることができるポイントがいくつかあります。
ブループリントのバージョンのモードが**発行済み**のときは常に、そのバージョンをサブスクリプションに割り当てることができます。 ブループリントに**ドラフト** バージョンがある場合でも、**発行済み**モードのブループリント バージョンが 1 つでもあれば、**発行済み**の各バージョンを割り当てることができます。 これにより、新しいバージョンの開発中であっても、ブループリントのバージョンを使用してアクティブに割り当てられます。

ブループリントのバージョンが割り当てられるので、どこで割り当てられており、どのパラメーターが割り当てられているのかを理解しておくことが重要です。 パラメーターは静的または動的にできます。 詳しくは、[静的および動的パラメーター](parameters.md)に関するページをご覧ください。

### <a name="updating-assignments"></a>割り当ての更新

ブループリントが割り当てられたら、割り当てを更新できます。 既存の割り当てを更新する理由は次のとおりです。

- [リソース ロック](resource-locking.md)を追加または削除する
- [動的パラメーター](parameters.md#dynamic-parameters)の値を変更する
- 割り当てを、ブループリントの新しい**発行済み**バージョンにアップグレードする

方法については、[既存の割り当ての更新](../how-to/update-existing-assignments.md)に関するページをご覧ください。

## <a name="next-steps"></a>次の手順

- [静的および動的パラメーター](parameters.md)の使用方法を理解する
- [ブループリントの優先順位](sequencing-order.md)のカスタマイズを参照する
- [ブループリントのリソース ロック](resource-locking.md)の使用方法を調べる
- [既存の割り当ての更新](../how-to/update-existing-assignments.md)方法を参照する
- ブループリントの割り当て時の問題を[一般的なトラブルシューティング](../troubleshoot/general.md)で解決する