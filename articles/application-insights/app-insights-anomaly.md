<properties 
	pageTitle="Application Insights: プロアクティブな異常検出" 
	description="Application Insights は、アプリの製品利用統計情報の詳細な分析を実行し、潜在的なパフォーマンスの問題について警告します。" 
	services="application-insights" 
    documentationCenter="windows"
	authors="alancameronwills" 
	manager="douge"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="11/02/2015" 
	ms.author="awills"/>

#  Application Insights: プロアクティブなアラート

*Application Insights はプレビュー段階です。*


Application Insights は、アプリの製品利用統計情報について詳細に分析し、潜在的なパフォーマンスの問題について警告できます。この記事は、プロアクティブなアラートをメールで受信されたユーザーを主に想定しています。

## プロアクティブなアラートについて

* *このアラートを受け取った理由*
 * Application Insights は、定期的にパターン認識ルールを使用してデータを分析します。アプリケーションにパフォーマンスの問題があることを示している異常を検索します。
* *この通知は、明らかに問題があることを意味していますか。*
 * いいえ。これは単に、より詳しく確認することを推奨するものです。 
* *どうすればよいですか。*
 * [表示されるデータを見て](#responding-to-an-alert)、問題を表しているかどうかを確認してください。問題ない場合は、何もする必要はありません。
* *私のデータはマイクロソフトからも見られるのですか。*
 * いいえ。サービスは完全に自動化されています。通知を受け取るだけです。ユーザーのデータは[プライベート](app-insights-data-retention-privacy.md)です。


## 検出プロセス

* *どのような異常が検出されますか。*
 * ユーザーご自身で確認するには時間がかかるようなパターンが検出されます。たとえば、場所、時刻、プラットフォームといった特定の組み合わせにおけるパフォーマンスの低下などです。
* *独自の異常検出ルールを作成できますか。*
 * まだありません。ただし、次のことができます。
 * メトリックがしきい値を超えた場合の[アラートをセットアップ](app-insights-alerts.md)する。
 * [テレメトリ](app-insights-export-telemetry.md)を[データベース](app-insights-code-sample-export-sql-stream-analytics.md)、[PowerBI](app-insights-export-power-bi.md)、または[その他の](app-insights-code-sample-export-telemetry-sql-database.md)ツールにエクスポートする。そうすることで、テレメトリを自分で分析できます。
* *どのくらいの頻度で分析は実行されますか。*
 * 製品利用統計情報をあまり取得しないアプリ リソースでは分析を実行しません。デバッグ セッションについての警告が表示されることはあまりありません。


## アラートへの応答

異常レポートは、メールまたは異常リストから開きます。

![](./media/app-insights-anomaly/02.png)

注意事項:

* 説明
* ユーザーが影響を受ける回数と頻度を示す、IMPACT ステートメント。

グラフをクリックし、より詳しい説明が含まれるブレードを開きます。

時間の範囲とフィルターを変更して、製品利用統計情報を調べます。

## これらのアラートを取得するのに適しています。しかし、パフォーマンスを向上させるにはどうすればよいでしょうか。

Web サイト ユーザーにとって最大の不満の 1 つは、自らの経験でわかるように、時間のかかる応答や応答障害です。したがって、この問題に対処することが重要です。

### トリアージ

まず、それは重要なことですか。 ページの読み込みには常に時間がかかるが、そのページの閲覧を必要としているユーザーが 1 % にすぎない場合は、多分、他にもっと考えるべき重要なことがあります。一方、ユーザーの 1% しかそのページを開いていないが、毎回例外がスローされる場合、調べてみる価値はあるでしょう。

一般的なガイドラインとして、電子メールで IMPACT ステートメントを使用します。ただし、それがすべてではありません。確認すべきその他の証拠を収集します。

問題のパラメーターを検討します。地理的な場所によって状況が異なる場合は、該当するリージョンを対象とする[可用性テスト](app-insights-monitor-web-app-availability.md)をセットアップします。単にそのエリアのネットワークの問題かもしれません。

### 遅いページ読み込みの診断 

どこに問題がありますか。 サーバーは応答するのに時間がかかりますか。ページはかなり長いですか。ページを表示するのにブラウザーは多くの処理を必要としますか。

ブラウザーのメトリック ブレードを開きます。[ブラウザーのページ読み込み時間のセグメント表示](app-insights-javascript.md#explore-your-data)で、どこで時間がかかっているかがわかります。

* **[要求送信時間]** の値が大きい場合は、サーバーの応答に時間がかかっているか、または要求は大量のデータを伴う POST 要求です。応答時間を調べるには、[パフォーマンス メトリック](app-insights-web-monitor-performance.md#metrics)を確認します。 
* [依存関係の追跡](app-insights-dependencies.md)をセットアップして、パフォーマンス低下の原因が外部のサービスによるものか、内部のデータベースによるものかを確認します。
* **[受信応答時間]** が大部分を占めている場合は、ページと、JavaScript、CSS、イメージなどのページの依存部分 (ただし、非同期で読み込まれるデータではない) が長くなっています。[可用性テスト](app-insights-monitor-web-app-availability.md)をセットアップして、依存部分を読み込むためのオプションを確実に設定します。いくつかの結果を取得したら、結果の詳細を開き展開して、各種ファイルの読み込み時間を表示します。
* **[クライアントの処理時間]** の値が大きい場合は、スクリプトの実行に時間がかかっています。理由が明らかでない場合は、何らかのタイミング コードを追加することを検討し、trackMetric 呼び出しで時間を送信してください。

### 表示が遅いページの改善

サーバーの応答およびページ読み込み時間を短縮するためのアドバイスは Web に多数掲載されていますが、ここではその一部を取り上げます。把握済みかもしれませんがいくつかのヒントを参考までに以下に示します。

* ファイルのサイズが大きいため読み込みに時間がかかる: スクリプトとその他の部分を非同期に読み込みます。スクリプトのバンドルを使用します。メイン ページをウィジェットに分割し、データを別々に読み込みます。長いテーブルに対して古いプレーンな HTML が送信されない: スクリプトを使用してデータを JSON またはその他のコンパクトな形式で要求し、所定のテーブルに入力します。このようなすべてにおいて有効な優れたフレームワークがあります (これらはまた、当然ながら、大きなスクリプトを伴います)。
* サーバーの依存関係が低速: コンポーネントの地理的な場所について検討してください。たとえば、Azure を使用している場合、Web サーバーとデータベースが同じリージョンにあることを確認します。クエリで必要以上の情報が取得されませんか。 キャッシュまたはバッチは役に立ちますか。
* 容量の問題: 応答時間と要求数のサーバー メトリックを確認してください。応答時間のピークと要求数のピークが合わない場合は、サーバーが拡大されている可能性があります。 


## 通知メール

* *通知を受信するために、このサービスに登録する必要はありますか。*
 * いいえ。ボットは定期的に Application Insights を使用するすべてのユーザーからのデータを調査し、問題を検出した場合に通知を送信します。
* *登録を解除できますか。または、代わりに同僚に通知が送信されるように設定できますか。*
 * アラートやメールのリンクをクリックします。異常設定を開きます。
 
    ![](./media/app-insights-anomaly/01.png)

    現在、通知は [Application Insights リソースへの書き込みアクセス権](app-insights-resources-roles-access-control.md)のあるユーザーに送信されます。
* *メッセージで受信ボックスをいっぱいにしたくありません。*
 * 1 日 3 通までに制限されています。どのメッセージも繰り返し送信されることはありません。
* *通知に対して何もしない場合、リマインダが送信されますか。*
 * いいえ。各問題についてのメッセージが送信されるのは 1 回のみです。
* *メールが消えました。どうしたらポータルで通知を見つけられますか。*
 * アプリの Application Insights の概要で、**[異常]**タイルをクリックします。 






 

<!---HONumber=Nov15_HO2-->