<properties 
	pageTitle="Application Insights のアラートの設定" 
	description="クラッシュ、例外、メトリックの変化に関して電子メールを受け取ります。" 
	services="application-insights" 
    documentationCenter=""
	authors="alancameronwills" 
	manager="douge"/>

<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="02/19/2016" 
	ms.author="awills"/>
 
# Application Insights のアラートの設定

[Visual Studio Application Insights][start] は、アプリケーションのパフォーマンスまたは使用状況のメトリックの変化についてアラートを発行できます。

Application Insights は、[さまざまなプラットフォーム][platforms]で実行中のアプリケーションを監視して、パフォーマンスの問題の診断と使用パターンの把握を支援します。

次の 2 つの種類のアラートがあります。
 
* **Web テスト** は、サイトがインターネットで使用できなくなったとき、または応答速度が低下したときに通知します。[詳細情報][availability]
* **メトリック アラート**は、メトリックが、一定の期間に、エラー数、メモリ、ページ ビューなどのしきい値を超えた場合に通知します。 

[Web テストに関する別のページ][availability]があるため、ここではメトリック アラートのみが表示されます。

> [AZURE.NOTE] また、[プロアクティブな検出](app-insights-proactive-detection.md)から、アプリのパフォーマンスの異常なパターンを警告する電子メールを受信する場合があります。アラートとは異なり、これらの通知は設定しなくても実行されます。これらは当面の問題に関する警告を発するよりも、アプリのパフォーマンスの調整を目的としています。

## メトリック アラート

アプリケーションに対して Application Insights を設定していない場合は、[最初に設定を行います][start]。

メトリックがしきい値を超えたときに電子メールを受け取るには、メトリックス エクスプローラーまたは [概要] ブレードのアラート ルール タイルのいずれかから設定を始めます。

![[アラート ルール] ブレードで、[アラートの追加] をクリックします。測定するリソースとしてアプリケーションを設定し、アラートの名前を指定し、メトリックを選択します。](./media/app-insights-alerts/01-set-metric.png)

その他のプロパティの前に、リソースを設定します。パフォーマンスまたは使用状況のメトリックにアラートを設定する場合は、**「(コンポーネント)」のリソースを選択**します。

しきい値を入力するように求められたら、単位に注意してください。

アラートに付ける名前は、リソース グループ内で (アプリケーション内だけでなく) 一意である必要があります。

*[アラートの追加] ボタンが表示されない場合は、*組織アカウントを使用していることを確認してください。 所有者または投稿者が、アプリケーションのリソースにアクセスする場合に、アラートを設定できます。[設定] -> [ユーザー] を表示します。[アクセス制御の詳細情報][roles]。

## アラートの表示

アラートの状態が非アクティブとアクティブとの間で変化すると、メールが送信されます。

[アラート ルール] ブレードに、各アラートの現在の状態が表示されます。

アラート ボックスの一覧には、最近のアクティビティの概要が表示されます。

![](./media/app-insights-alerts/010-alert-drop.png)

状態の変更履歴は、操作イベント ログにも表示されます。

![下部付近の [概要] ブレードで、[過去 1 週間のイベント] をクリックします。](./media/app-insights-alerts/09-alerts.png)

*これらの「イベント」は、利用統計情報イベントまたはカスタム イベントに関係しますか。*

* いいえ。これらの操作イベントは、このアプリケーション リソースに対する操作のみの記録です。 


## アラートのしくみ

* アラートには、"警告" と "正常" の 2 つの状態があります。 

* アラートの状態が変わると、電子メールが送信されます。

* アラートはメトリックが到着するたびに評価されますが、それ以外は評価されません。

* 評価では、前の期間にメトリックが集計され、これをしきい値と比較して新しい状態が決定されます。

* 選択した期間によって、メトリックが集計される間隔が指定されます。これはアラートが評価される頻度には影響しません。アラートの評価の頻度は、メトリックの到着の頻度に左右されます。

* しばらくの間、特定のメトリックのデータが到着しない場合、このギャップはアラートの評価とメトリック エクスプローラーのグラフにさまざまな影響を及ぼします。メトリック エクスプローラーでは、グラフのサンプリング間隔よりも長い期間データがない場合、グラフには値 0 が表示されます。ただし、同じメトリックに基づくアラートは再評価されないので、アラートの状態が変わることはありません。

    データが最終的に到着すると、グラフは 0 以外の値に戻ります。アラートでは、指定した期間に使用できるデータに基づいて評価が行われます。その期間に使用できる新しいデータ ポイントが 1 つしかない場合、集計はそのデータ ポイントだけに基づきます。

* 長い期間を設定した場合でも、アラートの状態 (警告状態と正常状態) 遷移が頻繁に発生する場合があります。これは、メトリック値がしきい値付近で変動している場合に発生する可能性があります。しきい値にヒステリシスありません。警告状態への切り替えは正常状態への切り替えと同じ値で発生します。



## 可用性のアラート

世界中の場所から任意の Web サイトをテストする Web テストを設定できます。[詳細情報][availability]。

## どのようなアラートを設定するのが適切でしょうか。

これは、アプリケーションごとに異なります。第一に、多数のメトリックを設定しないことをお勧めします。通常の動作を把握するために、アプリケーションの実行中に、しばらくの間、メトリックのグラフを観察してください。これは、パフォーマンスを向上させる方法を見つけるために役立ちます。次に、メトリックが標準ゾーンを超えた場合に通知するアラートを設定します。

次のような一般的なアラートがあります。

* [Web テスト][availability]は、アプリケーションが公共のインターネットに表示される Web サイトまたは Web サービスの場合に重要です。このテストは、アプリケーションの問題ではなく、通信事業者の問題である場合でも、サイトがダウンするか、応答速度が低下した場合に通知します。ただし、これは代理テストであるため、ユーザーの実際のエクスペリエンスは測定されません。
* [ブラウザー メトリック][client]、特にブラウザー **ページの読み込み時間**は、Web アプリケーションに適しています。ページに多数のスクリプトがある場合は、**ブラウザーの例外**に注意する必要が生じます。これらのメトリックとアラートを取得するには、[Web ページの監視][client]を設定する必要があります。
* **サーバー応答時間**と、Web アプリケーションのサーバー側の**失敗した要求**。アラートの設定に加えて、これらのメトリックを監視して、高い要求レートでメトリックが過度に変動するかどうかを確認します。これは、アプリケーションでのリソースの不足を示している可能性があります。
* **サーバー例外** - サーバー例外を表示するには、[追加のセットアップ](app-insights-asp-net-exceptions.md)を実行する必要があります。

## Automation

* [PowerShell を使用したアラートの設定の自動化](app-insights-powershell-alerts.md)
* [Webhook を使用したアラートへの対応の自動化](../azure-portal/insights-webhooks-alerts.md)

## 関連項目

* [可用性 Web テスト](app-insights-monitor-web-app-availability.md)
* [アラートの設定の自動化](app-insights-powershell-alerts.md)
* [プロアクティブな検出](app-insights-proactive-detection.md) 



<!--Link references-->

[availability]: app-insights-monitor-web-app-availability.md
[client]: app-insights-javascript.md
[platforms]: app-insights-platforms.md
[roles]: app-insights-resources-roles-access-control.md
[start]: app-insights-overview.md

 

<!---HONumber=AcomDC_0224_2016-->