<properties 
	 pageTitle="カスタム ドメインにコンテンツ配信ネットワーク (CDN) コンテンツをマップする方法" 
	 description="このトピックでは、CDN コンテンツをカスタム ドメインにマップする方法を示します。" 
	 services="cdn" 
	 documentationCenter="" 
	 authors="zhangmanling" 
	 manager="dwrede" 
	 editor=""/>
<tags 
	 ms.service="cdn" 
	 ms.workload="media" 
	 ms.tgt_pltfrm="na" 
	 ms.devlang="na" 
	 ms.topic="article" 
	 ms.date="03/05/2015" 
	 ms.author="mazha"/>

#Content Delivery Network (CDN) エンドポイントにカスタム ドメインをマップする方法

カスタム ドメインを CDN エンドポイントにマッピングすると、提供される CDN エンドポイントを使用せずに、キャッシュ済みコンテンツへの URL に独自のドメイン名を使用することができます。 

カスタム ドメインを CDN エンドポイントにマッピングするには、次の 2 つの方法があります。 

1. **ドメイン レジストラーで CNAME レコードを作成し、カスタム ドメインおよびサブドメインを CDN エンドポイントにマップする** 
	
	CNAME レコードは、ソース ドメインを目的のドメインにマッピングする DNS 機能です。この場合、ソース ドメインは、カスタム ドメインおよびサブドメインです (サブドメインは常に必要です)。宛先ドメインは、使用する CDN エンドポイントです。  

	ただし、カスタム ドメインを CDN エンドポイントにマッピングする処理によって、Azure の管理ポータルでのドメインの登録中にドメインが短時間ダウンする場合があります。 
2. **Azure cdnverify で中継登録手順を追加する**

	カスタム ドメインが現在、ダウンタイムが発生しないことを要求するサービス レベル アグリーメント (SLA) のアプリケーションをサポートしている場合は、DNS マッピングの実行中にユーザーがドメインにアクセスできるように、Azure **cdnverify** サブドメインを使用して中間登録ステップを提供できます。  

> AZURE.NOTE   
> 
-	ドメインを CDN エンドポイントにマッピングするには、ドメイン レジストラーで CNAME レコードを作成する必要があります。CNAME レコードは、www.mydomain.com や myblog.mydomain.com などの特定のサブドメインをマップします。CNAME レコードを mydomain.com などのルート ドメインにマップすることはできません。
-	サブドメインは 1 つの CDN エンドポイントのみに関連付けできます。CNAME レコードを作成することで、サブドメイン宛てのすべてのトラフィックが指定されたエンドポイントにルーティングされます。たとえば、www.mydomain.com を CDN エンドポイントに関連付けた場合、ストレージ アカウント エンドポイントやクラウド サービス エンドポイントなど、他の Azure のエンドポイントに関連付けることはできません。ただし、同じドメインの別のサブドメインを別のサービス エンドポイントに使用することはできます。また、複数のサブドメインを同じ CDN エンドポイントにマップすることもできます。

このトピックの手順では、次の方法について説明します。    

-	[Azure CDN エンドポイント用のカスタム ドメインの登録](#subheading1)
-	[中継 cdnverify サブドメインを使用した Azure CDN エンドポイント用のカスタム ドメインの登録](#subheading2)
-	[カスタム サブドメインが CDN エンドポイントを参照していることの確認](#subheading3) 

##<a name="subheading1"></a>Azure CDN エンドポイント用のカスタム ドメインの登録

1.	[Azure の管理ポータル](http://manage.windowsazure.com/)にログインします。
2.	ナビゲーション ウィンドウで **[CDN]** をクリックします。
3.	リスト ビューで、サブドメインを関連付ける CDN エンドポイントの名前をクリックして、そのエンドポイントの詳細ページに移動します。
4.	リボンの **[ドメインの管理]** をクリックして **[カスタム ドメインの管理]** ダイアログ ボックスを開きます。ダイアログ ボックスに CDN エンドポイントから派生したホスト名が表示されます。このホスト名を使用して新しい CNAME レコードを作成します。ホスト名のアドレスの形式は、**az#####.vo.msecnd.net** です (a**z#####** は使用する CDN エンドポイントの識別子です)。このホスト名をコピーして、CNAME レコードの作成に使用できます。  
この手順では、**cdnverify** サブドメインを参照するテキストは無視します。
5.	ドメイン レジストラーの Web サイトに移動して、DNS レコードを作成するセクションを探します。これは、"**ドメイン名**"、"**DNS**"、"**ネーム サーバー管理**" などのセクションにあります。
6.	CNAME 管理セクションを見つけます。詳細設定ページに進み、"CNAME"、"エイリアス"、"サブドメイン" などの語句を探します。
7.	選択したサブドメイン (**www**、**cdn** など) を **[カスタム ドメインの管理]** ダイアログ ボックスに表示されたホスト名にマップする新しい CNAME レコードを作成します。
8.	**[カスタム ドメインの管理]** ダイアログ ボックスに戻り、サブドメインを含むカスタム ドメインをダイアログ ボックスに入力します。たとえば、ドメイン名は www.mydomain.com や cdn.mydomain.com の形式で入力します。   

	入力したドメイン名に対する CNAME レコードが存在するかどうかが Azure によって確認されます。CNAME が正しければ、カスタム ドメインが検証され、CDN コンテンツで用できるようになります。  

	CNAME レコードがインターネット上のネーム サーバーに反映されるまでに時間がかかる場合があります。入力した CNAME レコードが正しいのにドメインがすぐに検証されない場合は、数分間待ってからやり直してください。

##<a name="subheading2"></a>中継 cdnverify サブドメインを使用した Azure CDN エンドポイント用のカスタム ドメインの登録  


1.	[Azure の管理ポータル](http://manage.windowsazure.com/)にログインします。
2.	ナビゲーション ウィンドウで **[CDN]** をクリックします。
3.	リスト ビューで、サブドメインを関連付ける CDN エンドポイントの名前をクリックして、そのエンドポイントの詳細ページに移動します。
4.	リボンの **[ドメインの管理]** をクリックして **[カスタム ドメインの管理]** ダイアログ ボックスを開きます。ダイアログ ボックスに CDN エンドポイントから派生したホスト名が表示されます。このホスト名と **cdnverify** 中継サブドメインを使用して新しい CNAME レコードを作成します。ホスト名のアドレスの形式は、**cdnverify.az#####.vo.msecnd.net** です。このホスト名をコピーして、CNAME レコードの作成に使用できます。
5.	ドメイン レジストラーの Web サイトに移動して、DNS レコードを作成するセクションを探します。これは、"**ドメイン名**"、"**DNS**"、"**ネーム サーバー管理**" などのセクションにあります。
6.	CNAME 管理セクションを見つけます。詳細設定ページに進み、"**CNAME**"、"**エイリアス**"、"**サブドメイン**" などの語句を探します。
7.	新しい CNAME レコードを作成し、**cdnverify** サブドメインを含むサブドメインの別名を指定します。たとえば、**cdnverify.www** や **cdnverify.cdn** の形式でサブドメインを指定します。次に、CDN エンドポイントであるホスト名を **cdnverify.az#####.vo.msecnd.net** の形式で指定します (**az#####** は使用する CDN エンドポイントの識別子です)。ホスト名の形式は、**[カスタム ドメインの管理]** ダイアログ ボックスに表示されます。
8.	**[カスタム ドメインの管理]** ダイアログ ボックスに戻り、サブドメインを含むカスタム ドメインをダイアログ ボックスに入力します。たとえば、ドメイン名は **www.mydomain.com** や **cdn.mydomain.com** の形式で入力します。この段階では、サブドメインの前に **cdnverify** を付ける必要はありません。  

	入力した cdnverify ドメイン名に対する CNAME レコードが存在するかどうかが Azure によって確認されます。
9.	この時点で Azure によってカスタム ドメインが検証されますが、ドメインへのトラフィックは CDN エンドポイントにまだルーティングされません。プロセスを完了するには、DNS レジストラーの Web サイトに戻って、サブドメインを CDN エンドポイントにマップする別の CNAME レコードを作成します。たとえば、サブドメインに **www** や **cdn** を指定し、ホスト名に **az#####.vo.msecnd.net** を指定します。この手順で、カスタム ドメインの登録が完了します。 
10.	**cdnverify** を使用して作成した CNAME レコードは中継手順としてのみ必要でした。最後に CNAME レコードを削除してかまいません。  


##<a name="subheading3"></a>カスタム サブドメインが CDN エンドポイントを参照していることの確認

-	使用するカスタム ドメインの登録が完了したら、そのカスタム ドメインを使用して、CDN エンドポイントにキャッシュされているコンテンツにアクセスできます。
まず、エンドポイントにキャッシュされているパブリック コンテンツがあることを確認します。たとえば、CDN エンドポイントがストレージ アカウントに関連付けられている場合は、CDN はパブリック BLOB コンテナーにコンテンツをキャッシュします。カスタム ドメインをテストするには、コンテナーでパブリック アクセスが許可され、少なくとも 1 つの BLOB がコンテナーに格納されていることを確認します。
-	ブラウザーでカスタム ドメインを使用して BLOB のアドレスに移動します。カスタム ドメインが **www.mydomain.com** の場合は、キャッシュされた BLOB の URL は次のようになります。  
	
		http://www.mydomain.com/mypubliccontainer/acachedblob.jpg
-	CDN エンドポイントがクラウド サービスに関連付けられている場合は、キャッシュされたコンテンツの URL は次のようになります。

		http://www.mydomain.com/cdn/mycloudservice

#関連項目


[Azure の Content Delivery Network (CDN) を有効にする方法](cdn-create-new-endpoint.md)  
**Azure CDN の概要**


<!--HONumber=49--> 