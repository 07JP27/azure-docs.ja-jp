---
title: Azure Site Recovery サービスを使用して、レプリケート済み Azure IaaS VM をディザスター リカバリー用のセカンダリ Azure リージョンにフェールバックする。
description: Azure Site Recovery サービスを使用して Azure VM をフェールバックする方法について説明します。
services: site-recovery
author: sideeksh
manager: rochakm
ms.service: site-recovery
ms.topic: tutorial
ms.date: 03/07/2019
ms.author: sideeksh
ms.custom: mvc
ms.openlocfilehash: d8721f313907f0e0519dca52f5565853f1c44110
ms.sourcegitcommit: 5839af386c5a2ad46aaaeb90a13065ef94e61e74
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/19/2019
ms.locfileid: "58089705"
---
# <a name="fail-back-azure-vms-between-azure-regions"></a>Azure リージョン間で Azure VM をフェールバックする

[Azure Site Recovery](site-recovery-overview.md) サービスは、オンプレミスのマシンと Azure Virtual Machines (VM) のレプリケーション、フェールオーバー、およびフェールバックの管理と調整を行うことでディザスター リカバリー戦略に貢献します。

このチュートリアルでは、単一の Azure VM をフェールバックする方法について説明します。 フェールオーバー後、利用できるようになった時点でプライマリ リージョンにフェールバックします。 このチュートリアルでは、以下の内容を学習します。

> [!div class="checklist"]
> 
> * セカンダリ VM をフェールバックする
> * プライマリ VM をセカンダリ リージョンに再保護する
> 
> [!NOTE]
> 
> このチュートリアルは、ターゲット リージョンへのフェールオーバーとフェールバックを最小限のカスタマイズで行う手順をユーザーに紹介することが目的です。ネットワークの考慮事項、オートメーション、トラブルシューティングなど、フェールオーバーに関する事柄をさまざまな角度から詳しく知りたい場合は、Azure VM の "操作方法" のドキュメントを参照してください。

## <a name="prerequisites"></a>前提条件

> * VM がフェールオーバー コミット済み状態であること、プライマリ リージョンが使用でき、そこに新しいリソースを作成したり、アクセスしたりできることを確認します。
> * 再保護が有効になっていることを確認します。

## <a name="fail-back-to-the-primary-region"></a>プライマリ リージョンにフェールバックする

VM が再保護されたら、必要に応じてプライマリ リージョンにフェールバックできます。

1. Recovery Services コンテナーに移動します。 レプリケートされたアイテムをクリックし、再保護されている VM を選択します。

2. 次のように表示されます。 これは、テスト フェールオーバーおよびプライマリ リージョンからのフェールオーバーに対するブレードに類似しています。
![プライマリへのフェールバック](./media/site-recovery-azure-to-azure-failback/azure-to-azure-failback.png)

3. [テスト フェールオーバー] をクリックして、プライマリ リージョンへのテスト フェールオーバーを実行します。 テスト フェールオーバー用の復旧ポイントと仮想ネットワークを選択し、[OK] を選択します。 アクセスして検査できるプライマリ リージョンにテスト VM が作成されていることを確認できます。

4. テスト フェールオーバーに問題がなければ、[テスト フェールオーバーのクリーンアップ] をクリックして、テスト フェールオーバー用にソース領域に作成されたリソースをクリーンアップできます。

5. [レプリケートされたアイテム] で、フェールオーバーする VM を選択し、[フェールオーバー] を選択します。

6. [フェールオーバー] で、フェールオーバーする復旧ポイントを選択します。 次のいずれかのオプションを使うことができます。
    1. 最新 (既定値):このオプションは、Site Recovery サービスのすべてのデータを処理し、最も低い目標復旧時点 (RPO) を提供します
    2. 最後に処理があった時点:このオプションは、仮想マシンを、Site Recovery サービスによって処理された最新の復旧ポイントに戻します
    3. カスタム:特定の復旧ポイントにフェールオーバーする場合は、このオプションを使用します。 このオプションは、テスト フェールオーバーを実行するときに役立ちます

7. Site Recovery でフェールオーバーを開始する前にそのソース仮想マシンをシャットダウンする場合は、[フェールオーバーを開始する前にマシンをシャットダウンします] を選択します。 仮にシャットダウンが失敗したとしても、フェールオーバーは続行されます。 Site Recovery では、フェールオーバー後にソースがクリーンアップされないことに注意してください。

8. [ジョブ] ページで、フェールオーバーの進行状況を確認します。

9. フェールオーバーの実行後、仮想マシンにログインして検証します。 仮想マシンの復旧ポイントを変更する場合は、[復旧ポイントの変更] オプションを使用します。

10. 正常な状態に仮想マシンがフェールオーバーされたら、フェールオーバーをコミットできます。 コミットすると、サービスで使用可能なすべての復旧ポイントが削除されます。 以降、[復旧ポイントの変更] オプションは使用できなくなります。

![プライマリ リージョンとセカンダリ リージョンの VM](./media/site-recovery-azure-to-azure-failback/azure-to-azure-failback-vm-view.png)

前出のスクリーンショットが表示された場合、"ContosoWin2016" VM は米国中部から米国東部にフェールオーバーされ、米国東部から米国中部にフェールバックされています。

DR VM は、シャットダウン (割り当て解除済み) 状態のままとなることに注意してください。 これは意図的な動作です。Azure Site Recovery は仮想マシンの情報を保存しますが、仮想マシンの情報は、プライマリ リージョンからセカンダリ リージョンへのフェールオーバーで有用な働きをする場合があるためです。 割り当て解除状態の仮想マシンに対して課金されることはないので、そのままにしておいてください。

> [!NOTE]
> 再保護の作業フローと再保護中の動作について詳しくは、["操作手順" のセクション](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-how-to-reprotect#what-happens-during-reprotection)を参照してください。
