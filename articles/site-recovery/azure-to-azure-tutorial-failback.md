---
title: Azure Site Recovery サービスを使用して、ディザスター リカバリー用のセカンダリ Azure リージョンにレプリケート済みの Azure VM をフェールバックする。
description: Azure Site Recovery サービスを使用して Azure VM をフェールバックする方法について説明します。
services: site-recovery
author: rayne-wiselman
manager: carmonm
ms.service: site-recovery
ms.topic: tutorial
ms.date: 03/18/2019
ms.author: raynew
ms.custom: mvc
ms.openlocfilehash: 339cbf18d79053dfb0704d928b8c9251c73b3a6e
ms.sourcegitcommit: 24fd3f9de6c73b01b0cee3bcd587c267898cbbee
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/20/2019
ms.locfileid: "65951789"
---
# <a name="fail-back-an-azure-vm-between-azure-regions"></a>Azure リージョン間で Azure VM をフェールバックする

[Azure Site Recovery](site-recovery-overview.md) サービスは、オンプレミスのマシンと Azure 仮想マシン (VM) のレプリケーション、フェールオーバー、およびフェールバックの管理と調整を行うことでディザスター リカバリー戦略に貢献します。

このチュートリアルでは、単一の Azure VM をフェールバックする方法について説明します。 フェールオーバー後、利用できるようになった時点でプライマリ リージョンにフェールバックする必要があります。 このチュートリアルでは、以下の内容を学習します。

> [!div class="checklist"]
> 
> * セカンダリ リージョンの VM をフェールバックする。
> * プライマリ VM をセカンダリ リージョンに再保護する。
> 
> [!NOTE]
> 
> このチュートリアルでは、最小限のカスタマイズで、いくつかの VM をターゲット リージョンにフェールオーバーした後、ソース リージョンにフェールバックする方法を紹介しています。 さらに詳しい手順については、[Azure VM のハウツー ガイド](https://docs.microsoft.com/azure/virtual-machines/windows/)を確認してください。

## <a name="before-you-start"></a>開始する前に

* VM の状態が **[フェールオーバーがコミットされました]** になっていることを確認します。
* プライマリ リージョンが使用できることと、そこに新しいリソースを作成してアクセスできることを確認します。
* 再保護が有効になっていることを確認します。

## <a name="fail-back-to-the-primary-region"></a>プライマリ リージョンにフェールバックする

VM が再保護された後で、必要に応じてプライマリ リージョンにフェールバックすることができます。

1. コンテナーで、 **[レプリケートされたアイテム]** を選択してから、再保護された VM を選びます。

    ![プライマリへのフェールバック](./media/site-recovery-azure-to-azure-failback/azure-to-azure-failback.png)

3. **[テスト フェールオーバー]** を選択して、プライマリ リージョンへのテスト フェールオーバーを実行します。
4. テスト フェールオーバー用の復旧ポイントと仮想ネットワークを選んでから、 **[OK]** を選択します。 プライマリ リージョンに作成したテスト VM を確認できます。
5. テスト フェールオーバーが正常に完了した後、 **[テスト フェールオーバーのクリーンアップ]** を選択して、テスト フェールオーバー用にソース リージョンに作成されたリソースをクリーンアップします。
6. **[レプリケートされたアイテム]** で、VM を選択してから **[フェールオーバー]** を選びます。
7. **[フェールオーバー]** で、フェールオーバーする復旧ポイントを選択します。
    - **最新 (既定値)** : Site Recovery サービスのすべてのデータを処理し、最短の復旧ポイントの目標 (RPO) を提供します。
    - **最後に処理があった時点**:Site Recovery によって処理された最新の復旧ポイントに VM を戻します。
    - **カスタム**:特定の復旧ポイントにフェールオーバーします。 このオプションは、テスト フェールオーバーを実行するときに役立ちます。

8. Site Recovery でフェールオーバーをトリガーする前にソース VM のシャットダウンを試行する場合は、 **[フェールオーバーを開始する前にマシンをシャットダウンします]** を選択します。 シャットダウンが失敗した場合でも、フェールオーバーは続行されます。 Site Recovery では、フェールオーバー後にソースがクリーンアップされないことに注意してください。
9. **[ジョブ]** ページで、フェールオーバーの進行状況を確認します。
10. フェールオーバーが完了した後、VM にログインして検証します。 必要に応じて復旧ポイントを変更することができます。
11. フェールオーバーの検証後、 **[Commit the failover]\(フェールオーバーのコミット\)** を選択します。 コミットにより、利用可能なすべての復旧ポイントが削除されます。 以降、[復旧ポイントの変更] オプションは使用できなくなります。
12. VM がフェールオーバー後、フェールバックされたことを確認できます。

    ![プライマリ リージョンとセカンダリ リージョンの VM](./media/site-recovery-azure-to-azure-failback/azure-to-azure-failback-vm-view.png)

> [!NOTE]
> ディザスター リカバリー VM は、シャットダウン/割り当て解除済み状態で維持されます。 これは意図的な動作です。Site Recovery によって保存された VM 情報は、後でプライマリ リージョンからセカンダリ リージョンへのフェールオーバーで役立つ場合があるためです。 割り当て解除状態の VM に対して課金されることはないので、そのままにしておいてください。

## <a name="next-steps"></a>次の手順

再保護フローの[詳細](azure-to-azure-how-to-reprotect.md#what-happens-during-reprotection)について学習します。
