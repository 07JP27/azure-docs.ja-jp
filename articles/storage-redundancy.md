
<properties 
  pageTitle="Azure Storage 冗長オプション | Microsoft Azure" 
  description="Microsoft Azure ストレージ アカウント内のデータは、持続性と高可用性を保証するため、常にレプリケートされています。Azure ストレージ アカウントのレプリケーション オプションについて説明します。" 
  services="storage" 
  documentationCenter="" 
  authors="tamram" 
  manager="adinah" 
  editor=""/>

<tags 
  ms.service="storage" 
  ms.workload="storage" 
  ms.tgt_pltfrm="na" 
  ms.devlang="na" 
  ms.topic="article" 
  ms.date="03/20/2015" 
  ms.author="tamram"/>

# Azure Storage 冗長オプション



Microsoft Azure ストレージ アカウント内のデータは、持続性と高可用性を保証するために常にレプリケートされており、一時的にハードウェア障害が発生した場合でも [Azure Storage SLA](http://azure.microsoft.com/support/legal/sla/) が満たされます。Azure Storage の持続性に関するアーキテクチャの詳細については、[Azure Storage SOSP ペーパー](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx)のページを参照してください

ストレージ アカウントを作成するとき、次のレプリケーション オプションのいずれかを選択する必要があります。  

- **ローカル冗長ストレージ (LRS)。**ローカル冗長ストレージは、データのコピーを 3 つ保持します。LRS は、単一リージョンの単一施設内で 3 回レプリケートされます。LRS は一般的なハードウェア障害からデータを保護しますが、単一施設の障害からは保護しません。
  
LRS は割引料金で提供されます。持続性を最大限に高めるために、以下で説明する Geo 冗長ストレージを使用することをお勧めします。


- **ゾーン冗長ストレージ (ZRS)。**ゾーン冗長ストレージは、データのコピーを 3 つ保持します。ZRS は 1 つまたは 2 つのリージョン内の 2 つから 3 つの施設で 3 回レプリケートされるため、LRS よりも持続性が高くなります。ZRS は、単一リージョン内でのデータの持続性を保証します。
ZRS は LRS よりも高い持続性を実現しますが、持続性を最大限に高めるために、以下で説明する Geo 冗長ストレージを使用することをお勧めします。  

	> [AZURE.NOTE] ZRS の使用は、現在、ブロック BLOB に限られます。  
	> ストレージ アカウントを作成してゾーン冗長レプリケーションを選択すると、他の種類のレプリケーションを使用するように変換することはできません (その逆の変換もできません)。
 


- **地理冗長ストレージ (GRS)**。地理冗長ストレージは、ストレージ アカウントの作成時に、そのアカウントに対して既定で有効になっています。GRS では、データのコピーが 6 つ保持されます。GRS を使用すると、データがプライマリ リージョン内で 3 回複製され、プライマリ リージョンから数百マイル離れたセカンダリ リージョンでも 3 回複製されます。そのため、最も優れたレベルの持続性が実現されます。プライマリ リージョンで障害が発生すると、Azure Storage はセカンダリ リージョンにフェールオーバーします。GRS では、2 つのリージョン内のデータの持続性が確保されます。


- **読み取りアクセス地理冗長ストレージ (RA-GRS)**。読み取りアクセス地理冗長ストレージは、地理的に離れた 2 次拠点にデータをレプリケートし、2 次拠点にあるデータへの読み取りアクセスも提供します。読み取りアクセス地理冗長ストレージでは、1 つの場所が使用不可能になった場合に、1 次拠点または 2 次拠点からデータにアクセスできます。

	> [AZURE.IMPORTANT] ストレージ アカウントの作成後にデータのレプリケーション方法を変更することはできますが、LRS から GRS または RA-GRS に切り替えた場合、1 回分のデータ転送コストが追加発生することがあります。ストレージ アカウントの作成時に GRS を選択すると、後から他の種類のレプリケーションに切り替えることはできません (その逆の切り替えもできません)。
 

次の表は、LRS、ZRS、GRS、RA-GRS の違いについて、簡単に概要を示したものです。以降のセクションでは、それぞれのレプリケーションの種類について詳細に説明します。


|レプリケーション方法||LRS|ZRS|GRS|RA-GRS 
|--------------------|---|---|---|------
|複数施設にわたってのデータのレプリケート|いいえ|はい|はい|はい|
|1 次拠点に加えて 2 次拠点からもデータの読み取り可能|いいえ|いいえ|いいえ|はい
|個別のノードで保持されるデータ コピーの数|3|3|6|6
 

ストレージ アカウント レプリケーションの料金情報については、[ストレージの料金の詳細](http://azure.microsoft.com/pricing/details/storage/)に関するページを参照してください。

## ローカル冗長ストレージ (LRS)

ローカル冗長ストレージでは、ストレージ アカウントが作成されたリージョン内のデータがレプリケートされます。持続性を最大限まで高めるため、ストレージ アカウント内のデータに対して行われたすべての要求が 3 回レプリケートされます。これらの 3 つのレプリカはそれぞれ別個の障害ドメインとアップグレード ドメインに存在します。障害ドメイン (FD) は、障害の物理ユニットを表すノードのグループで、同じ物理ラックに属するノードと見なすことができます。アップグレード ドメイン (UD) は、サービス アップグレード (ロールアウト) のプロセス実行時に同時にアップグレードされるノードのグループです。3 つのレプリカは、複数の UD と FD にわたって分散されるため、ハードウェア障害によって単一のラックが影響を受ける場合や、ロールアウト中にノードがアップグレードされる場合でも、データを使用できます。3 つのレプリカのすべてに書き込まれた場合にのみ、要求は正常に返されます。

ほとんどのアプリケーションに対して地理冗長ストレージをお勧めしますが、次のような特定のシナリオでは、ローカル冗長ストレージが望ましい場合もあります。  

- LRS は GRS に比べてコストが安く、より高いスループットを提供します。再構築が簡単なデータをアプリケーションで格納する場合は、LRS を選択することもできます。

- 一部のアプリケーションは、データ ガバナンスの要件によって、単一のリージョン内でのみデータをレプリケートするように制限されています。

- アプリケーションで独自の geo レプリケーション方法を使用している場合は、GRS が必要ないことがあります。


## ゾーン冗長ストレージ (ZRS)

ゾーン冗長ストレージでは、1 つまたは 2 つのリージョン内の 2 つから 3 つの施設でデータがレプリケートされるため、LRS よりも高い持続性を実現します。ご使用のストレージ アカウントで ZRS が有効になっている場合、1 つの施設で障害が発生した場合でもデータは保持されます。


>[AZURE.NOTE]  ZRS の使用は、現在、ブロック BLOB に限られます。ストレージ アカウントを作成し、ゾーン冗長ストレージを選んだ後に、他の種類のレプリケーションを使用するように変更することはできません (また、その逆もできません)。


## 地理冗長ストレージ (GRS)


地理冗長ストレージでは、プライマリ リージョンから数百マイル離れたセカンダリ リージョンにデータがレプリケートされます。ご使用のストレージ アカウントで GRS が有効になっている場合は、地域的な停電やプライマリ リージョンが復旧できない災害が発生しても、データは保持されます。 

GRS が有効なストレージ アカウントでは、更新は最初にプライマリ リージョンにコミットされます。プライマリ リージョンでは、更新は 3 回レプリケートされます。次に、更新はセカンダリ リージョンにレプリケートされます。セカンダリ リージョンでも、個別の障害ドメインとアップグレード ドメインに対して更新は 3 回レプリケートされます。

 
> [AZURE.NOTE] GRS を使用すると、データ書き込み要求がセカンダリ リージョンに非同期にレプリケートされます。GRS を選択しても、プライマリ リージョンに対して実行される要求の待機時間には影響を与えない点に注意してください。ただし、非同期レプリケーションには遅延が伴うため、地域的な災害が発生した場合にデータをプライマリ リージョンから復旧できないと、セカンダリ リージョンにまだレプリケートされていない変更は失われる可能性があります。
 
ストレージ アカウントの作成時に、アカウントのプライマリ リージョンを選択します。セカンダリ リージョンはプライマリ リージョンに基づいて決定され、変更することはできません。次の表に、プライマリ リージョンとセカンダリ リージョンのペアを示します。

|プライマリ            |セカンダリ        
| ---------------   |----------------
|米国中北部   |米国中南部
|米国中南部   |米国中北部
|米国東部            |米国西部        
|米国西部            |米国東部         
|米国東部 2          |米国中部      
|米国中部         |米国東部 2       
|北ヨーロッパ       |西ヨーロッパ     
|西ヨーロッパ        |北ヨーロッパ    
|東南アジア    |東アジア       
|東アジア          |東南アジア 
|中国東部         |中国北部     
|中国北部        |中国東部      
|東日本         |西日本      
|西日本         |東日本      
|ブラジル南部       |米国中南部
|オーストラリア東部     |オーストラリア南東部
|オーストラリア南東部|オーストラリア東部  

 
## 読み取りアクセス地理冗長ストレージ (RA-GRS)

読み取りアクセス地理冗長ストレージでは、GRS が提供する 2 つのリージョンにまたがるレプリケーションに加えて、2 次拠点のデータにも読み取り専用アクセスを提供することで、ストレージ アカウントの可用性が最大限に発揮されます。プライマリ リージョンでデータが使用不可能になった場合、アプリケーションはセカンダリ リージョンからデータを読み取ることができます。

セカンダリ リージョンのデータに対して読み取り専用アクセスを有効にすると、ストレージ アカウントのプライマリ エンドポイントだけでなく、セカンダリ エンドポイントのデータも使用できます。セカンダリ エンドポイントはプライマリ エンドポイントと似ていますが、アカウント名に `–secondary` というサフィックスが追加されます。たとえば、BLOB サービスのプライマリ エンドポイントが  `myaccount.blob.core.windows.net` の場合、セカンダリ エンドポイントは  `myaccount-secondary.blob.core.windows.net` になります。ストレージ アカウントのアクセス キーは、プライマリ エンドポイントとセカンダリ エンドポイントの両方で同じです。

## 次のステップ

- [Azure ストレージのスケーラビリティおよびパフォーマンスのターゲット](storage-scalability-targets.md) 
- [Microsoft Azure Storage 冗長オプションと読み取りアクセス地理冗長ストレージ](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx)  
- [RA-GRS を使用した Microsoft Azure Storage Emulator 3.1](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/08/microsoft-azure-storage-emulator-3-1-with-ra-grs.aspx)
- [Azure Storage SOSP ペーパー](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx)  

<!--HONumber=52-->