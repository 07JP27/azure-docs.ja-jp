---
title: "Azure Storage アカウントの種類 | Microsoft Docs"
description: "Azure Storage の種類と選択について説明します。"
services: storage
documentationcenter: 
author: jirwin
manager: jwillis
editor: 
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/11/2017
ms.author: jirwin
ms.openlocfilehash: 7f07734433694999d38429ca264c58c5f3c619e1
ms.sourcegitcommit: b7adce69c06b6e70493d13bc02bd31e06f291a91
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/19/2017
---
# <a name="azure-storage-account-options"></a>Azure Storage アカウントの種類

## <a name="overview"></a>概要
Azure Storage は、3 種類のアカウントから選択できるようになっています。3 つのアカウントはそれぞれ料金体系が異なり、サポートされている機能も異なります。 使用にあたっては、その違いを考慮して、実際の用途に最適なアカウントを選ぶことが大切です。  その 3 つの選択肢を次に示します。

* **GPv2 (General Purpose v2)** アカウント: 最新の機能をすべて備えているほか、BLOB、ファイル、キュー、テーブルをサポートします。 現在、最新機能として、BLOB レベルの階層制御、アーカイブ ストレージ、アカウントのスケール上限の引き上げ、ストレージ イベントなどがあります。 料金体系は、GB 単価の最安値と業界的に競争力の高いトランザクション料金の実現を目指して設定されています。

* **Blob Storage** アカウント: ブロック BLOB に関しては、最新の機能がすべて備わっていますが、サポートされるのはブロック BLOB だけです。  料金については、General Purpose v2 と大きな違いはありません。 ほとんどのユーザーには、Blob Storage アカウントよりも、General Purpose v2 の使用が推奨されます。

* **GPv1 (General Purpose v1)** アカウントには、すべての Azure Storage サービスが備わっていますが、最新の機能が利用できない場合があるほか、GB 単価もやや高いことがあります。 たとえば GPv1 では、クール ストレージとアーカイブ ストレージがサポートされません。  このタイプのアカウントは、トランザクションの料金が比較的低いため、変更頻度が高いワークロードや読み取り速度が速いワークロードでメリットが得られることがあります。

### <a name="changing-account-kind"></a>アカウントの種類の変更
GPv1 アカウントまたは Blob Storage アカウントは、ポータル、CLI、PowerShell からいつでも GPv2 アカウントにアップグレードすることができます。 この変更は元に戻せません。また、その他の変更は許可されません。

## <a name="general-purpose-v2"></a>General Purpose v2
**GPv2 (General Purpose v2)** は、BLOB、ファイル、キュー、テーブルをはじめとする全ストレージ サービスに関して、すべての機能をサポートするストレージ アカウントです。 ブロック BLOB では、アクセス パターンに基づいて、アカウント レベルでホット ストレージ層とクール ストレージ層を選択でき、BLOB レベルでホット層、クール層、およびアーカイブ層を選択することができます。 頻繁にアクセスするデータ、アクセス頻度の低いデータ、ほとんどアクセスしないデータのそれぞれを、ホット、クール、アーカイブの各ストレージ層に格納してコストを最適化します。 GPv1 アカウントは、ポータル、CLI、PowerShell のいずれかから、GPv2 アカウントにアップグレードすることができます。 GPv2 アカウントは、Blob Storage と GPv1 アカウントでサポートされるすべての API と機能に対応し、それらのタイプのアカウントで利用できる優れた持続性、可用性、スケーラビリティ、パフォーマンスの機能がすべて実現されます。

Blob Storage アカウントは、**アクセス層**属性をアカウント レベルで公開しており、この属性で、既定のストレージ アカウント層を**ホット**または**クール**として指定できます。 既定のストレージ アカウント層は、BLOB レベルで層が明示的に設定されていない BLOB に適用されます。 データの使用パターンが変化した場合は、いつでもこれらのストレージ層を切り替えることができます。 **アーカイブ層**は、BLOB レベルでのみ適用できます。

> [!NOTE]
> ストレージ層を変更すると、追加料金が発生することがあります。 詳細については、「[価格と課金](#pricing-and-billing)」セクションを参照してください。

## <a name="blob-storage-accounts"></a>BLOB ストレージ アカウント

**Blob Storage アカウント**は、GPv2 とまったく同じブロック BLOB 機能を備えていますが、サポートされるのはブロック BLOB だけです。 Blob Storage アカウントと GPv2 の料金の違いをよく確認したうえで、GPv2 へのアップグレードをご検討ください。 このアップグレードは元に戻すことができません。

> [!NOTE]
> Blob Storage アカウントは、ブロック BLOB と追加 BLOB のみをサポートします。ページ BLOB はサポートしません。

## <a name="general-purpose-v1"></a>General Purpose v1
**General Purpose v1 (GPv1)** は最も古いストレージ アカウントであり、クラシック デプロイメント モデルで唯一使用することができます。 クール ストレージやアーカイブ ストレージといった機能は、GPv1 では利用できません。 GPv1 は一般に、GB ストレージ コストが他のタイプよりも高めですが、トランザクション コストは GPv2 や Blob Storage アカウントよりも低くなります。

## <a name="recommendations"></a>Recommendations

ストレージ アカウントの詳細については、「 [Azure ストレージ アカウントについて](../common/storage-create-storage-account.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) 」を参照してください。

ブロックまたは追加 Blob Storage だけを必要とするアプリケーションでは、階層化されたストレージの分化された料金モデルの利点を活用するために、GPv2 ストレージ アカウントを使用することをお勧めします。 ただし、状況によってはそのようにできず、GPv1 ストレージ アカウントを使用するしかない場合もあります。たとえば、次のような場合です。

* まだクラシック デプロイ モデルを使用する必要がある。 Blob Storage アカウントは、Azure Resource Manager デプロイメント モデルだけで利用できます。

* トランザクションを大量に使用するか、または geo レプリケーション帯域幅を大量に使用するために、GPv2 アカウントと Blob Storage アカウントの方が GPv1 よりもコストが割高となり、低い GB 単価の利点が活かせるだけのストレージを確保できない。

* [Storage Services REST API](https://msdn.microsoft.com/library/azure/dd894041.aspx) の 2014-02-14 より前のバージョンか、クライアント ライブラリの 4.x より前のバージョンを使用していて、アプリケーションをアップグレードできない。

> [!NOTE]
> Blob Storage アカウントは、現在、すべての Azure リージョンでサポートされています。

## <a name="pricing-and-billing"></a>価格と課金
すべてのストレージ アカウントでは、各 BLOB の層に基づいた Blob Storage の価格モデルを採用しています。 ストレージ アカウントを使用するときには、課金に関して次の点を考慮してください。

* **ストレージ コスト**: データの格納のコストは、格納されているデータの量だけでなく、ストレージ層にも左右されます。 よりクールな層になるほど、ギガバイトあたりのコストが下がります。

* **データ アクセス コスト**: データ アクセス料金は、よりクールな層になるほど高くなります。 クールおよびアーカイブ ストレージ層のデータの場合、読み取りに対して、ギガバイト単位のデータ アクセス料金が課金されます。

* **トランザクション コスト**: すべての層に対してトランザクションごとに課金されます。よりクールな層になるほどコストが高くなります。

* **geo レプリケーション データ転送コスト**: GRS と RA-GRS を含む geo レプリケーションが構成されているアカウントだけに適用されます。 geo レプリケーション データ転送には、ギガバイトあたりの料金がかかります。

* **送信データ転送コスト**: 送信データ転送 (Azure リージョン外に転送されるデータ) では、帯域幅使用量に対する課金がギガバイトあたりで発生します。これは、汎用ストレージ アカウントと同じです。

* **ストレージ層の変更**: アカウント ストレージ層をクールからホットに変更すると、ストレージ アカウントに存在するすべてのデータの読み取りと同等の課金が発生します。 ただし、アカウント ストレージ層をホットからクールに変更したときは、クール層への全データの書き込みに相当する課金が発生します (GPv2 アカウントのみ)。

> [!NOTE]
> Blob Storage アカウントの価格モデルの詳細については、「[Azure Storage 料金](https://azure.microsoft.com/pricing/details/storage/)」を参照してください。 送信データ転送の価格の詳細については、[データ転送の料金詳細](https://azure.microsoft.com/pricing/details/data-transfers/)に関するページを参照してください。

## <a name="quickstart-scenarios"></a>クイックスタート シナリオ

このセクションでは、Azure Portal を使用して、次のシナリオについて説明します。

* GPv2 ストレージ アカウントを作成する方法。
* GPv1 または Blob Storage アカウントを GPv2 ストレージ アカウントに変換する方法。
* アカウントと BLOB のストレージ層を設定する方法 (GPv2 ストレージ アカウント)。

以下の例では、設定がストレージ アカウント全体に適用されるため、アクセス層をアーカイブに設定することはできません。 アーカイブは、特定の BLOB に対してのみ設定できます。

### <a name="create-a-gpv2-storage-account-using-the-azure-portal"></a>Azure Portal を使用して GPv2 ストレージ アカウントを作成する

1. [Azure ポータル](https://portal.azure.com)にサインインします。

2. ハブ メニューで、**[新規]** > **[データ + ストレージ]** > **[ストレージ アカウント]** をクリックします。

3. ストレージ アカウントの名前を入力します。

    この名前は、グローバルに一意である必要があります。この名前は、ストレージ アカウントのオブジェクトにアクセスするための URL の一部として使用されます。  

4. デプロイ モデルとして **[Resource Manager]** を選択します。

    階層型ストレージは、Resource Manager ストレージ アカウントでのみ使用できます。これは、新しいリソースに推奨されるデプロイ モデルです。 詳細については、「[Azure Resource Manager の概要](../../azure-resource-manager/resource-group-overview.md)」を参照してください。  

5. [アカウントの種類] ボックスの一覧の **[General Purpose v2]** を選択します。

    ここで、ストレージ アカウントの種類を選択します。 階層型ストレージは汎用ストレージでは利用できません。種類が Blob Storage のアカウントでのみ利用できます。     

    これを選択すると、パフォーマンス レベルが Standard に設定されます。 階層型ストレージは、Premium パフォーマンス レベルでは利用できません。

6. ストレージ アカウントのレプリケーション オプション (**[LRS]**、**[GRS]**、または **[RA-GRS]**) を選択します。 既定値は **[RA-GRS]**です。

    LRS はローカル冗長ストレージ、GRS は geo 冗長ストレージ (2 つのリージョン)、RA-GRS は読み取りアクセス geo 冗長ストレージ (2 つのリージョン。セカンダリに対する読み取りアクセス権が付与される) です。

    Azure Storage のレプリケーション オプションの詳細については、 [Azure Storage のレプリケーション](../common/storage-redundancy.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)に関するページを参照してください。

7. ニーズに応じた適切なストレージ層を選択します。**[アクセス レベル]** を **[クール]** と **[ホット]** のいずれかに設定します。 既定値は **[ホット]**です。

8. 新しいストレージ アカウントを作成するサブスクリプションを選択します。

9. 新しいリソース グループを指定するか、既定のリソース グループを選択します。 リソース グループの詳細については、「[Azure Resource Manager の概要](../../azure-resource-manager/resource-group-overview.md)」をご覧ください。

10. ストレージ アカウントのリージョンを選択します。

11. **[作成]** をクリックしてストレージ アカウントを作成します。

### <a name="convert-a-gpv1-or-blob-storage-account-to-a-gpv2-storage-account-using-the-azure-portal"></a>Azure Portal を使用して GPv1 または Blob Storage アカウントを GPv2 ストレージ アカウントに変換する

1. [Azure ポータル](https://portal.azure.com)にサインインします。

2. ストレージ アカウントに移動するには、[すべてのリソース] を選択し、ストレージ アカウントを選択します。

3. [設定] ブレードで **[構成]** をクリックします。

4. [アカウントの種類] の **[アップグレード]** をクリックします。

5. 確認を求める新しいブレードが右側に表示されます。 [アップグレードの確認] で、アカウントの名前を入力します。 

5. ブレードの下部にある [アップグレード] をクリックします。

### <a name="change-the-storage-tier-of-a-gpv2-storage-account-using-the-azure-portal"></a>Azure Portal を使用して GPv2 ストレージ アカウントのストレージ層を変更する

1. [Azure ポータル](https://portal.azure.com)にサインインします。

2. ストレージ アカウントに移動するには、[すべてのリソース] を選択し、ストレージ アカウントを選択します。

3. [設定] ブレードで **[構成]** をクリックし、アカウント構成を表示または変更します。

4. ニーズに応じた適切なストレージ層を選択します。**[アクセス レベル]** を **[クール]** と **[ホット]** のいずれかに設定します。

5. ブレードの上部にある [保存] をクリックします。

### <a name="change-the-storage-tier-of-a-blob-using-the-azure-portal"></a>Azure Portal を使用した BLOB のストレージ層の変更

1. [Azure ポータル](https://portal.azure.com)にサインインします。

2. ストレージ アカウントの BLOB に移動するには、[すべてのリソース]、ストレージ アカウント、コンテナー、BLOB を順に選択します。

3. BLOB のプロパティ ブレードで、**[アクセス レベル]** ドロップダウン メニューをクリックし、**[ホット]**、**[クール]**、または **[アーカイブ]** ストレージ層を選択します。

5. ブレードの上部にある [保存] をクリックします。

> [!NOTE]
> ストレージ層を変更すると、追加料金が発生することがあります。 詳細については、「[価格と課金](#pricing-and-billing)」セクションを参照してください。


## <a name="evaluating-and-migrating-to-gpv2-storage-accounts"></a>GPv2 ストレージ アカウントの評価と移行
このセクションの目的は、ご使用のストレージ アカウントを GPv1 から GPv2 にスムーズに移行できるよう支援することです。 2 つのユーザー シナリオがあります。

* GPv1 ストレージ アカウントを既に持っており、適切なストレージ層の GPv2 ストレージ アカウントへの変更を評価したい。
* GPv2 ストレージ アカウントの使用を決定しているか、既に所有しており、ホット ストレージ層とクール ストレージ層のどちらを使用すべきかを評価したい。

いずれの場合も、最初にすべきことは、GPv2 ストレージ アカウントに保存されるデータの格納とアクセスにかかるコストを見積もり、そのコストを現在のコストと比較することです。

## <a name="evaluating-gpv2-storage-account-tiers"></a>GPv2 ストレージ アカウント層の評価

GPv2 ストレージ アカウントに保存されるデータの格納とアクセスにかかるコストを見積もるためには、既存の使用パターンを評価するか、予想される使用パターンを概算する必要があります。 一般に、以下のことを調べる必要があります。

* ストレージの使用量 - どのくらいの量のデータが格納され、その量は月ごとにどのように変化するか。

* ストレージ アクセス パターン - アカウントに対してどのくらいの量のデータの読み取りや書き込みがあるか (新規データも含めて)。 データ アクセスにはどのくらいのトランザクションが使用されるか。また、そのトランザクションの種類は何か。

## <a name="monitoring-existing-storage-accounts"></a>既存のストレージ アカウントの監視

既存のストレージ アカウントを監視し、そのデータを収集するには、Azure Storage Analytics を利用できます。これにより、ログ記録が実行され、ストレージ アカウントのメトリック データが得られます。 Storage Analytics では、GPv1、GPv2、Blob Storage の各アカウント タイプについて、ストレージ サービスへの要求に関して集計されたトランザクション統計情報と容量データを含むメトリックを格納できます。 このデータは、同じストレージ アカウント内の既知のテーブルに格納されます。

詳細については、「[About Storage Analytics Metrics (Storage Analytics Metrics について)](https://msdn.microsoft.com/library/azure/hh343258.aspx)」と「[Storage Analytics Metrics Table Schema (Storage Analytics Metrics のテーブル スキーマ)](https://msdn.microsoft.com/library/azure/hh343264.aspx)」を参照してください。

> [!NOTE]
> Blob Storage アカウントは、そのアカウントのメトリック データの格納とアクセスのためだけに Table service エンドポイントを公開します。 GPv1 ZRS ストレージ アカウントは、メトリック データをサポートしません。

Blob Storage サービスのストレージ使用量を監視するには、容量メトリックを有効にする必要があります。
これを有効にすると、ストレージ アカウントの Blob service に関する容量データが毎日記録されます。これは、同じストレージ アカウント内の *$MetricsCapacityBlob* テーブルに書き込まれるテーブル エントリとして記録されます。

Blob Storage サービスのデータ アクセス パターンを監視するには、API レベルで時間単位のトランザクション メトリックを有効にする必要があります。 これを有効にすると、API あたりのトランザクションが 1 時間ごとに集計され、同じストレージ アカウント内の *$MetricsHourPrimaryTransactionsBlob* テーブルに書き込まれるテーブル エントリとして記録されます。 *$MetricsHourSecondaryTransactionsBlob* テーブルには、RA-GRS ストレージ アカウントを使用している場合のセカンダリ エンドポイントに対するトランザクションが記録されます。

> [!NOTE]
> 汎用ストレージ アカウントがあり、そのアカウントに、ページ BLOB と仮想マシン ディスク (またはキュー、ファイル、テーブルのいずれか) を、ブロック BLOB データと追加 BLOB データと共に格納している場合、この見積もりプロセスは適用できません。 これは容量データにおいて、ブロック BLOB と他の種類とが区別されず、他の種類のデータに関する容量データが得られないためです。 これらのタイプを使用する場合、直近の請求書に記載された数量に着目することで対応することもできます。

データ使用量とアクセス パターンを正確に見積もるには、通常の使用状況を表すメトリックの保有期間を選択したうえで推定することをお勧めします。 その方法の 1 つとして、メトリック データを 7 日間保持し、そのデータを毎週収集して、月末に分析を行う方法があります。 そのほかに、過去 30 日間のメトリック データを保持し、30 日の期間の最後にそのデータを収集、分析する方法もあります。

メトリック データの有効化、収集、表示の詳細については、「[Azure のストレージ メトリックの有効化とメトリック データの表示](../common/storage-enable-and-view-metrics.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)」を参照してください。

> [!NOTE]
> 分析データの格納、アクセス、ダウンロードについても、通常のユーザー データと同様に課金されます。

### <a name="utilizing-usage-metrics-to-estimate-costs"></a>コストを見積もるための使用状況メトリックの利用

### <a name="storage-costs"></a>ストレージ コスト

行キー *"data"* がある容量メトリック テーブル *$MetricsCapacityBlob* の最新のエントリは、ユーザー データによって使用されたストレージ容量を示します。 行キー *"analytics"* がある容量メトリック テーブル *$MetricsCapacityBlob* の最新のエントリは、分析ログによって使用されたストレージ容量を示します。

ユーザー データと分析ログ (有効な場合) の両方によって使用されたこの合計容量は、ストレージ アカウントにデータを格納するコストを見積もるために使用できます。 また、同じ方法を使用して、GPv1 ストレージ アカウントでのストレージ コストを見積もることができます。

### <a name="transaction-costs"></a>トランザクション コスト

*"TotalBillableRequests"*の合計は、トランザクション メトリック テーブル内の API のすべてのエントリを対象とし、その特定の API のトランザクションの総数を示すものです。 "*たとえば*"、特定期間の "*GetBlob*" トランザクションの合計は、行キー "*user;GetBlob*" を備えたすべてのエントリに対する課金対象の要求をすべて加算することによって計算できます。

Blob Storage アカウントのトランザクション コストを見積もるには、トランザクションを 3 つのグループに分類する必要があります (それぞれ価格が異なるため)。

* *"PutBlob"*、*"PutBlock"*、*"PutBlockList"*、*"AppendBlock"*、*"ListBlobs"*、*"ListContainers"*、*"CreateContainer"*、*"SnapshotBlob"*、*"CopyBlob"* などの書き込みトランザクション。
* *"DeleteBlob"*、*"DeleteContainer"* などの削除トランザクション。
* その他すべてのトランザクション。

GPv1 ストレージ アカウントのトランザクション コストを見積もるには、操作と API に関係なく、すべてのトランザクションを集計する必要があります。

### <a name="data-access-and-geo-replication-data-transfer-costs"></a>データ アクセスと geo レプリケーション データ転送のコスト

Storage Analytics では、ストレージ アカウントに対する読み取りと書き込みのデータ量は示されませんが、トランザクション メトリック テーブルを確認することで大まかに見積もることは可能です。 トランザクション メトリック テーブル内の API の全エントリを対象とした *"TotalIngress"* の合計は、その特定の API の受信データの総量をバイトで示すものです。 同様に、 *"TotalEgress"* の合計は、送信データの総量をバイトで示します。

Blob Storage アカウントのデータ アクセス コストを見積もるには、トランザクションを 2 つのグループに分類する必要があります。

* ストレージ アカウントから取得されたデータの量は、主に *"GetBlob"* 操作と *"CopyBlob"* 操作の *"TotalEgress"* の合計を確認することで見積もることができます。

* ストレージ アカウントに書き込まれたデータの量は、主に *"PutBlob"* 操作、*"PutBlock"* 操作、*"CopyBlob"* 操作、*"AppendBlock"* 操作の *"TotalIngress"* の合計を確認することで見積もることができます。

また、Blob Storage アカウントの geo レプリケーション データ転送のコストは、GRS ストレージ アカウントまたは RA-GRS ストレージ アカウントを使用する場合に書き込まれるデータ量の見積もりを使用することによって計算することもできます。

> [!NOTE]
> ホット ストレージ層またはクール ストレージ層を使用する場合のコストの計算に関する詳細な例については、「*Azure Storage Pricing* 」というページにある、 ["ホットおよびクール アクセス層とはどのようなものですか? また、どちらを使用すればよいのでしょうか?"](https://azure.microsoft.com/pricing/details/storage/)にサインインします。

## <a name="migrating-existing-data"></a>既存のデータの移行

GPv1 または Blob Storage アカウントは、GPv2 に簡単にアップグレードできます。ダウンタイムや API の変更は不要で、データの引っ越し作業も必要ありません。 これは、Blob Storage アカウントにはない、GPv2 の大きな利点の 1 つです。

それでも Blob Storage アカウントに移行する必要がある場合は、以下の手順に従ってください。

Blob Storage アカウントは、ブロック BLOB と追加 BLOB の格納に特化しています。 テーブル、キュー、ファイル、ディスク、および BLOB を格納できる既存の汎用ストレージ アカウントは、Blob Storage アカウントに変換することはできません。 つまり、ストレージ層を使用するには、新しい Blob Storage アカウントを作成し、既存のデータを新たに作成したアカウントに移行する必要があります。

オンプレミス ストレージ デバイス、サード パーティのクラウド ストレージ プロバイダー、または Azure の既存の汎用ストレージ アカウントから、既存のデータを Blob Storage アカウントに移行するには、以下の方法を使用できます。

### <a name="azcopy"></a>AzCopy

AzCopy は、Azure Storage との間で高パフォーマンスのデータ コピーを行うように設計された Windows コマンドライン ユーティリティです。 AzCopy を使用して、既存の汎用ストレージ アカウントから Blob Storage アカウントにデータをコピーできます。またオンプレミス ストレージ デバイスから Blob Storage アカウントにデータをアップロードすることもできます。

詳細については、「 [AzCopy コマンド ライン ユーティリティを使用してデータを転送する](../common/storage-use-azcopy.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)」を参照してください。

### <a name="data-movement-library"></a>データ移動ライブラリ

Azure Storage Data Movement Library for .NET は、AzCopy を動作させているコア データ移動フレームワークに基づいています。 ライブラリは、AzCopy と同じように、高パフォーマンスで信頼性が高く簡単なデータ転送操作ができるように設計されています。 そのため、AzCopy によって提供される機能の利点をアプリケーションでネイティブに活用でき、AzCopy の外部インスタンスを実行したり監視したりする必要はありません。

詳細については、「 [Azure Storage Data Movement Library for .Net](https://github.com/Azure/azure-storage-net-data-movement)

### <a name="rest-api-or-client-library"></a>REST API またはクライアント ライブラリ

Azure クライアント ライブラリのいずれかまたは Azure Storage サービス REST API を使用して、データを Blob Storage アカウントに移行するためのカスタム アプリケーションを作成することができます。 Azure Storage には、.NET、Java、C++、Node.js、PHP、Ruby、Python などの複数の言語とプラットフォーム用の豊富なクライアント ライブラリが用意されています。 クライアント ライブラリは、再試行ロジック、ログ、並列アップロードといった高度な機能を提供します。 また、REST API を直接使用して開発することもでき、HTTP/HTTPS 要求を行うどの言語からでも呼び出すことができます。

詳細については、[Azure Blob Storage の概要](../blobs/storage-dotnet-how-to-use-blobs.md)に関するページを参照してください。

> [!NOTE]
> クライアント側の暗号化を使用して暗号化された BLOB には、その BLOB と共に格納される暗号化関連メタデータが格納されます。 すべてのコピー メカニズムで、BLOB メタデータと、特に暗号化に関連するメタデータが必ず保持されることがきわめて重要です。 このメタデータなしで BLOB をコピーした場合、BLOB コンテンツを再度取得することはできません。 暗号化関連メタデータの詳細については、[Azure Storage のクライアント側の暗号化](../common/storage-client-side-encryption.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)に関するページを参照してください。

## <a name="faq"></a>FAQ

**既存のストレージ アカウントを引き続き使用できますか。**

はい。既存のストレージ アカウントはまだ使用可能であり、料金や機能も変更されていません。  それらにはストレージ層を選択する機能がなく、今後も階層化機能は導入されません。

**GPv2 ストレージ アカウントは、いつ、どのようなときに使用し始めればよいですか。**

GPv2 ストレージ アカウントは、GB 単価の最安値を提供しつつ、業界的に競争力の高いトランザクション コストとデータ アクセス コストを実現することに特化されています。 今後、変更通知をはじめとする新たな機能は GPv2 ストレージ アカウントに基づいて導入されるため、BLOB の格納にも、GPv2 タイプのアカウントが推奨されます。 ただし、いつアップグレードするかは、ビジネス要件に応じてお客様が判断する必要があります。  たとえば、アップグレードよりもまず、トランザクション パターンを最適化するという選択肢も考えられます。

**既存のストレージ アカウントを GPv2 ストレージ アカウントにアップグレードできますか。**

はい。 GPv1 アカウントも Blob Storage アカウントもポータルから簡単に GPv2 にアップグレードできます。

**同じアカウントの両方のストレージ層にオブジェクトを格納することはできますか。**

はい。 アカウント レベルで設定された**アクセス層**属性は、明示的に層が設定されていない、そのアカウント内のすべてのオブジェクトに適用される既定の層です。 ただし、BLOB レベルの階層制御では、アカウントで設定されているアクセス層に関係なく、オブジェクト レベルでアクセス層を設定できます。 3 つのストレージ層 (ホット、クール、またはアーカイブ) のいずれの BLOB も同じアカウント内に存在することができます。

**自分の GPv2 ストレージ アカウントのストレージ層を変更することはできますか。**

はい。ストレージ アカウントの**アクセス層**属性を設定することで、アカウントのストレージ層を変更することができます。 アカウントのストレージ層の変更は、アカウントに格納されている、層が明示的に設定されていないすべてのオブジェクトに適用されます。 ストレージ層をホットからクールに変更すると、書き込み操作 (10,000 件単位) の料金が発生します (GPv2 ストレージ アカウントのみ)。一方、クールからホットに変更すると、アカウント内のすべてのデータの読み取りに対し、読み取り操作 (10,000 件単位) とデータ取得 (GB 単位) の両方の料金が発生します。

**自分の Blob Storage アカウントのストレージ層は、どの程度の頻度で変更できますか。**

ストレージ層の変更頻度に対して制限は設けられていませんが、ストレージ層をクールからホットに変更すると、かなりの料金が発生することに注意してください。 ストレージ層を頻繁に変更することは、お勧めしません。

**クール ストレージ層内の BLOB の動作は、ホット ストレージ層内の BLOB とは異なりますか。**

GPv2 アカウントと Blob Storage アカウントのホット ストレージ層に存在する BLOB の待ち時間は、GPv1 ストレージ アカウントの BLOB と同じになります。 クール ストレージ層内の BLOB の待ち時間は、ホット ストレージ層の BLOB と類似しています (ミリ秒)。 アーカイブ ストレージ層の BLOB の待ち時間は数時間に及びます。

クール ストレージ層内の BLOB は、ホット ストレージ層に格納された BLOB よりも可用性サービス レベル (SLA) が若干低くなります。 詳細については、「 [Storage の SLA](https://azure.microsoft.com/support/legal/sla/storage)」を参照してください。

**Blob Storage アカウントにページ BLOB と仮想マシンのディスクを保存できますか。**


いいえ。 Blob Storage アカウントは、ブロック BLOB と追加 BLOB のみをサポートします。ページ BLOB はサポートしません。 Azure の仮想マシンのディスクではページ BLOB が使用されるため、Blob Storage アカウントは仮想マシンのディスクの格納に使用できません。 ただし、仮想マシンのディスクのバックアップを Blob Storage アカウント内にブロック BLOB として格納することはできます。 これは、Blob Storage アカウントではなく GPv2 の使用が推奨される理由の 1 つです。

**GPv2 ストレージ アカウントを使用するには、既存のアプリケーションを変更する必要がありますか。**

GPv2 ストレージ アカウントは、GPv1 ストレージ アカウントおよび Blob Storage アカウントとの間で、100% の API 整合性を備えています。 アプリケーションでブロック BLOB または追加 BLOB が使用されており、[Storage Services REST API](https://msdn.microsoft.com/library/azure/dd894041.aspx) の 2014-02-14 バージョン以降を使用している限り、アプリケーションは機能します。 プロトコルの古いバージョンを使用している場合は、新しいバージョンを使用して両方の種類のストレージ アカウントとシームレスに動作するように、アプリケーションを更新する必要があります。 一般に、どの種類のストレージ アカウントを使用するかにかかわらず、常に最新バージョンを使用することをお勧めしています。

**ユーザー エクスペリエンスに変更はありますか。**

GPv2 ストレージ アカウントは GPv1 ストレージ アカウントとよく似ており、高い持続性、可用性、スケーラビリティ、パフォーマンス、セキュリティなどの Azure Storage のすべての主要機能をサポートしています。 GPv2 または Blob Storage にアップグレードしても、これまでに指摘してきた Blob Storage アカウントとそのストレージ層に固有の機能および制限以外は、まったく変わりません。

## <a name="next-steps"></a>次のステップ

### <a name="evaluate-blob-storage-accounts"></a>Blob Storage アカウントを評価する

[Blob Storage アカウントのリージョンごとの提供状況を確認する](https://azure.microsoft.com/regions/#services)

[Azure Storage のメトリックを有効にして現在のストレージ アカウントの使用状況を評価する](../common/storage-enable-and-view-metrics.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[Blob Storage のリージョンごとの料金を確認する](https://azure.microsoft.com/pricing/details/storage/)

[データ転送の価格を確認する](https://azure.microsoft.com/pricing/details/data-transfers/)

### <a name="start-using-gpv2-storage-accounts"></a>GPv2 ストレージ アカウントの利用を開始する

[Azure Blob Storage を使用する](../blobs/storage-dotnet-how-to-use-blobs.md)

[Azure Storage との間でのデータの移動](../common/storage-moving-data.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[AzCopy コマンド ライン ユーティリティを使用してデータを転送する](../common/storage-use-azcopy.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[自分のストレージ アカウントを調べる](http://storageexplorer.com/)
