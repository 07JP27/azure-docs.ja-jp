<properties
    pageTitle="BLOB 用 Azure クール ストレージ | Microsoft Azure"
    description="Blob Storage のストレージ層では、アクセス パターンに基づいてオブジェクト データをコスト効率の高い方法で格納するストレージを提供しています。Azure クール ストレージは、アクセス頻度の低いデータ向けに最適化されています。"
    services="storage"
    documentationCenter=""
    authors="sribhat-msft"
    manager=""
    editor="tysonn"/>

<tags
    ms.service="storage"
    ms.workload="storage"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="get-started-article"
    ms.date="05/09/2016"
    ms.author="sribhat"/>


# Azure Blob Storage: ホット層とクール層

## 概要

Azure Storage では現在、Blob Storage (オブジェクト ストレージ) 用に 2 つのストレージ層が提供されています。そのため、使い方しだいで、コスト効率の高い方法でデータを格納することができます。Azure **ホット ストレージ層**は、頻繁にアクセスされるデータの格納に適しています。Azure **クール ストレージ層**は、アクセスされる頻度は低いものの、保管期間が長いデータの格納に適しています。クール ストレージ層に格納されるデータについては、可用性が若干低くても許容できますが、高い持続性は必要で、アクセスにかかる時間とスループット特性もホット データと同程度である必要があります。クール データの場合、可用性の SLA が若干低く、アクセス コストが高めであっても、ストレージ コストが大幅に低ければ許容できます。

最近では、クラウドに格納されるデータが急激に増加しています。ストレージのニーズが拡大する中でコストを管理するには、アクセスの頻度や予定保有期間などの属性に基づいてデータを整理する方法が効果的です。クラウドに格納されるデータは、有効期間を通じてどのように生成、処理、およびアクセスされるかという点で、まったく異なる場合があります。有効期間を通じて活発にアクセスおよび変更されるデータもあれば、有効期間の初期に頻繁にアクセスされ、古くなるにつれて大幅にアクセスが減るデータもあります。また、クラウド内でアイドル状態のままとなり、格納されてからはほとんどアクセスされないデータもあります。

前の各データ アクセス シナリオは、特定のアクセス パターン用に最適化されたストレージの分化された層の利点を利用しています。Azure Blob Storage は、現在、ホットとクールの各ストレージ アクセス層を導入し、分化されたストレージ層に対するニーズに異なる価格モデルで対応しています。

## BLOB ストレージ アカウント

**BLOB ストレージ アカウント**とは、Azure Storage に BLOB (オブジェクト) として非構造化データを格納するための特殊なストレージ アカウントです。BLOB ストレージ アカウントでは、現在、アクセス層としてホット ストレージまたはクール ストレージを選択できます。アクセス頻度が低いクール データは、より低いストレージ コストで格納し、アクセス頻度が高いホット データは、より低いアクセス コストで格納することができます。BLOB ストレージ アカウントは、既存の汎用ストレージ アカウントと同様で、現在使用されているすべての優れた耐久性、可用性、スケーラビリティ、およびパフォーマンス機能を共有します。たとえば、ブロック BLOB と追加 BLOB の 100% の API 整合性などです。

> [AZURE.NOTE] BLOB ストレージ アカウントは、ブロック BLOB と追加 BLOB のみをサポートします。ページ BLOB はサポートしません。

BLOB ストレージ アカウントは、**アクセス層**属性を公開します。この属性を使用すると、アカウントに格納されているデータに応じてストレージ層を**ホット**または**クール**として指定できます。データの使用パターンが変化した場合は、いつでもこれらのアクセス層を切り替えることができます。

> [AZURE.NOTE] アクセス層を変更すると、追加料金が発生することがあります。詳細については、「[価格と課金](storage-blob-storage-tiers.md#pricing-and-billing)」セクションを参照してください。

ホット ストレージ アクセス層の使用シナリオの例には、次のようなものがあります。

- 活発に使用されたり、頻繁にアクセス (読み取りまたは書き込み) されると予想されるデータ。
- 処理段階にあり、最終的にはクール ストレージ層に移行されるデータ。

クール ストレージ アクセス層の使用シナリオの例には、次のようなものがあります。

- バックアップ、アーカイブ、および障害復旧のデータセット。
- 既に頻繁に参照されなくなっているものの、アクセスされたときにはすぐに利用できることが期待されている、古いメディア コンテンツ。
- 今後処理するためにさらにデータが収集されている場合に、コスト効率の高い方法で格納する必要がある、大規模なデータ セット (たとえば、長期保存する科学データや、製造施設からの未加工のテレメトリ データ)。
- 最終的に使用可能な形式に処理した後も保持する必要がある、元の (未加工の) データ (たとえば、他の形式にコード変換した後の未加工のメディア ファイル)。
- 長期間格納しておく必要があり、ほとんどアクセスされることがない、コンプライアンスおよびアーカイブ データ (たとえば、監視カメラ映像、医療機関の古い X 線/MRI 画像、金融サービスの顧客電話の音声録音や会話記録)。

ストレージ アカウントの詳細については、「[Azure ストレージ アカウントについて](storage-create-storage-account.md)」を参照してください。

ブロックまたは追加 Blob Storage だけを必要とするアプリケーションでは、階層化されたストレージの分化された料金モデルの利点を活用するために、BLOB ストレージ アカウントを使用することをお勧めします。ただし、状況によってはそのようにできず、汎用ストレージ アカウントを使用するしかない場合もあります。たとえば、次のような場合です。

- テーブル、キュー、またはファイルを使用する必要があり、BLOB を同じストレージ アカウントに格納したい。同じ共有キーを持つこと以外に、これらを同じアカウント内に格納する技術的な利点はないことに注意してください。
- まだクラシック デプロイ モデルを使用する必要がある。BLOB ストレージ アカウントは、Azure Resource Manager デプロイメント モデルだけで利用できます。
- ページ BLOB を使用する必要がある。BLOB ストレージ アカウントはページ BLOB をサポートしていません。一般に、ページ BLOB が必要な特別な理由がなければ、ブロック BLOB を使用することをお勧めします。
- [Storage Services REST API](https://msdn.microsoft.com/library/azure/dd894041.aspx) の 2014-02-14 より前のバージョンか、クライアント ライブラリの 4.x より前のバージョンを使用していて、アプリケーションをアップグレードできない。

> [AZURE.NOTE] BLOB ストレージ アカウントは、現在、ほとんどの Azure リージョンでサポートされており、残りのリージョンでも順次サポートされていきます。利用できるリージョンの更新された一覧については、「[Azure のリージョン](https://azure.microsoft.com/regions/#services)」を参照してください。

## アクセス層間の比較

次の表では、2 つのアクセス層を比較しています。

<table border="1" cellspacing="0" cellpadding="0" style="border: 1px solid #000000;">
<col width="250"> <col width="250"> <col width="250">
<tbody>
<tr>
    <td><strong><center></center></strong></td>
    <td><strong><center>ホット ストレージ アクセス層</center></strong></td>
    <td><strong><center>クール ストレージ アクセス層</center></strong>
</tr>
<tr>
    <td><strong><center>可用性</center></strong></td>
    <td><center>99.9%</center></td>
    <td><center>99%</center></td>
</tr>
<tr>
    <td><strong><center>可用性<br>(RA-GRS 読み取り)</center></strong></td>
    <td><center>99.99%</center></td>
    <td><center>99.9%</center></td>
</tr>
<tr>
    <td><strong><center>利用料金</center></strong></td>
    <td><center>より高いストレージ コスト<br>より低いアクセスおよびトランザクション コスト</center></td>
    <td><center>より低いストレージ コスト<br>より高いアクセスおよびトランザクション コスト</center></td>
</tr>
<tr>
    <td><strong><center>最小オブジェクト サイズ<center></strong></td>
    <td colspan="2"><center>該当なし</center></td>
</tr>
<tr>
    <td><strong><center>最小ストレージ存続期間<center></strong></td>
    <td colspan="2"><center>該当なし</center></td>
</tr>
<tr>
    <td><strong><center>待機時間<br>(1 バイト目にかかる時間)<center></strong></td>
    <td colspan="2"><center>ミリ秒</center></td>
</tr>
<tr>
    <td><strong><center>スケーラビリティとパフォーマンスのターゲット<center></strong></td>
    <td colspan="2"><center>汎用ストレージ アカウントと同じ</center></td>
</tr>
</tbody>
</table>

> [AZURE.NOTE] BLOB ストレージ アカウントは、汎用ストレージ アカウントと同じパフォーマンスとスケーラビリティ ターゲットをサポートしています。詳細については、「[Azure Storage のスケーラビリティおよびパフォーマンスのターゲット](storage-scalability-targets.md)」を参照してください。

## 価格と課金

BLOB ストレージ アカウントでは、アクセス層に基づいて、Blob Storage の新しい料金モデルを採用しています。BLOB ストレージ アカウントを使用するときには、課金に関して次の点を考慮してください。

- **ストレージ コスト**: データの格納のコストは、格納されているデータの量だけでなく、アクセス層によって異なります。ギガバイトあたりのコストは、クール ストレージ アクセス層の方がホット ストレージ アクセス層よりも低くなります。
- **データ アクセス コスト**: クール ストレージ アクセス層のデータの場合、読み取りと書き込みに対して、ギガバイトあたりのデータ アクセス料金が課金されます。
- **トランザクション コスト**: どちらの層も、トランザクションごとの料金が発生します。ただし、クール ストレージ アクセス層のトランザクションあたりのコストは、ホット ストレージ アクセス層の場合よりも高くなります。
- **geo レプリケーション データ転送コスト**: GRS と RA-GRS を含む geo レプリケーションが構成されているアカウントだけに適用されます。geo レプリケーション データ転送には、ギガバイトあたりの料金がかかります。
- **送信データ転送コスト**: 送信データ転送 (Azure リージョン外に転送されるデータ) では、帯域幅使用量に対する課金がギガバイトあたりで発生します。これは、汎用ストレージ アカウントと同じです。
- **アクセス層変更**: アクセス層をクールからホットに変更すると、切り替えごとに、ストレージ アカウントに存在するすべてのデータの読み取りと同等の課金が発生します。一方、ホットからクールへのアクセス層の変更では、コストは発生しません。

> [AZURE.NOTE] ユーザーが新しいストレージ層を試し、サービス開始後の機能を検証できるように、クールからホットへのアクセス層の変更に対する課金は 2016 年 6 月 30 日までは免除されます。2016 年 7 月 1 日からは、クールからホットへのすべての切り替えに課金が適用されます。BLOB ストレージ アカウントの価格モデルの詳細については、「[Azure Storage 料金](https://azure.microsoft.com/pricing/details/storage/)」ページを参照してください。送信データ転送の価格の詳細については、「[Data Transfers (データ転送) の料金詳細](https://azure.microsoft.com/pricing/details/data-transfers/)」を参照してください。

## クイック スタート

このセクションでは、Azure ポータルを使用して、次のシナリオについて説明します。

- BLOB ストレージ アカウントの作成方法。
- BLOB ストレージ アカウントの管理方法。

### Azure ポータルの使用

#### Azure ポータルを使用した BLOB ストレージ アカウントの作成

1. [Azure ポータル](https://portal.azure.com)にサインインします。

2. ハブ メニューで、**[新規]**、**[データ + ストレージ]**、**[ストレージ アカウント]** の順にクリックします。

3. ストレージ アカウントの名前を入力します。

4. デプロイメント モデルとして **[リソース マネージャー]** を選択します。

5. ストレージ アカウントの種類として **[BLOB ストレージ]** を選択します。

6. アクセス層として **[ホット]** または **[クール]** を選択します。既定値は **[ホット]** です。

7. ストレージ アカウントのレプリケーション オプション (**[LRS]**、**[GRS]**、または **[RA-GRS]**) を選択します。既定値は **[RA-GRS]** です。Azure Storage のレプリケーション オプションの詳細については、[Azure Storage のレプリケーション](storage-redundancy.md)に関するページをご覧ください。

8. 新しいストレージ アカウントを作成するサブスクリプションを選択します。

9. 新しいリソース グループを指定するか、既定のリソース グループを選択します。リソース グループの詳細については、[Azure ポータルを使用した Azure リソースの管理](../azure-portal/resource-group-portal.md)に関するページを参照してください。

10. ストレージ アカウントの地理的な場所を選択します。

11. **[作成]** をクリックしてストレージ アカウントを作成します。

#### Azure ポータルを使用した BLOB ストレージ アカウントでのアクセス層の変更

1. [Azure ポータル](https://portal.azure.com)にサインインして、ストレージ アカウントに移動します。

2. **[すべての設定]**、**[構成]** の順にクリックすると、アカウント構成を表示したり変更したりできます。

3. アクセス層として **[ホット]** または **[クール]** を指定します。

    > [AZURE.NOTE] アクセス層を変更すると、追加料金が発生することがあります。詳細については、「[価格と課金](storage-blob-storage-tiers.md#pricing-and-billing)」セクションを参照してください。

## BLOB ストレージ アカウントへの移行

このセクションの目的は、ユーザーが BLOB ストレージ アカウントにスムーズに移行できるように手助けすることです。BLOB ストレージ アカウントは、ブロック BLOB と追加 BLOB の格納に特化しています。テーブル、キュー、ファイル、ディスク、および BLOB を格納することができる既存の汎用ストレージ アカウントは、BLOB ストレージ アカウントに変換することはできません。つまり、ストレージ層を使用するには、新しい BLOB ストレージ アカウントを作成し、既存のデータを新たに作成したアカウントに移行する必要があります。

### 既存のデータの移行の計画

データを BLOB ストレージ アカウントに移動する場合は、クール ストレージ アクセス層の利点を利用して、使用頻度の低いデータに対するストレージ コストを節約したいものと思われます。BLOB ストレージ アカウントのクール ストレージ アクセス層へのデータ移行を計画する際には、まず、既存の使用パターンを評価して、BLOB ストレージ アカウントへの移行にメリットがあるかどうかを判断します。一般に、以下のことを調べる必要があります。

- ストレージの消費パターン – どのくらいの量のデータが格納され、その量は月ごとにどのように変化するか。
- ストレージ アクセス パターン – アカウントに対してどのくらいの量のデータの読み取りや書き込みがあるか (新規データも含めて)。 データ アクセスにはどのトランザクションがどれくらい使用されているか。

既存のストレージ アカウントを監視し、このデータを収集するには、「[Azure のストレージ メトリックの有効化とメトリック データの表示](storage-enable-and-view-metrics.md)」を参照してください。次にこのデータを使用して、[Azure Storage の料金計算ツール](https://azure.microsoft.com/pricing/calculator/?scenario=data-management)でコストを見積もります。

### 既存のデータの移行

オンプレミス ストレージ デバイス、サード パーティのクラウド ストレージ プロバイダー、または Azure の既存の汎用ストレージ アカウントから、既存のデータを BLOB ストレージ アカウントに移行するには、以下の方法を使用できます。

#### AzCopy

AzCopy は、Azure Storage との間で高パフォーマンスのデータ コピーを行うように設計された Windows コマンドライン ユーティリティです。AzCopy を使用して、既存の汎用ストレージ アカウントから BLOB ストレージ アカウントにデータをコピーできます。またオンプレミス ストレージ デバイスから BLOB ストレージ アカウントにデータをアップロードすることもできます。

詳細については、「[AzCopy コマンド ライン ユーティリティを使用してデータを転送する](storage-use-azcopy.md)」を参照してください。

#### データ移動ライブラリ

Azure Storage Data Movement Library for .NET は、AzCopy を動作させているコア データ移動フレームワークに基づいています。ライブラリは、AzCopy と同じように、高パフォーマンスで信頼性が高く簡単なデータ転送操作ができるように設計されています。そのため、AzCopy によって提供される機能の利点をアプリケーションでネイティブに活用でき、AzCopy の外部インスタンスを実行したり監視したりする必要はありません。

詳細については、[Azure Storage Data Movement Library for .Net](https://github.com/Azure/azure-storage-net-data-movement) に関するページを参照してください。

#### REST API またはクライアント ライブラリ

Azure クライアント ライブラリのいずれかまたは Azure ストレージ サービス REST API を使用して、データを BLOB ストレージ アカウントに移行するためのカスタム アプリケーションを作成することができます。Azure Storage には、.NET、Java、C++、Node.js、PHP、Ruby、Python などの複数の言語とプラットフォーム用の豊富なクライアント ライブラリが用意されています。クライアント ライブラリは、再試行ロジック、ログ、並列アップロードといった高度な機能を提供します。また、REST API を直接使用して開発することもでき、HTTP/HTTPS 要求を行うどの言語からでも呼び出すことができます。

詳細については、[Azure Blob Storage の概要](storage-dotnet-how-to-use-blobs.md)に関するページを参照してください。

> [AZURE.NOTE] クライアント側の暗号化を使用して暗号化された BLOB には、その BLOB と共に格納される暗号化関連メタデータが格納されます。すべてのコピー メカニズムで、BLOB メタデータと、特に暗号化に関連するメタデータが必ず保持されることがきわめて重要です。このメタデータなしで BLOB をコピーした場合、BLOB コンテンツを再度取得できなくなります。暗号化関連メタデータの詳細については、[Azure Storage のクライアント側の暗号化](storage-client-side-encryption.md)に関するページを参照してください。

## FAQ

1. **既存のストレージ アカウントを引き続き使用できますか。**

    はい。既存のストレージ アカウントはまだ使用可能であり、料金や機能も変更されていません。それらにはアクセス層を選択する機能がなく、今後も階層化機能は導入されません。

2. **BLOB ストレージ アカウントは、いつ、どのようなときに使用し始めればよいですか。**

    BLOB ストレージ アカウントは、BLOB を格納するために特化しており、新しい BLOB 主体の機能を導入できます。今後、BLOB ストレージ アカウントは、このアカウントの種類に基づいて階層型ストレージや階層化などの新たな機能が導入されるため、BLOB を格納する方法として推奨されるようになります。ただし、いつ移行するかは、ビジネス要件に応じてお客様が判断する必要があります。

3. **既存のストレージ アカウントを BLOB ストレージ アカウントに変換できますか。**

    いいえ。BLOB ストレージ アカウントは別種のストレージ アカウントであり、上で説明したように、新規に作成してデータを移行する必要があります。

4. **同じアカウントの両方のアクセス層にオブジェクトを格納することはできますか。**

    アクセス層属性はアカウント レベルで設定され、そのアカウント内のすべてのオブジェクトに適用されます。オブジェクト レベルでアクセス層を設定することはできません。

5. **自分の BLOB ストレージ アカウントのアクセス層を変更できますか。**

    はい。ストレージ アカウントのアクセス層は、変更することができます。アカウント レベルでアクセス層を変更すると、アカウントに格納されているすべてのオブジェクトに適用されます。ホットからクールへのアクセス層の変更では、課金は発生しません。一方、クールからホットへの変更では、アカウント内のすべてのデータの読み取りに対して GB あたりのコストが発生します。

6. **自分の BLOB ストレージ アカウントのアクセス層をどのくらいの頻度で変更できますか。**

    アクセス層の変更頻度に対して制限は設定していませんが、アクセス層をクールからホットに変更すると、かなりの課金が発生することに注意してください。アクセス層を頻繁に変更することは、お勧めしません。

7. **クール ストレージ アクセス層内の BLOB の動作は、ホット ストレージ アクセス層内の場合と異なりますか。**

    ホット ストレージ アクセス層内の BLOB の待機時間は、汎用ストレージ アカウントの BLOB と同じになります。クール ストレージ アクセス層内の BLOB の待機時間は、汎用ストレージ アカウントの BLOB と類似しています (ミリ秒)。

    クール ストレージ アクセス層内の BLOB は、ホット ストレージ アクセス層に格納された BLOB よりも可用性サービス レベル (SLA) が若干低くなります。詳細については、[ストレージの SLA](https://azure.microsoft.com/support/legal/sla/storage) に関するページを参照してください。

8. **BLOB ストレージ アカウントにページ BLOB と仮想マシンのディスクを保存できますか。**

    BLOB ストレージ アカウントは、ブロック BLOB と追加 BLOB のみをサポートします。ページ BLOB はサポートしません。Azure の仮想マシンのディスクではページ BLOB が使用されるため、BLOB ストレージ アカウントは仮想マシンのディスクの格納に使用できません。ただし、仮想マシンのディスクのバックアップを BLOB ストレージ アカウント内にブロック BLOB として格納することはできます。

9. **BLOB ストレージ アカウントを使用するには、既存のアプリケーションを変更する必要がありますか。**

    BLOB ストレージ アカウントは、ブロック BLOB と追加 BLOB に関して、汎用ストレージ アカウントとの100% の API 整合性を備えています。アプリケーションでブロック BLOB または追加 BLOB が使用されており、[Storage Services REST API](https://msdn.microsoft.com/library/azure/dd894041.aspx) の 2014-02-14 バージョン以降を使用している限り、アプリケーションは機能します。プロトコルの古いバージョンを使用している場合は、新しいバージョンを使用して両方の種類のストレージ アカウントとシームレスに動作するように、アプリケーションを更新する必要があります。一般に、どの種類のストレージ アカウントを使用するかにかかわらず、常に最新バージョンを使用することをお勧めしています。

10. **ユーザー エクスペリエンスに変更はありますか。**

    BLOB ストレージ アカウントは、ブロック BLOB と追加 BLOB の格納に関しては汎用ストレージ アカウントとよく似ており、高い持続性、可用性、スケーラビリティ、パフォーマンス、セキュリティなどの Azure Storage のすべての主要機能をサポートしています。BLOB ストレージ アカウントに固有の機能および制限と、上に記載したアクセス層を除き、他のすべては同じままです。

## 次のステップ

### BLOB ストレージ アカウントを評価する

[リージョン別に BLOB ストレージ アカウントの可用性を確認する](https://azure.microsoft.com/regions/#services)

[Azure Storage のメトリックを有効にして現在のストレージ アカウントの使用状況を評価する](storage-enable-and-view-metrics.md)

[リージョン別に Blob Storage の価格を確認する](https://azure.microsoft.com/pricing/details/storage/)

[データ転送の価格を確認する](https://azure.microsoft.com/pricing/details/data-transfers/)

### BLOB ストレージ アカウントの利用を開始する

[Azure Blob Storage を使用する](storage-dotnet-how-to-use-blobs.md)

[Azure Storage との間でのデータの移動](storage-moving-data.md)

[AzCopy コマンド ライン ユーティリティを使用してデータを転送する](storage-use-azcopy.md)

<!---HONumber=AcomDC_0511_2016-->