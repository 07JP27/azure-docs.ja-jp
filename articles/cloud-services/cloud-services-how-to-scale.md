<properties
	pageTitle="ポータルでのクラウド サービスの自動スケール | Microsoft Azure"
	description="(クラシック) クラシック ポータルを使用して、Azure でクラウド サービスの Web ロールおよび worker ロールの自動スケール ルールを構成する方法について説明します。"
	services="cloud-services"
	documentationCenter=""
	authors="Thraka"
	manager="timlt"
	editor=""/>

<tags
	ms.service="cloud-services"
	ms.workload="tbd"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="06/22/2016"
	ms.author="adegeo"/>


# クラウド サービスの自動スケールの方法

> [AZURE.SELECTOR]
- [Azure ポータル](cloud-services-how-to-scale-portal.md)
- [Azure クラシック ポータル](cloud-services-how-to-scale.md)

Azure クラシック ポータルの [スケール] ページで、Web ロールまたは worker ロールの規模を手動で設定したり、CPU の負荷やメッセージ キューに基づいて自動スケールを有効にしたりすることができます。

>[AZURE.NOTE] この記事では、クラウド サービスの Web ロールと worker ロールについて説明します。仮想マシンを直接作成した場合 (クラシック)、その仮想マシンはクラウド サービスでホストされます。この情報の一部は、このような種類の仮想マシンに適用されます。仮想マシンの可用性セットのスケーリングは、実際には構成したスケール ルールに基づいて、仮想マシンをアップダウンしているだけです。仮想マシンと可用性セットの詳細については、[仮想マシンの可用性の管理](../virtual-machines/virtual-machines-windows-classic-configure-availability.md)に関するページをご覧ください

アプリケーションの規模の設定を構成する前に、以下に示す情報を考慮してください。

- 規模設定はコア使用量の影響を受けます。ロール インスタンスが大きいと、使用するコアも多くなります。アプリケーションの規模の設定は、サブスクリプションのコア数の制限内でのみ行うことができます。たとえば、サブスクリプションにコア数 20 の制限があり、アプリケーションを 2 つの中規模のクラウド サービスで実行している場合 (合計 4 コア)、サブスクリプション内の他のクラウド サービスのデプロイメントは 16 コアまでしかスケール アップできません。サイズの詳細については、「[クラウド サービスのサイズ](cloud-services-sizes-specs.md)」をご覧ください。

- メッセージのしきい値に基づいてアプリケーションの規模を設定する前に、キューを作成してロールに関連付ける必要があります。詳細については、「[How to use the Queue Storage Service ( Queue Storage サービスの使用方法)](../storage/storage-dotnet-how-to-use-queues.md)」を参照してください。

- クラウド サービスにリンクされたリソースの規模を設定できます。リソースのリンクの詳細については、「[方法: クラウド サービスに対するリソースのリンク](cloud-services-how-to-manage.md#how-to-link-a-resource-to-a-cloud-service)」を参照してください。

- アプリケーションの高可用性を可能にするには、アプリケーションを 2 つ以上のロール インスタンスと共にデプロイする必要があります。詳細については、「[サービス レベル アグリーメント](https://azure.microsoft.com/support/legal/sla/)」を参照してください。



## スケールのスケジュール

既定では、すべてのロールが特定のスケジュールに従っていません。そのため、変更した設定はすべての時間およびすべての日に年間を通じて適用されます。必要に応じて、次の項目に対して手動スケールまたは自動スケールを設定できます。

- 平日の日中
- 週末
- 平日の夜間
- 平日の午前
- 特定の日付
- 特定の日付範囲

これは、[Azure クラシック ポータル](https://manage.windowsazure.com/)の **[Cloud Services]** > **クラウド サービスの名前** > **[スケール]** > **[運用環境またはステージング]** ページで構成します。

変更する各ロールの **[スケジュール時間の設定]** ボタンをクリックします。

![スケジュールに基づくクラウド サービスの自動スケール][scale_schedules]



## 手動でのスケーリング

**[スケール]** ページで、クラウド サービスで実行中のインスタンスの数を手動で増減できます。これは、作成した各スケジュールまたはスケジュールを作成していない場合はすべての時間に対して構成されます。

1. [Azure クラシック ポータル](https://manage.windowsazure.com/)で、**[Cloud Services]** をクリックし、クラウド サービスの名前をクリックしてダッシュボードを開きます。

    > [AZURE.TIP] クラウド サービスが表示されない場合、**[運用]** から **[ステージング]**、またはその逆に変更する必要があります。

2. **[スケール]** をクリックします。

3. スケール オプションを変更するスケジュールを選択します。スケジュールを定義していない場合、既定値は *[スケジュールされた時間なし]* です。

4. **[メトリックによるスケール]** セクションを探し、**[なし]** を選択します。これは、すべてのロールの既定の設定です。

5. クラウド サービス内の各ロールには、使用するインスタンスの数を変更するスライダーがあります。

    ![クラウド サービス ロールの手動スケール][manual_scale]

    追加のインスタンスが必要な場合、[クラウド サービスの仮想マシン サイズ](cloud-services-sizes-specs.md)を変更しなければならない場合があります。

6. **[保存]** をクリックします。選択に応じて、ロール インスタンスが追加または削除されます。

>[AZURE.TIP] ![][tip_icon] が表示される場合は、マウスをそこに移動すると、特定の設定の動作に関するヘルプを入手することができます。


## 自動スケール - CPU

これは、平均 CPU 使用率 (%) が所定のしきい値を上回った場合、または下回った場合にスケーリングを行います。ロール インスタンスは作成または削除されます。

1. [Azure クラシック ポータル](https://manage.windowsazure.com/)で、**[Cloud Services]** をクリックし、クラウド サービスの名前をクリックしてダッシュボードを開きます。

    > [AZURE.TIP] クラウド サービスが表示されない場合、**[運用]** から **[ステージング]**、またはその逆に変更する必要があります。

2. **[スケール]** をクリックします。

3. スケール オプションを変更するスケジュールを選択します。スケジュールを定義していない場合、既定値は *[スケジュールされた時間なし]* です。

4. **[メトリックによるスケール]** セクションを探し、**[CPU]** を選択します。

5. ここで、ロール インスタンス、(スケール アップをトリガーするための) ターゲット CPU の使用率、およびスケール アップ/ダウンするインスタンスの数の最小範囲と最大範囲を構成できます。

![CPU 負荷によるクラウド サービス ロールのスケール][cpu_scale]

>[AZURE.TIP] ![][tip_icon] が表示される場合は、マウスをそこに移動すると、特定の設定の動作に関するヘルプを入手することができます。





## 自動スケール - キュー

これは、キュー内のメッセージの数が所定のしきい値を上回った場合、または下回った場合にスケーリングを行います。ロール インスタンスは作成または削除されます。

1. [Azure クラシック ポータル](https://manage.windowsazure.com/)で、**[Cloud Services]** をクリックし、クラウド サービスの名前をクリックしてダッシュボードを開きます。

    > [AZURE.TIP] クラウド サービスが表示されない場合、**[運用]** から **[ステージング]**、またはその逆に変更する必要があります。

2. **[スケール]** をクリックします。

3. **[メトリックによるスケール]** セクションを探し、**[CPU]** を選択します。

4. ここで、ロール インスタンス、各インスタンスに対して処理するキューおよびキュー メッセージの量、およびスケール アップ/ダウンするインスタンスの数の最小範囲と最大範囲を構成できます。

![メッセージ キューによるクラウド サービス ロールのスケール][queue_scale]

>[AZURE.TIP] ![][tip_icon] が表示される場合は、マウスをそこに移動すると、特定の設定の動作に関するヘルプを入手することができます。


## リンク済みリソースの規模の設定

多くの場合、ロールの規模を設定するときに、アプリケーションが使用しているデータベースの規模もあわせて変更するのが得策です。クラウド サービスにデータベースをリンクしている場合は、該当するリンクをクリックして、そのリソースのスケール設定を表示することができます。

1. [Azure クラシック ポータル](https://manage.windowsazure.com/)で、**[Cloud Services]** をクリックし、クラウド サービスの名前をクリックしてダッシュボードを開きます。

    > [AZURE.TIP] クラウド サービスが表示されない場合、**[運用]** から **[ステージング]**、またはその逆に変更する必要があります。

2. **[スケール]** をクリックします。

3. **[リンク済みリソース]** セクションを探し、**[このデータベースのスケールを管理する]** をクリックします。

    > [AZURE.NOTE] **[リンク済みリソース]** セクションが表示されない場合、リンク済みリソースがない可能性があります。

![][linked_resource]


[manual_scale]: ./media/cloud-services-how-to-scale/manual-scale.png
[queue_scale]: ./media/cloud-services-how-to-scale/queue-scale.png
[cpu_scale]: ./media/cloud-services-how-to-scale/cpu-scale.png
[tip_icon]: ./media/cloud-services-how-to-scale/tip.png
[scale_schedules]: ./media/cloud-services-how-to-scale/schedules.png
[scale_popup]: ./media/cloud-services-how-to-scale/schedules-dialog.png
[linked_resource]: ./media/cloud-services-how-to-scale/linked-resources.png

<!---HONumber=AcomDC_0622_2016-->