<properties
	pageTitle="複数の仮想マシンの作成 | Microsoft Azure"
	description="Windows で複数の仮想マシンを作成するためのオプション"
	services="virtual-machines-windows"
	documentationCenter=""
	authors="gbowerman"
	manager="timlt"
	editor=""
	tags="azure-resource-manager"/>

<tags
	ms.service="virtual-machines-windows"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="05/02/2016"
	ms.author="guybo"/>

# 複数の Azure 仮想マシンの作成

似通った仮想マシンを大量に作成する必要のあるシナリオは数多く見られます。これには、ハイパフォーマンス コンピューティング (HPC)、大規模なデータ分析、スケーラブルで通常ステートレスの中間層またはバックエンド サーバー (Web サーバーなど)、分散データベースなどがあります。

この記事では、一連の VM を単に手動で作成するのではなく (多数の VM を作成する必要があるためスケールが上手く行かない場合に)、Azure で複数の VM を作成するために使用できるオプションについて説明します。

似通った多数の VM の作成を最適化する方法の 1 つとして、_Resource ループ_の Azure Resource Manager 構築を使用します。

## Resource ループ

Resource ループは Azure Resource Manager テンプレートの簡略化された構文で、これを使用して、ループ内で同様に構成された一連のリソースを作成することができます。リソース ループを使用して、複数のストレージ アカウント、ネットワーク インターフェイス、仮想マシンなども作成することができます。リソース ループについて詳しくは、[Resource ループを使用した可用性セットでの VM の作成に関する記事](https://azure.microsoft.com/documentation/templates/201-vm-copy-index-loops/)をご覧ください。

## スケールの課題

リソース ループは、規模に応じたクラウド インフラストラクチャのより簡単な構築や、より簡潔なテンプレートを実現しますが、いくつかの課題もあります。たとえば、リソース ループを使って 100 個の仮想マシンを作成した場合、VM を定義するときに NIC を VM およびストレージ アカウントに関連付ける必要があります。ストレージ アカウントの数と VM の数も違えば、リソース ループのサイズも異なります。これらは解決可能な問題であるとはいえ、規模に応じて複雑さが大幅に増します。

また、インフラストラクチャを柔軟にスケーリングする必要がある場合 (ワークロードに応じて VM の数を自動的に増やすまたは減らす自動スケールなど) にも課題が発生します。VM には、さまざまな数 (スケールアウトやスケールイン) に対応する統合されたメカニズムが用意されていません。VM を削除してスケールインする場合、VM を複数の更新ドメインや障害ドメインに分散させて高可用性を保証することも難題の 1 つです。

最後に、リソース ループは簡略化された構文であり、これを使用した場合、リソースを作成する複数の呼び出しが基になるファブリックに対して実行されます。複数の呼び出しが同様のリソースを作成する場合、Azure ではこの設計に基づいた改善や、デプロイの信頼性とパフォーマンスを向上させるための最適化が暗黙的に行われます。このとき役立つのが_仮想マシン スケール セット_です。

## 仮想マシン スケール セット

仮想マシン スケール セットは、同一の VM のセットをデプロイおよび管理するための Azure コンピューティング リソースです。すべての VM を同様に構成する場合、VM スケール セットは、セット内の VM 数を変更するだけで簡単にスケールインおよびスケールアウトされ、またワークロードのニーズに応じて自動スケールするように構成できます。

コンピューティング リソースをスケール アウトしたりスケール インしたりする必要のあるアプリケーションでは、複数の障害ドメインと更新ドメインに対してスケール操作が暗黙的にバランシングされます。

複数のリソース (NIC、VM など) を関連付ける代わりに、スケール セットにはネットワーク、ストレージ、仮想マシン、拡張プロパティがあるため、これらを使用して一元的に構成することができます。

VM スケール セットの概要については[製品ページ](https://azure.microsoft.com/services/virtual-machine-scale-sets/)を、また詳細については、[こちらのドキュメント](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/)をご覧ください。

<!---HONumber=AcomDC_0504_2016-->