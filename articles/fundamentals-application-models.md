<properties umbracoNaviHide="0" pageTitle="アプリケーション モデル" metaKeywords="Azure, Azure, application model, Azure application model, development model, Azure development model, hosted service, Azure hosted service, web role, worker role" description="Azure ホステッド サービスのアプリケーション モデルについて説明します。中核となる概念、設計の考慮事項を理解して、アプリケーションを定義および構成し、スケーリングを実行します。" urlDisplayName="Application Model" headerExpose="" footerExpose="" disqusComments="1" title="アプリケーション モデル" authors="robb" manager="johndaw" />

<tags ms.service="multiple" ms.workload="multiple" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="robb" />

# Azure 実行モデル

Azure にはアプリケーションを実行するための各種の実行モデルがあります。提供する一連のサービスがそれぞれ異なるので、どれを選択するかは何をするかによって決まります。この記事では、この 3 種類の実行モデルすべてについて、それぞれのテクノロジを説明すると共に、どのような場合に使用するかの例を示します。

## 目次

-   [仮想マシン][仮想マシン]
-   [Web サイト][Web サイト]
-   [Cloud Services][Cloud Services]
-   [使用するモデルを選択する][使用するモデルを選択する]

## <span id="VMachine"></span></a>仮想マシン

Azure の仮想マシンを使用すると、開発者、IT 担当者、その他のユーザーがクラウドで仮想マシンを作成し、使用することができます。*"サービスとしてのインフラストラクチャ (IaaS)"* として提供されるこのテクノロジには、さまざまな利用方法があります。[図 1][図 1] に基本的な構成要素を示します。

<a name="Fig1"></a>![01\_CreatingVMs][01\_CreatingVMs]

**図 1: Azure の仮想マシンはサービスとしてのインフラストラクチャ (IaaS) を提供する。**

この図が示すように、仮想マシンは Azure 管理ポータルまたは REST ベースの Azure サービス管理 API を使用して作成できます。管理ポータルは Internet Explorer、Mozilla、Chrome などの一般的なブラウザーからアクセスできます。REST API の場合は、Windows、Linux、および Macintosh システム用のクライアント スクリプト ツールを Microsoft が提供します。その他のソフトウェアも自由にこのインターフェイスを使用できます。

プラットフォームにアクセスする方法にかかわらず、新しい VM を作成するには、VM のイメージ用に仮想ハード ディスク (VHD) を選択する必要があります。選択した VHD は Azure の BLOB に格納されます。

VHD の使用を開始するには、2 つの方法があります。

1.  独自の VHD をアップロードします。
2.  Microsoft およびそのパートナーが Azure の仮想マシン ギャラリーや Microsoft のオープン ソース [VMDepot][VMDepot] Web サイトで提供している VHD を使用します。

ギャラリーや VMDepot の VHD には、Microsoft および Linux のクリーンなオペレーティング システム イメージと Microsoft およびサード パーティ製品がインストールされたイメージが含まれています。オプションは常に増え続けています。例には、以下のさまざまなバージョン、エディション、および構成が含まれます。

-   Windows Server
-   Suse、Ubuntu、CentOS などの Linux サーバー
-   SQL Server
-   BizTalk Server
-   SharePoint Server

VHD と同時に、新しい VM のサイズも指定します。VM の各サイズに関する情報の詳細は、[Azure ライブラリ][Azure ライブラリ]に示されています。

-   **XS**。共用コアと 768MB のメモリが搭載されています。
-   **S**。1 つのコアと 1.75 GB のメモリが搭載されています。
-   **M**。2 つのコアと 3.5 GB のメモリが搭載されています。
-   **L**。4 つのコアと 7 GB のメモリが搭載されています。
-   **XL**。8 つのコアと 14 GB のメモリが搭載されています。
-   **A6**。4 つのコアと 28 GB のメモリが搭載されています。
-   **A7**。8 つのコアと 56 GB のメモリが搭載されています。

最後に、新しい VM を実行する Azure データセンターを米国、ヨーロッパ、アジアから選びます。

VM を実行すると、時間単位で支払い、VM を削除したときに支払いを停止します。料金は VM の使用度ではなく、時間のみを基準として決まります。1 時間アイドル状態の VM も、負荷の大きい VM と同じ料金が課されます。

実行中の各 VM には、BLOB に格納された *OS* ディスクが関連付けられています。ギャラリーの VHD を使用して VM を作成すると、その VHD が VM の OS ディスクにコピーされます。実行中の VM のオペレーティング システムに加えた変更は、ここに保存されます。たとえば、Windows レジストリを変更するようなアプリケーションをインストールした場合は、その変更が VM の OS ディスクに保存されます。次回その OS ディスクから VM を作成すると、VM は前回終了したときと同じ状態で実行を続けます。ギャラリーに格納されている VHD の場合は、Microsoft が必要に応じてオペレーティング システム パッチなどの更新プログラムを適用します。一方、ユーザーの OS ディスクに保存されている VHD の場合 (既定では Windows Update はオンになっていますが)、これらの更新プログラムを適用する責任はユーザーにあります。

実行中の VM を変更し、Sysprep ツールを使用してキャプチャすることもできます。Sysprep では、マシン名などの特定の情報が削除されるため、VHD イメージを使用して、同じ一般的な構成で追加の VM を作成できます。これらのイメージは、アップロードしたイメージと共に管理ポータルに格納されます。これにより、これらのイメージを、VM を追加する際の開始点として使用することができます。

仮想マシンは、作成した各 VM をホスティングしているハードウェアの監視も行います。VM を実行している物理サーバーが故障すると、プラットフォームがこれを通知し、同じ VM を別のマシンで開始します。また、適切なライセンスがある場合は、変更された VHD を OS ディスクからコピーして、内部設置型データセンターや別のクラウド プロバイダーなど、他の場所でそれを実行できます。

OS ディスクに加えて、VM には 1 つまたは複数のデータ ディスクがあります。各データ ディスクは VM ではマウントされたディスク ドライブのように見えますが、それぞれのコンテンツは実際には BLOB に保存されています。データ ディスクに書き込まれた内容はすべて、基盤となる BLOB に永続的に保存されます。すべての BLOB と同様に、Azure は 1 つのデータセンター内およびデータセンター間でこれらを複製して、障害時に備えます。

VM の実行の管理は、管理ポータル、PowerShell、その他のスクリプト ツールを使用するか、REST API から直接行うことができます。(実際には、管理ポータルを通してできる操作はすべて、この API からプログラミングによって実現できます。)RightScale や ScaleXtreme などの Microsoft パートナーも、REST API を基にした管理サービスを提供しています。

Azure の仮想マシンは、さまざまな方法で利用できます。Microsoft が対象とする主なシナリオは、以下を含みます。

-   **開発とテスト用の VM。** 開発グループは一般に、アプリケーションを作成するための特定の構成を備えた VM を必要とします。Azure の仮想マシンは、このような VM を作成し、使用して、不要になったときに削除できる簡単で経済的な方法です。
-   **クラウドでのアプリケーションの実行。** 一部のアプリケーションは、経済的なパブリック クラウドでの実行が適しています。たとえば、需要が急増しているアプリケーションについて考えてみます。自社のデータセンターでこのアプリケーションを実行するためにマシンを多数購入しても、その大半が未使用のままになりがちです。このアプリケーションを Azure で実行すると、必要なときにだけ VM の追加料金を支払い、需要が減ったときにはシャットダウンすることができます。また、オンデマンドのコンピューティング リソースをコミットメントなしに早急に必要とするスタートアップ企業にとっても、Azure は最も適した選択肢と言えます。
-   **自社のデータセンターをパブリック クラウドに拡張する。** Azure の仮想ネットワークがあれば、Azure の VM グループが内部設置型ネットワークの一部のように見える仮想ネットワーク (VNET) を作成できます。これにより、SharePoint などのアプリケーションを Azure で実行できます。この方法を使用すると、自社のデータセンターで実行するよりも簡単に展開できることや費用が安くなることもあります。
-   **障害回復。** めったに利用しないバックアップ データセンターの料金を払い続けるよりも、IaaS ベースの障害回復を使用すると、必要なコンピューティング リソースを本当に必要なときにだけ支払うことが可能です。たとえば、プライマリ データセンターが故障した場合、Azure で実行する VM を作成して、基幹的なアプリケーションを実行し、その後、不要になったときにはシャットダウンできます。

ほかにも多くの使用例が考えられますが、これらは Azure の仮想マシンの使用方法を示すよい例です。

### VM のグループ化:Cloud Services

Azure の仮想マシンで新しい VM を作成するときには、スタンドアロンで実行するか、または VM グループの一部として "*クラウド サービス"* で一緒に実行するかを選択できます。(名前は似ていますが、クラウド サービスの IaaS の概念を Azure の PaaS (サービスとしてのプラットフォーム) テクノロジと混同しないでください。この 2 つは異なります)スタンドアロンの VM はそれぞれに独自のパブリック IP アドレスが割り当てられますが、同じクラウド サービスのすべての VM には 1 つのパブリック IP アドレスからアクセスします。[図 2][図 2] に、このしくみを示します。

<a name="Fig2"></a>![02\_CloudServices][02\_CloudServices]

**図 2: スタンドアロンの VM にはそれぞれ独自のパブリック IP アドレスが割り当てられるが、クラウド サービスにグループ化された VM は 1 つのパブリック IP アドレスで公開される。**

たとえば、単純なアプリケーションを作成してテストするために仮想マシンを作成する場合は、スタンドアロンの VM を使用します。一方、Web フロント エンド、データベース、さらに中間層がある多層アプリケーションを作成している場合は、図 2 が示すように複数の VM をクラウド サービスに接続します。

VM をクラウド サービスにグループ化すると、他のオプションも使用できます。Azure は同じクラウド サービス内の VM に負荷分散を提供して、VM 間でユーザー要求を分散します。この方法で接続している VM は、Azure データセンター内でローカル ネットワークを介して直接相互通信することもできます。

同じクラウド サービス内の VM を、1 つまたは複数の*可用性セット*にグループ化することもできます。これがなぜ重要かを理解するには、複数のフロントエンド VM を実行する Web アプリケーションを考えてください。これらすべての VM を同じ物理マシンやマシンの同じラックに展開した場合は、ハードウェア 1 台が故障すると、すべてにアクセスできなくなる可能性があります。一方、これらの VM を可用性セットにグループ化した場合は、どの VM も単一の障害点を共有しないように、データセンターに展開されます。

### シナリオ: SQL Server でアプリケーションを実行する

Azure の仮想マシンのしくみを理解するには、いくつかのシナリオを詳しく見てみることをお勧めします。たとえば、Azure で実行する信頼性の高いスケーラブルな Web アプリケーションを作成するとします。これを行う 1 つの方法は、アプリケーションのロジックを 1 つまたは複数の Azure VM で実行してから、データ管理に SQL Server を使用することです。[図 3][図 3] に、このしくみを示します。

<a name="Fig3"></a>![03\_AppUsingSQLServer][03\_AppUsingSQLServer]

**図 3: Azure の仮想マシンで実行しているアプリケーションはストレージに SQL Server を使用できる。**

この例では、両方の種類の VM がギャラリー内の標準 VHD から作成されます。アプリケーションのロジックは Windows Server 2008 R2 で実行するので、開発者はこの VHD から VM を 3 個作成してから、それぞれにアプリケーションをインストールします。これらの VM はすべて同じクラウド サービス内にあるため、ハードウェアの負荷分散を設定して、VM 間でユーザー要求を分散します。また、SQL Server 2012 が含まれているギャラリーの VHD から VM を 2 個作成することもできます。VM が実行したら、各インスタンスで SQL Server が自動フェールオーバー付きデータベース ミラーリングを使用するように設定します。これは必須ではありません (アプリケーションは SQL Server のインスタンスを 1 つだけ使用することもできます) が、この方法によって信頼性が向上します。

### シナリオ: SharePoint ファームを実行する

SharePoint ファームを作成したいと考えてはいても、自社のデータセンターではファームを実行したくない場合もあります。たとえば、内部設置型データセンターにリソースが足りない場合や、ファームを作成する事業体が社内の IT グループとかかわりたくない場合などです。このような状況では、Azure の仮想マシンで SharePoint を実行するのが合理的です。[図 4][図 4] に、このしくみを示します。

<a name="Fig4"></a>![04\_SharePointFarm][04\_SharePointFarm]

**図 4: Azure の仮想マシンを使用すると、クラウドで SharePoint ファームを実行できる。**

SharePoint ファームには複数のコンポーネントがあり、それぞれが別の VHD から作成された Azure の仮想マシンを実行しています。以下が必要になります。

-   Microsoft SharePoint。ギャラリーに試用イメージがあります。また組織が独自の VHD を用意しています。
-   Microsoft SQL Server。SharePoint は SQL Server に依存しているので、組織はギャラリーの標準 VHD から SQL Server 2012 を実行する VM を作成します。
-   Windows Server Active Directory。SharePoint には Active Directory も必要です。組織はギャラリーの Windows Server イメージを使用してクラウドでドメイン コントローラーを作成します。これは必須ではありません。内部設置型のドメイン コントローラーを使用することもできますが、SharePoint は頻繁に Active Directory と対話するため、ここで示す方法の方がパフォーマンスが向上します。

図には表示されていませんが、この SharePoint ファームは Azure の仮想ネットワークを使用して内部設置型のネットワークに接続しています。そのため、VM とその中のアプリケーションが、そのネットワークを使用している人々にはローカルのように見えます。

これらの例が示すように、Azure の仮想マシンは、クラウドでの新しいアプリケーションの作成と実行、既存のアプリケーションの実行、またはその他の方法で利用できます。どのオプションを選択しても、テクノロジのゴールは同じで、パブリック クラウド コンピューティングに汎用基盤を提供することです。

## <span id="WebSites"></span></a>Web サイト

Web テクノロジはさまざまな方法で使用されています。企業は Web サイトのプレゼンスを移行または設定して毎週数百万回のヒットに対応できるようにし、世界規模に複数のデータ センターを展開することが必要になる場合があります。Web デザイン代理店なら、開発者チームと協力して、数千人のユーザーを処理できるカスタム Web アプリケーションを構築します。場合によっては、企業の開発者は、その企業の Active Directory に基づいて認証されたユーザーのクラウドに関する経費報告書を追跡するように、アプリケーションを設定する必要があります。IT コンサルタントなら、人気のあるオープン ソース アプリケーションを使用して、スモール ビジネス用のコンテンツ管理システムをセットアップします。
これらはすべて Azure の仮想マシンを使用して達成できます。しかし、ロー仮想マシンを作成して管理するには、技術と努力を要します。Web サイトまたは Web アプリケーションの導入が必要な場合は、簡単でしかも安価なソリューションがあります。このアプローチは、一般的にはサービスとしてのプラットフォーム (PaaS) として知られています。図 5 に示すように、Azure はこれを Web サイトで提供しています。

<a name="Fig5"></a>![05\_Websites][05\_Websites]

**図 5: Azure の Web サイトは静的 Web サイト、一般的な Web アプリケーション、さまざまなテクノロジで構築されたカスタム Web アプリケーションをサポートしている。**

Azure の Web サイトは Azure のクラウド サービス上に構築され、Web アプリケーションの実行に最適化された、サービスとしてのプラットフォーム ソリューションを作成します。図が示すように、Web サイトは、複数のユーザーが作成した複数の Web サイトを含む可能性のある 1 つの VM のセット上で実行され、また、個人のユーザーに属する標準の VM からも実行できます。VM は Azure の Web サイトによって管理されているリソースのプールの一部であり、高い信頼性とフォルト トレランスを可能にします。
また、簡単に使い始めることができます。Azure の Web サイトでは、ユーザーはさまざまなアプリケーション、フレームワーク、テンプレートを選択することで、わずか数秒で Web サイトを作成できます。また、継続的な統合をセットアップするために、好みの開発ツール (WebMatrix、Visual Studio、その他のエディター) とソース管理オプションを使用し、チームとして開発することができます。MySQL DB に依存するアプリケーションは、Microsoft パートナーの ClearDB が Azure 向けに提供している MySQL サービスを使用できます。
開発者は Web サイトを使用して、大規模でスケーラブルな Web アプリケーションを作成できます。このテクノロジは、ASP.NET、PHP、Node.js、および Python を使用したアプリケーションの作成をサポートします。アプリケーションはスティッキ セッションなどを使用でき、既存の Web アプリケーションを変更なしにこのクラウド プラットフォームに移動できます。Web サイト上に構築されたアプリケーションは、サービス バス、SQL データベース、BLOB ストレージなど、Azure の他の要素を自由に使用できます。また、アプリケーションの複数のコピーを別の VM で実行することもできます。その場合、VM 間で要求の負荷分散が自動的に実行されます。新しい Web サイト インスタンスは既存の VM 内に作成されるため、アプリケーションの新しいインスタンスを瞬時に開始できます。つまり、VM の新規作成を待つよりもはるかに高速です。
[図 5][図 5] に示すように、コードやその他の Web コンテンツを Web サイトに発行する方法は複数あります。たとえば、FTP、FTPS、Microsoft の WebDeploy テクノロジを使用できます。Web サイトは、ソース管理システム (Git、GitHub、CodePlex、BitBucket、Dropbox、Mercurial、Team Foundation Server、クラウドベースの Team Foundation Service など) からのコードの発行もサポートしています。

## <span id="CloudServices"></span></a>クラウド サービス

Azure の仮想マシンは IaaS を提供し、Azure の Web サイトは Web ホスティングを提供します。3 番目のコンピューティング オプション、クラウド サービスは、*サービスとしてのプラットフォーム (PaaS)* を提供します。このテクノロジは、スケーラブル、高信頼、低運用コストのアプリケーションをサポートするように設計されています。また、使用しているプラットフォームの管理から開発者を解放して、アプリケーションだけに集中できるようにすることを目的としています。[図 6][図 6] にこの概念を示します。

<a name="Fig6"></a>![06\_CloudServices2][06\_CloudServices2]

**図 6: Azure クラウド サービスはサービスとしてのプラットフォーム (PaaS) を提供する。**

Azure のその他のコンピューティング オプションと同じく、クラウド サービスは VM に依存します。このテクノロジは 2 つの若干異なる VM オプションを提供しています。*Web ロール*のインスタンスは IIS を搭載している Windows Server を実行し、*ワーカー ロール*のインスタンスは同じ Windows Server で IIS を搭載していない種類を実行します。クラウド サービス アプリケーションはこの 2 つのオプションの組み合わせに依存します。

たとえば、単純なアプリケーションは Web ロールだけを使用しますが、複雑なアプリケーションは Web ロールを使用してユーザーから受け取った要求を処理してから、それらの要求が作成する作業を Worker ロールに渡して処理します。(この通信はサービス バスまたは Azure キューを使用する場合があります)。

図が示すように、1 つのアプリケーションの VM はすべて、Azure の仮想マシンについて前述したとおり、同じクラウド サービスで実行します。このため、ユーザーは 1 つのパブリック IP アドレスからアプリケーションにアクセスし、要求はアプリケーションの VM 間で自動的に負荷分散されます。Azure の仮想マシンを使用して作成されたクラウド サービスと同じく、ハードウェアの単一障害点を避けるために、プラットフォームはクラウド サービス アプリケーションで VM を展開します。

アプリケーションは仮想マシンで実行しますが、クラウド サービスは IaaS ではなく PaaS を提供することを理解することが重要です。次の例を考えてみましょう。Azure の仮想マシンのような IaaS では、アプリケーションが実行する環境を最初に作成して設定してから、この環境にアプリケーションをデプロイします。この方法では、パッチが適用された新しいオペレーティング システムのバージョンを各 VM に展開するなど、ほとんどの管理をユーザーが担当します。それに対し、PaaS では環境が既に存在するかのように管理できます。ユーザーはアプリケーションを展開するだけで済みます。オペレーティング システムの新バージョンの展開をはじめ、実行するプラットフォームの管理がユーザーに代わって処理されます。

クラウド サービスでは、仮想マシンを作成しません。代わりに、Web ロール インスタンスを 3 個、Worker ロール インスタンスを 2 個のように、それぞれがいくつ必要かを Azure に指示する設定ファイルを提供するだけで、プラットフォームがそれらを自動的に作成します。その場合も VM のサイズを選択する必要があります (オプションは Azure VM と同じです) が、自身で作成する必要はありません。アプリケーションが高い負荷を処理する場合は、追加の VM を要求すると、Azure がそれらのインスタンスを作成します。負荷が減少した場合は、それらのインスタンスをシャットダウンして支払いを停止できます。

クラウド サービス アプリケーションは通常、2 つの手順から成るプロセスで利用可能になります。最初に、開発者はプラットフォームのステージング領域にアプリケーションをアップロードします。アプリケーションをオンラインにする準備が整ったら、Azure 管理ポータルを使用して運用開始を要求します。このステージングと実稼働の切り替えにダウンタイムは発生しないため、ユーザーの業務に支障を与えることなく、実行中のアプリケーションを新バージョンにアップグレードできます。

クラウド サービスは監視も提供します。Azure の仮想マシンと同様に、故障した物理サーバーを検出し、そのサーバーで実行していた VM を別のマシンで再開します。さらに、クラウド サービスはハードウェアの故障だけではなく、エラーが発生した VM やアプリケーションも検出します。仮想マシンと異なり、各 Web ロール内と Worker ロール内にエージェントが含まれているので、エラーが発生したときに、新しい VM とアプリケーションのインスタンスを開始できます。

PaaS というクラウド サービスの本質には、他の含意もあります。最も重要なことの 1 つは、このテクノロジを基盤に構築されるアプリケーションは、Web ロールや Worker ロールのインスタンスでエラーが発生したときに正しく実行するように記述することが必要です。これを実現するには、クラウド サービスのアプリケーションがそれ自体の VM のファイル システムで状態を維持してはなりません。Azure の仮想マシンで作成された VM と異なり、クラウド サービス VM への書き込みは永続的ではありません。その点で仮想マシンのデータ ディスクとは大きく異なります。クラウド サービス アプリケーションはすべての状態を SQL データベース、BLOB、テーブルか、その他の外部ストレージに明示的に書き込む必要があります。この方法でアプリケーションを構築すると、スケーリングしやすく、障害耐性が備わります。この 2 つはクラウド サービスの重要なゴールです。

## <span id="WhatShouldIUse"></span></a>使用するモデルを選択する

Azure の 3 種類の実行モデルのどれを使用しても、スケーラブルで信頼性の高いアプリケーションをクラウドで作成できます。この基本的な類似性を前提に、どれを使用すればよいでしょうか。その答えは、何をしようとしているかによって異なります。

仮想マシンは最も一般的なソリューションを提供します。開発やテストのように、できるだけ強力な制御が必要な場合や、汎用的な VM が必要な場合は、これが最適なオプションです。仮想マシンは、前に SharePoint の例で説明したように、クラウドで市販の内部設置型アプリケーションを実行する場合にも最適な選択肢です。また、このテクノロジで作成する VM は内部設置型の VM と同じように見えるため、障害復旧にも最適な選択肢と言えます。もちろん、短所もあります。高機能には責任が伴います。IaaS では管理作業を引き受ける必要があります。

単純な Web サイトを作成する場合は、Web サイトが最適です。これは、サイトが Joomla、WordPress、Drupal などの既存のアプリケーションに基づく場合に特に適しています。Web サイトは、スケーラブルなアプリケーションでも、既存の IIS Web アプリをパブリック クラウドに移行する場合でも、管理が少ない Web アプリケーションを作成する場合にも適した選択肢です。また、展開をスピーディに行うこともできます。アプリケーションの新しいインスタンスはほとんど瞬時に実行を開始できます。一方、仮想マシンまたはクラウド サービスで新しい VM を展開すると数分かかる場合があります。

Azure によって最初に提供された実行モデルである、クラウド サービスが PaaS アプローチに基づいていることは明白です。PaaS と Web ホスティングの境界線はあいまいですが、クラウド サービスは Web サイトとは以下のような点で大きく異なります。

-   Web サイトと違って、クラウド サービスではアプリケーションの VM にアクセスして管理できます。このため、アプリケーションが必要とする任意のソフトウェアをインストールするなど、Web サイトでは不可能なことができます。
-   クラウド サービスは Web ロールとワーカー ロールの両方を提供しているので、ビジネス ロジックごとに別の VM が必要な多層アプリケーションにとっては、Web サイトよりも適した選択肢です。
-   クラウド サービスはステージング環境と運用環境を別々に提供しているので、アプリケーションの更新が Web サイトよりも円滑に行われます。
-   Web サイトと違って、Azure の仮想ネットワークや Azure の Connect のようなネットワーキング テクノロジを利用して、内部設置型コンピューターをクラウド サービス アプリケーションに接続できます。
-   クラウド サービスを使用すると、リモート デスクトップから直接アプリケーションの VM に接続できます。これは Web サイトでは不可能です。

クラウド サービスは PaaS であるため、Azure の仮想マシンより優位な点もいくつかあります。たとえば、オペレーティング システムの更新を展開するなど、代行する管理タスクが多いので、Azure の仮想マシンの IaaS アプローチよりも運用コストが下がる可能性があります。

Azure の 3 種類の実行モデルにはすべて一長一短があります。最適な選択をするには、これらを理解し、何を実現しようとしているかを把握してから、最も適したモデルを選ぶ必要があります。

1 つの実行モデルでは成し得ないこともあります。必要な場合には、オプションを組み合わせることもできます。たとえば、クラウド サービス Web ロールの管理面の利点を気に入っているが、互換性やパフォーマンス上の理由から標準 SQL Server も使用する必要があるアプリケーションを構築しているとします。このような場合は、[図 7][図 7] に示すような実行モデルの組み合わせが最適です。

<a name="Fig7"></a>![07\_CombineTechnologies][07\_CombineTechnologies]

**図 7: 1 つのアプリケーションで複数の実行モデルを使用できる。**

図が示すように、クラウド サービスの VM を仮想マシンの VM とは別のクラウド サービスで実行しています。しかも、この 2 つはきわめて効率的にやり取りできるので、場合によってはこの方法によるアプリケーションの構築が最良のオプションです。

クラウド プラットフォームは多様なシナリオをサポートする必要があるため、Azure は各種の実行モデルを提供しています。ここまで読んだ方を含め、このプラットフォームを効果的に利用しようと考えている人は、それぞれの実行モデルを理解する必要があります。

  [仮想マシン]: #VMachine
  [Web サイト]: #WebSites
  [Cloud Services]: #CloudServices
  [使用するモデルを選択する]: #WhatShouldIUse
  [図 1]: #Fig1
  [01\_CreatingVMs]: ./media/fundamentals-application-models/ExecModels_01_CreatingVMs.png
  [VMDepot]: http://vmdepot.msopentech.com/
  [Azure ライブラリ]: http://msdn.microsoft.com/ja-jp/library/windowsazure/dn197896.aspx
  [図 2]: #Fig2
  [02\_CloudServices]: ./media/fundamentals-application-models/ExecModels_02_CloudServices.png
  [図 3]: #Fig3
  [03\_AppUsingSQLServer]: ./media/fundamentals-application-models/ExecModels_03_AppUsingSQLServer.png
  [図 4]: #Fig4
  [04\_SharePointFarm]: ./media/fundamentals-application-models/ExecModels_04_SharePointFarm.png
  [05\_Websites]: ./media/fundamentals-application-models/ExecModels_05_Websites.png
  [図 5]: #Fig5
  [図 6]: #Fig6
  [06\_CloudServices2]: ./media/fundamentals-application-models/ExecModels_06_CloudServices2.png
  [図 7]: #Fig7
  [07\_CombineTechnologies]: ./media/fundamentals-application-models/ExecModels_07_CombineTechnologies.png
