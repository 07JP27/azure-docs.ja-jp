<properties 
	pageTitle="ネットワーク構成ファイルを使用した仮想ネットワークの構成" 
	description="Azure の管理ポータルでネットワーク構成ファイルをエクスポートおよびインポートして仮想ネットワークを作成または変更する方法について説明します。 " 
	services="virtual-network" 
	documentationCenter="" 
	authors="cherylmc" 
	manager="adinah" 
	editor="tysonn"/>

<tags
	ms.service="virtual-network"
	ms.devlang="na"
	ms.topic="article"
	ms.tgt_pltfrm="na"
	ms.workload="infrastructure-services" 
	ms.date="02/18/2015"
	ms.author="cherylmc"/>

#ネットワーク構成ファイルを使用した仮想ネットワークの構成

## 概要

仮想ネットワークを構成するには、管理ポータル ウィザードを使用するか、ネットワーク構成ファイルを作成してインポートします。Azure では、ネットワーク構成ファイルを使用して、仮想ネットワーク設定を定義します。 

最初に管理ポータル ウィザードを使用して仮想ネットワークの構成を作成し、後で構成ファイルを直接編集して変更を加えることをお勧めします。たとえば、別個のサブスクリプションに対して複数の仮想ネットワークを構成している場合は、最初に管理ポータル ウィザードを使用してネットワーク構成ファイルを作成します。次にこのファイルをテンプレートとして使用するためエクスポートします。このファイルに編集を加えて異なる設定を指定した後、再び管理ポータルにファイルをインポートします。これにより、複数のサブスクリプションがある場合に複数の仮想ネットワークを効率的に作成できます。 

または、ネットワークにクラウド サービスまたは仮想マシンをデプロイする前にネットワーク構成設定を変更する場合は、ファイルをエクスポートし、編集を加えたファイルを Azure にもう一度インポートすることができます。仮想ネットワークを再作成する場合は、ネットワーク構成ファイルを使用してネットワーク構成設定をバックアップすることもできます。

##ネットワーク構成ファイルの作成および変更 
ネットワーク構成ファイルを作成する最も簡単な方法は、既存の仮想ネットワーク構成からネットワーク設定をエクスポートし、仮想ネットワーク用の構成設定を含むようにそのファイルに変更を加えることです。また、サンプル ファイルを取得してそれを変更することもできます。

ネットワーク構成ファイルを編集するには、単にファイルを開き、適切な変更を加えた後で保存します。ネットワーク構成ファイルは、任意の  *xml* エディターを使用して変更できます。 

ネットワーク構成ファイルのスキーマ設定のガイダンスに厳密に従う必要があります。ネットワーク構成ファイルを作成する場合、Azure の現在のサブスクリプションの設定がファイルの設定によって上書きされます。ファイルの値に加えた変更が設定のガイドラインに従っていない場合、仮想ネットワークは意図したとおりに構成されない可能性があります。また、ファイルをインポートできない場合もあります。ネットワーク構成ファイルに含まれている特定の設定については、「[Azure 仮想ネットワークの構成スキーマ](https://msdn.microsoft.com/library/azure/jj157100.aspx)」をご覧ください。 

Azure では、何かがデプロイされているサブネットは "使用中" と見なされます。使用中のサブネットは変更することができません。サブネットを変更する前に、そのサブネットにデプロイされているすべてのものを、変更対象ではない別のサブネットに移動してください。   「[VM またはロール インスタンスを異なるサブネットに移動する](https://msdn.microsoft.com/library/azure/dn643636.aspx)」をご覧ください。



## 管理ポータルを使用した仮想ネットワークの設定のエクスポートおよびインポート  
PowerShell または管理ポータルを使用して、ネットワーク構成ファイルに含まれるネットワーク構成の設定をエクスポートおよびインポートすることができます。ここでは、管理ポータルを使用してエクスポートおよびインポートする方法について説明します。 

### ネットワーク設定をエクスポートするには
エクスポートすると、サブスクリプションの仮想ネットワークのすべての設定が .xml ファイルに書き込まれます。 

1. **管理ポータル**にログインします。
2. 管理ポータルで、**[ネットワーク]** ページの下部にある **[エクスポート]** をクリックします。 
3. **[ネットワーク構成をエクスポートする]** ウィンドウで、ネットワークの設定をエクスポートするサブスクリプションを選択していることを確認します。次に、右下にあるチェックマークをクリックします。 
4. メッセージが表示されたら、 *NetworkConfig.xml* ファイルを任意の場所に保存します。
### ネットワーク設定をインポートするには


1. **管理ポータル**の左下にあるナビゲーション ウィンドウで、**[新規]** をクリックします。
2. **[ネットワーク サービス]**、**[仮想ネットワーク]**、**[構成のインポート]** の順にクリックします。
3. **[ネットワーク構成ファイルをインポートする]** ページで、ネットワーク構成ファイルを参照して、**[次へ]** 矢印をクリックします。
4. **[ネットワークを構築しています]** ページに、変更または作成されるネットワーク構成のセクションを示す情報が表示されます。変更が適切であることを確認して、チェックマークをクリックして仮想ネットワークの更新または作成処理に進みます。 


## その他のリソース
仮想ネットワークの詳細については、次のトピックを参照してください。

-  [仮想ネットワークの概要](http://msdn.microsoft.com/library/windowsazure/jj156007.aspx)
-  [ネットワーク構成スキーマを使用したクラウド サービスのオプション設定](https://msdn.microsoft.com/library/azure/jj156091.aspx)に関するページ
-  [管理ポータルでの仮想ネットワークの設定について](https://msdn.microsoft.com/library/azure/jj156074.aspx)
-  [仮想ネットワーク FAQ](https://msdn.microsoft.com/library/azure/dn133803.aspx)
-  [仮想ネットワークの構成タスク](https://msdn.microsoft.com/library/azure/jj156206.aspx)
-  [マルチサイト VPN の構成](https://msdn.microsoft.com/library/azure/dn690124.aspx)
-  [VNet 間の接続の構成](https://msdn.microsoft.com/library/azure/dn690122.aspx)




<!--HONumber=47-->
