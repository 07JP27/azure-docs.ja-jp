<properties
   pageTitle="SQL Data Warehouse の容量制限 | Microsoft Azure"
   description="SQL Data Warehouse の接続、データベース、テーブル、およびクエリの最大値。"
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="sonyam"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="07/31/2016"
   ms.author="sonyama;barbkess;jrj"/>

# SQL Data Warehouse の容量制限

以下の表は、Azure SQL Data Warehouse のさまざまなコンポーネントで使用できる最大値を示しています。


## ワークロード管理

| カテゴリ | 説明 | 最大値 |
| :------------------ | :------------------------------------------- | :----------------- |
| [Data Warehouse ユニット (DWU)][]| コンピューティング、メモリ、および IO リソース | 6000 |
| データベース接続 | 同時に開かれるセッション数 | 1024<br/><br/>最大 1024 個のアクティブな接続をサポートします。各接続が SQL Data Warehouse データベースに対して同時に要求を送信できます。実際に同時実行できるクエリ数には制限があるので注意してください。同時実行の制限を超えると、要求は内部キューに送られ、処理の順番が来るまで待機します。|
| データベース接続 | 準備されたステートメントに対する最大メモリ容量 | 20 MB |
| [ワークロード管理][] | 同時クエリの最大数 | 32<br/><br/>既定では、SQL Data Warehouse は、最大 32 個の同時実行クエリと、キューに残っているクエリを実行します。<br/><br/>ユーザーが上位リソース クラスに割り当てられている場合、同時実行レベルは低くなる可能性があります。DMV クエリなど、クエリの中には必ず実行が許可されるものがあります。|
| [Tempdb][] | Tempdb の最大サイズ | DW100 あたり 399 GB です。そのため DWU1000 で Tempdb は 3.99 TB に設定されます |


## データベース オブジェクト

| カテゴリ | 説明 | 最大値 |
| :---------------- | :------------------------------------------- | :----------------- |
| データベース | 最大サイズ | 240 TB (ディスク上の圧縮)<br/><br/>この領域は tempdb またはログ領域から独立しています。そのため、この領域はパーマネント テーブル専用です。クラスター化列ストア圧縮は、5 倍であると推定されます。これは、すべてのテーブルがクラスター化列ストア (既定のテーブル型) である場合、データベースの非圧縮サイズが約 1 PB に拡大する可能性があることを意味します。|
| テーブル | 最大サイズ | 60 TB (ディスク上の圧縮) |
| テーブル | データベースあたりのテーブル数 | 20 億 |
| テーブル | テーブルあたりの列数 | 1,024 列 |
| テーブル | 列あたりのバイト数 | 8000 バイト |
| テーブル | 行あたりのバイト数 (定義されたサイズ) | 8060 バイト<br/><br/>行あたりのバイト数は、ページ圧縮を有効にした SQL Server の場合と同様に計算されます。SQL Server のように、SQL Data Warehouse は、行外にプッシュされる可変長列を可能にする行オーバーフロー ストレージをサポートします。行外にプッシュされる可変長列の場合、メイン レコードには 24 バイト ルートのみが格納されます。詳細については、SQL Server オンライン ブックの「[8 KB を超える場合の行オーバーフロー データ][]」を参照してください。<br/><br/>SQL Data Warehouse のデータ型のサイズの一覧については、[CREATE TABLE (Azure SQL Data Warehouse)][] に関するページをご覧ください。 |
| テーブル | テーブルあたりのパーティション数 | 15,000<br/><br/>高パフォーマンスを実現するには、ビジネス要件を満たしながら、必要なパーティション数を最小限に抑えることをお勧めします。パーティションの数が増えるに従い、データ定義言語 (DDL) およびデータ操作言語 (DML) の操作のオーバーヘッドが拡大し、パフォーマンスの低下を引き起こします。|
| テーブル | パーティション境界値あたりの文字数| 4000 |
| Index | テーブルあたりの非クラスター化インデックス数 | 999<br/><br/>行ストア テーブルにのみ適用されます。|
| Index | テーブルあたりのクラスター化インデックス数 | 1<br><br/>行ストア テーブルと列ストア テーブルの両方に適用されます。|
| Index | 列ストア インデックスの行グループ内の行数 | 1,024<br/><br/>各列ストア インデックスは、複数の列ストア インデックスとして実装されます。SQL Data Warehouse の列ストア インデックスに 1,024 個の行を挿入した場合、そのすべての行が同じ行グループに入るわけではありません。|
| Index | クラスター化列ストア インデックスの同時実行ビルド数 | 32<br/><br/>クラスター化列ストア インデックスがすべて別々のテーブルでビルドされる場合に適用されます。1 つのテーブルにつき許可されるクラスター化列ストア インデックスのビルドは、1 つだけです。追加の要求は、キュー内で待機します。|
| Index | インデックス キーのサイズ | 900 バイト<br/><br/>行ストア インデックスにのみ適用されます。<br/><br/>インデックスの作成時には varchar 列の既存のデータが 900 バイトを超えていない場合でも、最大サイズが 900 バイトを超える、varchar 列のインデックスが作成されることがあります。ただし、その後の列に対する INSERT または UPDATE 操作は、合計サイズが 900 バイトを超えてしまう場合、失敗します。|
| Index | インデックスあたりのキー列数 | 16<br/><br/>行ストア インデックスにのみに適用されます。クラスター化列ストア インデックスには、すべての列が含まれます。|
| 統計 | 組み合わせ列値のサイズ | 900 バイト |
| 統計 | 統計オブジェクトあたりの列数 | 32 |
| 統計 | テーブルごとに、列に対して作成される統計 | 30,000 |
| ストアド プロシージャ | 入れ子レベルの最大数 | 8 |
| 表示 | ビューあたりの列数 | 1,024 |


## 読み込み

| カテゴリ | 説明 | 最大値 |
| :---------------- | :------------------------------------------- | :----------------- |
| Polybase 読み込み | 行あたりのバイト数 | 32,768<br/><br/>Polybase 読み込みは両方が 32K 未満の行の読み込みに制限され、VARCHR(MAX)、NVARCHAR(MAX)、または VARBINARY(MAX) に読み込むことはできません。この制限は現時点では適用されていますが、近いうちに削除される予定です。<br/><br/>


## クエリ

| カテゴリ | 説明 | 最大値 |
| :---------------- | :------------------------------------------- | :----------------- |
| クエリ | ユーザー テーブルに対する、キューに置かれるクエリ数 | 1,000 |
| クエリ | システム ビューに対する同時クエリ数 | 100 |
| クエリ | システム ビューに対する、キューに置かれるクエリ数 | 1,000 |
| クエリ | パラメーターの最大個数 | 2098 |
| Batch | 最大サイズ | 65,536*4096 |
| SELECT の結果セット | 行あたりの列数 | 4096<br/><br/>SELECT の結果セットで、許容される行あたりの列数の上限は 4096 個です。常に 4096 個が保証されるわけではありません。　クエリ プランで一時テーブルが必要な場合、テーブルあたりの列数の最大値として 1024 が適用される可能性があります。|
| SELECT | 入れ子になったサブクエリの数 | 32<br/><br/>SELECT ステートメントで許容される入れ子になったサブクエリの数は 32 個までです。常に 32 個が保証されるわけではありません。たとえば、JOIN によって、クエリ プランにサブクエリが導入されることがあります。サブクエリの数はまた、使用できるメモリによって制限される場合があります。|
| SELECT | JOIN あたりの列数 | 1,024 列<br/><br/>JOIN で許容される列数は 1,024 個までです。常に 1024 列が保証されるわけではありません。JOIN プランで、列数が JOIN の結果を上回る一時テーブルが必要な場合、一時テーブルには 1024 の制限が適用されます。 |
| SELECT | GROUP BY の列あたりのバイト数 | 8,060<br/><br/>GROUP BY 句内の列に許容されるバイト数は、最大で 8,060 バイトです。|
| SELECT | ORDER BY 列あたりのバイト数 | 8,060 バイト。<br/><br/>ORDER BY 句内の列に許容されるバイト数は、最大で 8,060 バイトです。|
| ステートメントあたりの識別子と定数 | 参照される識別子と定数の数 | 65,535<br/><br/>SQL Data Warehouse では、1 つのクエリ式に含めることができる識別子と定数の数を制限しています。上限は 65,535 個です。この数を超えると、SQL Server エラー 8632 が発生します。詳細については、"[内部エラー: Expression Service の制限に達しました][]" に関するページをご覧ください。|


## Metadata

| システム ビュー | 最大行数 |
| :--------------------------------- | :------------|
| sys.dm\_pdw\_component\_health\_alerts | 10,000 |
| sys.dm\_pdw\_dms\_cores | 100 |
| sys.dm\_pdw\_dms\_workers | 最新の 1000 個の SQL 要求に対する DMS ワーカーの総数 |
| sys.dm\_pdw\_errors | 10,000 |
| sys.dm\_pdw\_exec\_requests | 10,000 |
| sys.dm\_pdw\_exec\_sessions | 10,000 |
| sys.dm\_pdw\_request\_steps | sys.dm\_pdw\_exec\_requests に格納された最新の 1000 個の SQL 要求に対するステップの総数 |
| sys.dm\_pdw\_os\_event\_logs | 10,000 |
| sys.dm\_pdw\_sql\_requests | sys.dm\_pdw\_exec\_requests に格納された最新の 1000 個の SQL 要求 |


## 次のステップ
詳細な参照情報については、[SQL Data Warehouse のリファレンス概要][]に関するページを参照してください。

<!--Image references-->

<!--Article references-->
[Data Warehouse ユニット (DWU)]: ./sql-data-warehouse-overview-what-is.md#data-warehouse-units
[SQL Data Warehouse のリファレンス概要]: ./sql-data-warehouse-overview-reference.md
[ワークロード管理]: ./sql-data-warehouse-develop-concurrency.md
[Tempdb]: ./sql-data-warehouse-tables-temporary.md

<!--MSDN references-->
[8 KB を超える場合の行オーバーフロー データ]: https://msdn.microsoft.com/library/ms186981.aspx
[CREATE TABLE (Azure SQL Data Warehouse)]: https://msdn.microsoft.com/library/mt203953.aspx
[内部エラー: Expression Service の制限に達しました]: https://support.microsoft.com/kb/913050

<!---HONumber=AcomDC_0803_2016-->