<properties
   pageTitle="Service Fabric サービスのパーティション分割"
   description="Service Fabric サービスのパーティションの分割方法について説明します"
   services="service-fabric"
   documentationCenter=".net"
   authors="appi101"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="04/13/2015"
   ms.author="aprameyr"/>

# Service Fabric サービスのパーティション分割
Service Fabric は、サービスの状態のパーティション分割をサポートし、全体的状態のサブセットに対して各パーティションを動作させることによって、スケーラブルなステートフル サービスの構築を容易にしています。各パーティションは、[高可用性](service-fabric-availability-services.md)ユニットになっています。パーティションのレプリカは、クラスター内のノードに分散され、バランスが取られます。

> [AZURE.NOTE]ステートレス サービスもパーティション分割される場合がありますが、そのようなシナリオはまれであり、大半の Service Fabric サービスには不要です。

使用可能なパーティション分割構成は 3 種類あります。

## 単一パーティション分割構成
これは、サービスにパーティション分割の必要がないことを指定するために使用します。

## 名前付きパーティション分割構成
これは、サービスの各パーティションに一定の名前を指定するために使用します。個々のパーティションを名前で検索できます。

## 範囲指定付きパーティション分割構成
これは、整数の範囲 (最低値と最高値のキーで識別される) と、パーティションの数 (n) を指定するために使用されます。n 個のパーティションが作成され、それぞれが重複しないサブ範囲を担当します。例: 範囲指定付きパーティション分割構成 (3 つのレプリカを持つサービス) で、最低値キー 0、最高値キー 99、数値 4 が指定されると、次に示すとおり 4 つのパーティションが作成されます。

![範囲パーティション分割](./media/service-fabric-concepts-partitioning/range-partitioning.png)

一般的なケースでは、データセット内に一意のキーのハッシュを作成します。キーの一般的な例としては、車両識別番号 (VIN)、従業員 ID、または一意の文字列などがあります。この一意キーを使用することにより、キーの範囲を法とする剰余類により長いハッシュ コードを作成し、キーとして使用できます。許可されるキー範囲の上限と下限の境界を指定することができます。

さらに、パーティションの数は、最悪のケースのリソース負荷 (メモリの制限やネットワーク帯域幅など) に対処できるよう、十分多めに見積もっておくことが必要ですが、パーティションが極端に分散しすぎないようにも注意が必要です。

### ハッシュ アルゴリズムの選択
ハッシュで重要なのは、ハッシュ アルゴリズムの選択です。考慮すべき重要事項は、類似するキーを近接してグループ化することが目標か (局所性鋭敏型ハッシュ)、またはアクティビティをパーティション全体に広範に分散することが必要か (分散ハッシュ) という点です。

[Wikipedia のハッシュ関数のページ](http://en.wikipedia.org/wiki/Hash_function)は、ハッシュ コードのアルゴリズム選択全般に関する優れたリソースです。

> [AZURE.NOTE]サービスを作成した後で、そのサービスのために使用されるパーティションの数やパーティション分割構成の種類を変更することはできません。

## 次のステップ

Service Fabric の概念についての詳細は、次を参照してください。

- [Service Fabric サービスの可用性](service-fabric-availability-services.md)

- [Service Fabric サービスの拡張性](service-fabric-concepts-scalability.md)
 

<!---HONumber=July15_HO2-->