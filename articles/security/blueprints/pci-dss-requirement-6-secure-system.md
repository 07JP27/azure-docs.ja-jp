---
title: Azure Payment Processing Blueprint - セキュリティ保護されたシステムの要件
description: PCI DSS 要件 6
services: security
documentationcenter: na
author: jomolesk
manager: mbaldwin
editor: tomsh
ms.assetid: 79889fdb-52d2-42db-9117-6e2f33d501e0
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/15/2017
ms.author: jomolesk
ms.openlocfilehash: 2f6f1bfc853f261eecf5357cef5d3e3d972781b1
ms.sourcegitcommit: 870d372785ffa8ca46346f4dfe215f245931dae1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/08/2018
---
# <a name="secure-system-requirements-for-pci-dss-compliant-environments"></a>PCI DSS に準拠する環境のセキュリティ保護されたシステムの要件 
## <a name="pci-dss-requirement-6"></a>PCI DSS 要件 6

**セキュリティで保護されたシステムとアプリケーションを開発および管理します。**

> [!NOTE]
> これらの要件は、[PCI データ セキュリティ基準 (DSS) バージョン 3.2](https://www.pcisecuritystandards.org/document_library?category=pcidss&document=pci_dss)の一部として [Payment Card Industry (PCI) Security Standards Council](https://www.pcisecuritystandards.org/pci_security/) によって定義されています。 各要件のテスト手順およびガイダンスについては、PCI DSS をご覧ください。

悪意のあるユーザーは、セキュリティの脆弱性を利用して、システムへのアクセス権限を取得します。 これらの脆弱性の多くはベンダーが提供し、システムを管理する企業でインストールする必要があるセキュリティ 修正プログラムによって修正されます。 悪意のあるユーザーや悪意のあるソフトウェアによる悪用とセキュリティ侵害からカード所有者データを守るには、すべてのシステムに適切なすべてのソフトウェア修正プログラムを適用する必要があります。

> [!NOTE]
> 適切なソフトウェア修正プログラムは、十分に評価、検証され既存のセキュリティ構成と競合しないと判断されている修正プログラムを指します。 自社開発アプリケーションの場合、標準的なシステム開発プロセスとセキュリティ保護されたコーディング技法を使用することで、多くの脆弱性が回避できます。

## <a name="pci-dss-requirement-61"></a>PCI DSS 要件 6.1

**6.1** セキュリティの脆弱性については、信頼できる外部情報源からのセキュリティ脆弱性に関する情報を使用して特定し、新しく検出されたセキュリティの脆弱性にリスク格付け (たとえば "高"、"中" として、または "低") を割り当てます。

> [!NOTE]
> リスク格付けは、業界のベスト プラクティスと潜在的な影響を考慮して決定します。 たとえば、脆弱性を格付けする条件には、CVSS の基本スコア、ベンダーによる分類、および/または影響を受けるシステムの種類が考慮される場合があります。 
> 
> 脆弱性の評価やリスク格付け割り当ての方法は、組織の環境やリスク評価戦略によって異なります。 リスク格付けでは、少なくとも、環境に "高リスク" と考えられるすべての脆弱性が特定される必要があります。 リスク格付けに加え、脆弱性が環境に緊急の脅威となる、重要なシステムに影響を与える、または対処しないとセキュリティ侵害が発生すると考えられる場合は、"重大" であるとみなされます。 重要なシステムの例としては、セキュリティ システム、公開されたデバイスおよびシステム、データベース、およびカード所有者データを保存、処理、送信する他のシステムが含まれます。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | スコープ境界内のハイパーバイザー ホスト上の脆弱性をスキャンするための手順が規定され実行されている必要があります。 脆弱性のスキャンは、適切な脆弱性スキャン ツールを使用して、サーバー オペレーティング システム、データベース、ネットワーク デバイス上で実行します。 脆弱性スキャンは、四半期に 1 回以上実行します。 Microsoft Azure は、独立した監査機関と契約して、Microsoft Azure 境界の侵入テストを実行します。 レッド チームの演習も定期的に実行され、結果はセキュリティの向上のために使用されます。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は、WAF および OWASP ルールセットに対応した Application Gateway を使用することで、セキュリティの脆弱性のリスクを軽減します。 詳細については、[PCI ガイド - セキュリティの脆弱性のリスク軽減](payment-processing-blueprint.md#application-gateway)を参照してください。|



## <a name="pci-dss-requirement-62"></a>PCI DSS 要件 6.2

**6.2** ベンダーから提供された該当するセキュリティ修正プログラムをインストールすることによって、すべてのシステム コンポーネントとソフトウェアを既知の脆弱性から守ります。 リリース 1 か月以内に、重要なセキュリティ更新プログラムをインストールします。

> [!NOTE]
> 重要なセキュリティ更新プログラムは、要件 6.1 に定義されているリスク格付けプロセスに従って特定する必要があります。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | Microsoft Azure は、ベンダーから提供された該当するセキュリティ更新プログラムをインストールすることによって、すべてのネットワークおよびハイパーバイザー OS ソフトウェアを既知の脆弱性から守ります。 お客様がサービスを使用しないことを要求しない限り、オペレーティング システム レベルの脆弱性を回避し、適切なタイミングで修復するためのセキュリティ更新プログラムの管理プロセスが存在します。 運用環境のサーバーは、セキュリティ更新プログラムが適用されていることを確認するために月 1 回スキャンされます。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は、PaaS サービス ソリューションです。 Azure は、すべてのサービス更新プログラムのメンテナンスを提供します。|



## <a name="pci-dss-requirement-63"></a>PCI DSS 要件 6.3

**6.3** 次のように、セキュリティ保護された内部および外部のソフトウェア アプリケーション (アプリケーションへの Web ベースの管理アクセス権を含む) を開発します。
- PCI DSS に準拠する (たとえば、セキュリティで保護された認証およびログ記録)
- 業界標準とベスト プラクティスに従う
- ソフトウェア開発ライフ サイクル全体で情報セキュリティを組み込む 

> [!NOTE]
> これは、すべての自社開発ソフトウェアだけでなく、サード パーティによって開発される特注 またはカスタムのソフトウェアにも適用されます。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | Microsoft Azure アプリケーションとエンドポイントは、DSS 要件に従った Microsoft セキュリティ開発ライフサイクル (SDL) 手法により開発されています。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は CHD を保護するための業界のベスト プラクティスに従って設計されています。 セキュリティ対策の詳細について展開ガイドで説明し、ログ記録機能は有効に設定する必要があります。|



### <a name="pci-dss-requirement-631"></a>PCI DSS 要件 6.3.1

**6.3.1** アプリケーションがアクティブ化される、または顧客にリリースされる前に、開発、テスト、カスタム アプリケーション用のアカウント、ユーザー ID およびパスワードを削除します。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | 運用環境にリリースする準備ができているアプリケーションのみがリリースされるよう、運用環境へ主要なリリースを展開する前に、Azure の開発チーム外の指定されたセキュリティ アドバイザーによる最終セキュリティ レビュー (FSR) が実行されます。 この最終レビューの中で、すべてのテスト アカウントとテスト データが削除されたことが確認されます。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は、ログに記録され、分離されたステージング サービスを提供します。 各ネットワーク階層には、専用のネットワーク セキュリティ グループ (NSG) があります。 詳細については、[PCI ガイダンスのネットワーク セキュリティ グループ](payment-processing-blueprint.md#network-security-groups)に関する説明をご覧ください。|



### <a name="pci-dss-requirement-632"></a>PCI DSS 要件 6.3.2

**6.3.2** 少なくとも以下を実行して、運用環境にリリースする前にカスタム コードをレビューする、またはコーディングの脆弱性の可能性を特定 (手動または自動のプロセスを使用して) します。
- コード レビューの方法とセキュリティ保護されたコーディング プラクティスに関する知識を持つ、コードを作成した開発者以外の開発者がコード変更をレビューする。
- セキュリティ上安全なコーディング ガイドラインに従ってコードが書かれていることをコード レビューで確認する。
- リリース前に適切な修正を実装する。
- リリースする前にコード レビューの結果を管理者が確認し承認する。 

> [!NOTE]
> コード レビューのこの要件は、システムの開発ライフ サイクルの一部としてすべてのカスタム コード (社内用および公開用) に適用されます。 
>
> コード レビューは、知識を持つ社内従業員または外部の人員が実施できます。 公開 Web アプリケーションの場合は、PCI DSS 要件 6.6 で定義されている、実装後、脅威と脆弱性に継続的に対処するための追加の制御も必要になります。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | Microsoft Azure アプリケーションとエンドポイントは、Microsoft セキュリティ開発ライフサイクル (SDL) 手法により開発されています。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は、ログに記録され、分離されたステージング サービスを提供します。 各ネットワーク階層には、専用のネットワーク セキュリティ グループ (NSG) があります。 詳細については、[PCI ガイダンスのネットワーク セキュリティ グループ](payment-processing-blueprint.md#network-security-groups)に関する説明をご覧ください。|



## <a name="pci-dss-requirement-64"></a>PCI DSS 要件 6.4

**6.4** システム コンポーネントに変更を加える場合は、必ず制御プロセスおよび手続きに従います。 プロセスには、次 (要件 6.4.1 ～ 6.4.6 を参照してください) を含める必要があります。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | Microsoft では、システム開発の最初から SDLC に統合する必要がある情報セキュリティを含む、NIST ガイダンスのソフトウェア開発におけるセキュリティ考慮事項に従っています。 Microsoft SDL のセキュリティ プラクティスを継続的に統合することにより、以下が可能になります。<ul><li>セキュリティの脆弱性と構成不備の早期検出とその軽減</li><li>必要なセキュリティ制御によって起こった潜在的なソフトウェア コーディングの問題の認識</li><li>共有のセキュリティ サービスの特定と、実証済みの方法および手法を通じてセキュリティ対策の全体を向上するベスト プラクティスのセキュリティ ツールの再利用</li><li>Microsoft のすでに包括的なリスク管理プログラムの適用</li></ul>Microsoft Azure では、以下を含む主な変更の実装を制御するための変更管理およびリリース管理プロセスが規定されています。<ul><li>計画的な変更の特定と文書化</li><li>製品計画段階でのビジネス目標、優先順位およびシナリオの特定</li><li>機能の仕様またはコンポーネント設計</li><li>全体的なリスクまたは影響を評価するための、定義済み条件/チェックリストによる運用対応性のレビュー</li><li>適切な DEV (開発)、INT (統合テスト)、STAGE (運用前)、および PROD (運用) 環境の入口/出口条件に基づくテスト、承認および変更管理。 お客様は、Microsoft Azure でホストされるお客様のアプリケーションに対する責任があります。</li></ul> |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore のデモは、ログに記録され、分離されたステージング サービスを提供します。 <br /><br />各ネットワーク階層には、専用のネットワーク セキュリティ グループ (NSG) があります。 詳細については、[PCI ガイダンスのネットワーク セキュリティ グループ](payment-processing-blueprint.md#network-security-groups)に関する説明をご覧ください。<br /><br />変更は Operations Management Suite を使用して記録し、Runbook を使用してログを収集します。 Log Analytics は、広範にわたる変更のログ記録を提供します。 正確性を確保するために、変更内容を確認および検証できます。 具体的なガイダンスについては、[PCI ガイダンス - Operations Management Suite](payment-processing-blueprint.md#logging-and-auditing) を参照してください。|



### <a name="pci-dss-requirement-641"></a>PCI DSS 要件 6.4.1

**6.4.1** 運用環境から開発/テスト環境を分離し、アクセス制御による分離を適用します。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | [要件 6.4](#pci-dss-requirement-6-4) の "Microsoft Azure" のセクションをご覧ください。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は、ログに記録され、分離されたステージング サービスを提供します。 各ネットワーク階層には、専用のネットワーク セキュリティ グループ (NSG) があります。 詳細については、[PCI ガイダンスのネットワーク セキュリティ グループ](payment-processing-blueprint.md#network-security-groups)に関する説明をご覧ください。|



### <a name="pci-dss-requirement-642"></a>PCI DSS 要件 6.4.2

**6.4.2** 開発環境、テスト環境、運用環境間の作業の分離

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | [要件 6.4](#pci-dss-requirement-6-4) の "Microsoft Azure" のセクションをご覧ください。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は、ログに記録され、分離されたステージング サービスを提供します。 各ネットワーク階層には、専用のネットワーク セキュリティ グループ (NSG) があります。 詳細については、[PCI ガイダンスのネットワーク セキュリティ グループ](payment-processing-blueprint.md#network-security-groups)に関する説明をご覧ください。|



### <a name="pci-dss-requirement-643"></a>PCI DSS 要件 6.4.3

**6.4.3** テストまたは開発環境では、実稼働データ (ライブ PAN) は使用されません。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | [要件 6.4](#pci-dss-requirement-6-4) の "Microsoft Azure" のセクションをご覧ください。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore に、ライブのプライマリ アカウント番号 (PAN) データがない状態にする必要があります。|



### <a name="pci-dss-requirement-644"></a>PCI DSS 要件 6.4.4

**6.4.4** システムを有効化する、または稼働を開始する前に、システム コンポーネントからテスト データおよびアカウントを削除します。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | [要件 6.4](#pci-dss-requirement-6-4) の "Microsoft Azure" のセクションをご覧ください。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore には、テスト アカウントがない状態にする必要があります。|



### <a name="pci-dss-requirement-645"></a>PCI DSS 要件 6.4.5

**6.4.5** セキュリティ更新プログラムとソフトウェア変更を実装するための変更制御手続きには、次を含める必要があります。
- **6.5.4.1** 影響に関するドキュメント。
- **6.5.4.2** 承認者による変更の承認書。
- **6.5.4.3** 変更がシステムのセキュリティに悪影響を及ぼさないことを確認する機能テスト。
- **6.5.4.4**バックアウト手続き。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | [要件 6.4](#pci-dss-requirement-6-4) の "Microsoft Azure" のセクションをご覧ください。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は、PaaS サービス ソリューションです。 Azure は、すべてのサービス更新プログラムのメンテナンスを提供します。|



### <a name="pci-dss-requirement-646"></a>PCI DSS 要件 6.4.6

**6.4.6** 重大な変更が完了したら、関連するすべての PCI DSS 要件を、新しいまたは変更されたシステムおよびネットワークに実装し、適切にドキュメントを更新する必要があります。

> [!NOTE]
> この要件は、2018 年 1 月 31 日まではベスト プラクティスであり、その後は要件になります。


**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | [要件 6.4](#pci-dss-requirement-6-4) の "Microsoft Azure" のセクションをご覧ください。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore は、PaaS サービス ソリューションです。 Azure は、すべてのサービス更新プログラムのメンテナンスを提供します。|



## <a name="pci-dss-requirement-65"></a>PCI DSS 要件 6.5

**6.5** 以下のような、ソフトウェア開発プロセスでよく見られるコーディングに関する脆弱性に対処します。
- 一般的なコーディングの脆弱性を回避する方法を含め、セキュリティ上安全な最新のコーディング技法について、年 1 回以上、開発者をトレーニングします。
- セキュリティ上安全なコーディングのガイドラインに基づいてアプリケーションを開発します。

> [!NOTE]
> 6.5.10 ～ 6.5.1 に記載されている脆弱性は、このバージョンの PCI DSS の発行時点で最新の業界ベスト プラクティスです。 ただし、業界の脆弱性管理のベスト プラクティスが更新された場合 (たとえば、OWASP ガイドの SANS CWE Top 25、CERT Secure Coding など) は、これらの要件に最新のベスト プラクティスを使用する必要があります。 
> 
> [!NOTE]
> 以下の要件 6.5.1 ～ 6.5.6 を、すべてのアプリケーション (内部または外部) に適用します。 以下の要件 6.5.7 ～ 6.5.10 を、すべてのアプリケーションおよびアプリケーション インターフェイス (内部または外部) に適用します。 

- **6.5.1** インジェクション、特に SQL インジェクションに関する欠陥。 OS コマンド インジェクション、LDAP、および XPath インジェクションに関する欠陥ならびに他のインジェクションに関する欠陥も考慮します。
- **6.5.2** バッファー オーバーフロー
- **6.5.3** セキュリティ保護されていない暗号ストレージ
- **6.5.4** セキュリティ保護されていない通信
- **6.5.5** 不適切なエラー処理
- **6.5.6** (PCI DSS 要件 6.1 の定義に従った) 脆弱性の特定プロセスで特定されたすべての "高リスクの" 脆弱性
- **6.5.7** クロスサイト スクリプティング (XSS) 攻撃
- **6.5.8** 不適切なアクセス制御 (セキュリティ保護されていない直接オブジェクト参照、URL アクセスやディレクトリ トラバーサル攻撃が制限されていない、関数へのユーザー アクセスを制限していないなど)
- **6.5.9** クロスサイト リクエスト フォージェリ (CSRF)
- **6.5.10** 認証およびセッション管理の不備

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | [要件 6.4](#pci-dss-requirement-6-4) の "Microsoft Azure" のセクションをご覧ください。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | Contoso Webstore デモでは、セキュリティ保護された開発を行う方法についてのガイダンスと、セキュリティ上安全な開発プラクティスの DFD および脅威モデルを示します。|



## <a name="pci-dss-requirement-66"></a>PCI DSS 要件 6.6

**6.6** 公開された Web アプリケーションの場合、新しい脅威と脆弱性に継続的に対処し、次の方法により、これらのアプリケーションを、既知の攻撃から保護します。

- 少なくとも年 1 回、および変更を加えた後に、手動または自動のアプリケーション脆弱性セキュリティ アセスメント ツールまたは方法による公開 Web アプリケーションをレビューする 

   > [!NOTE]
   > このアセスメントは、要件 11.2 で実行される脆弱性のスキャンとは異なります。 

- 公開 Web アプリケーションの前に、すべてのトラフィックを継続的に検査して Web ベースの攻撃を検出して防止する、自動化された技術的なソリューション (たとえば、Web アプリケーションのファイアウォール) をインストールします。

**責任:&nbsp;&nbsp;`Shared`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | Microsoft Azure では、アプリケーションが運用環境に展開される前に、その SDL プロセスの一環として公開 Web アプリケーションをテストします。 さらに、Microsoft は、潜在的な脆弱性を検出するために、運用環境にあるすべての公開 Web アプリケーションを定期的にスキャンします。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | 参照ソリューションは、WAF および OWASP ルールセットに対応した Application Gateway を使用することで、セキュリティの脆弱性のリスクを軽減します。 詳細については、[PCI ガイド - セキュリティの脆弱性のリスク軽減](payment-processing-blueprint.md#application-gateway)を参照してください。|



## <a name="pci-dss-requirement-67"></a>PCI DSS 要件 6.7

**6.7** セキュリティ保護されたシステムおよびアプリケーションを開発および維持するためのセキュリティ ポリシーと運用手順が文書化され、使用され、すべての関係者に周知されていることを確認します。

**責任:&nbsp;&nbsp;`Customer Only`**

|||
|---|---|
| **プロバイダー <br />(Microsoft&nbsp;Azure)** | 適用不可。 |
| **お客様 <br />(PCI&#8209;DSS&nbsp;Blueprint)** | 参照ソリューションは、WAF および OWASP ルールセットに対応した Application Gateway を使用することで、セキュリティの脆弱性のリスクを軽減します。 詳細については、[PCI ガイド - セキュリティの脆弱性のリスク軽減](payment-processing-blueprint.md#application-gateway)を参照してください。|




