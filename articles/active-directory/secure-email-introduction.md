---
title: "Azure AD のセキュリティで保護された電子メール ポリシーと構成 | Microsoft docs"
description: "セキュリティで保護された電子メール ポリシーと構成をデプロイするための Microsoft の推奨事項と主要な概念について説明します。"
author: jeffgilb
ms.service: guidance
ms.topic: article
ms.date: 06/14/2017
ms.author: pnp
pnp.series.title: Best Practices
ms.translationtype: Human Translation
ms.sourcegitcommit: ff2fb126905d2a68c5888514262212010e108a3d
ms.openlocfilehash: bb869e67340aa7a9f645c0b51f5a44d91ab51ce8
ms.contentlocale: ja-jp
ms.lasthandoff: 06/17/2017


---

# <a name="secure-email-policies-and-configurations"></a>セキュリティで保護された電子メール ポリシーと構成
 
## <a name="introduction"></a>はじめに

このドキュメントに記載されている推奨事項は、企業全体に対する電子メール ポリシーと構成の適用に関する Microsoft の一般的なガイドラインを示しています。 これらの推奨事項によって、従業員の保護と生産性の両方が確保されます。  具体的には、このドキュメントは、ユーザーの操作性に対する影響を最小限に抑えると同時に、組織の電子メールを保護することに焦点を当てています。

### <a name="intended-audience"></a>対象ユーザー

このドキュメントは、[Exchange Online](https://technet.microsoft.com/library/jj200580.aspx) (Office 365) と [Microsoft Enterprise Mobility + Security](http://microsoft.com/ems) 製品に慣れているエンタープライズ インフラストラクチャの設計者と IT プロフェッショナルを対象としています。 これらの製品には Azure Active Directory (ID)、Microsoft Intune (デバイス管理)、Azure Information Protection (データ保護) が含まれますが、これらに限定されるわけではありません。 

### <a name="customer-environment"></a>お客様の環境

このドキュメントで推奨されているポリシーは、Microsoft クラウドですべての業務を行っている企業組織と、オンプレミスと Microsoft クラウドにインフラストラクチャをデプロイしているお客様の両方に適用されます。 

### <a name="assumptions"></a>前提条件

このドキュメントのほとんどの推奨事項で、Enterprise Mobility + Security (EMS) E5 サブスクリプションでのみ使用可能なサービスが使用されます。 提示する推奨事項では、EMS E5 サブスクリプションのすべての機能を使用できることが想定されています。 

このドキュメントでは、電子メールを保護するための推奨構成を、新しく配置された環境に適用する方法の概要を示しています。  今後のドキュメントで、この後説明する既存のポリシーと構成から移行する方法に関して追加のガイダンスが提供される可能性があります。

### <a name="caveats"></a>注意事項

組織は、規制やその他のコンプライアンス要件の対象になることがあります。そのときに、ここに示されている推奨構成とは異なるポリシーの適用を要求する推奨事項が含まれる場合があります。  ここに示されている構成では、これまでは使用することができなかった利用管理を推奨しています。  Microsoft がこれらの管理を推奨するのは、セキュリティと生産性が釣り合っていることを確信しているためです。  

Microsoft では、組織を保護するための多様な要件に対応するために最善を尽くしています。 しかし、考えられるすべての要件や組織独自のすべての状況に対応することはできません。 Microsoft と Secure Productive Enterprise チームが組織でポリシーを適切に適用する方法についてどのように考えているかを把握するためのガイドとして、このドキュメントを使用してください。 

>[!NOTE]
>これらの推奨事項で説明されている保護機能を理解するために必要な主要な概念の概要については、[EMS と Office 365 サービスの説明](secure-email-ems-office365-service-descriptions.md)に関するトピックを参照してください。
>

## <a name="core-concepts"></a>主要な概念

世界中のすべてのセキュリティ対策は、仕事を片付けようとしたときに不要な摩擦を経験したユーザーが組織のセキュリティ ポリシーをバイパスすることを重要視していません。 Azure AD シングル サインオン (SSO) は、ユーザーの負担を最小限に抑えるように努力しています。 これにより、ユーザーは、生産性を維持しながら、組織のアクセス制御ポリシーに従うことができます。 

### <a name="single-sign-on-authentication"></a>シングル サインオン認証

次の図は、一般的な SSO 認証フローを示しています。

![エンド ユーザーのシングル サインオン エクスペリエンス](./media/secure-email/typical-authentication-flow.png)

クライアントは、認証を開始するために資格情報 (ユーザー名やパスワードなど) と過去に取得した SSO アーティファクトの両方またはいずれかを Azure AD に送信します。 SSO アーティファクトは、ブラウザーのセッション トークンでもリッチ アプリケーションの更新トークンでもかまいません。 

Azure AD は、資格情報と SSO アーティファクトを検証して、すべての該当するポリシーを評価します。 その後、リソース プロバイダー (図では Exchange Online) 用のアクセス トークンを発行します。 Azure AD は、クライアントが今後の要求で SSO を実現できるように、応答の一部として SSO アーティファクトも発行します。 

クライアントは、SSO アーティファクトを保存し、身元証明としてアクセス トークンをリソース プロバイダーに送信します。 Exchange Online は、アクセス トークンを検証し、必要なチェックを実行した後、クライアントに電子メール メッセージへのアクセスを許可します。

#### <a name="single-sign-on-sso-refresh-tokens"></a>シングル サインオン (SSO) 更新トークン

SSO は、さまざまな方法で実現できます。 たとえば、ID プロバイダーの Cookie を SSO アーティファクトとして使用して、ブラウザーにユーザーのサインイン状態を保存できます。 この場合、アプリケーションに対する次回以降のサインインは、同じ ID プロバイダーを使用してサイレントで (資格情報を要求するプロンプトなしで) 実行することができます。 

ユーザーが Azure AD で認証されると、ユーザーのブラウザーと Azure AD で SSO セッションが確立されます。 SSO トークンは、Cookie の形式でこのセッションを表します。 Azure AD は、永続的と非永続的という 2 種類の SSO セッション トークンを使用します。 永続的なセッション トークンは、サインイン中に [サインインしたままにする] チェック ボックスが選択された場合に、ブラウザーによって永続的な Cookie として保存されます。 非永続的なセッション トークンは、セッション Cookie として保存され、ブラウザーが閉じるときに破棄されます。 

[OpenId Connect](http://openid.net/specs/openid-connect-core-1_0.html) や [OAuth 2.0](https://tools.ietf.org/html/rfc6749) などの最新の認証プロトコルを使用できる堅牢なアプリケーションでは、SSO アーティファクトとして (前述の SSO Cookie に加え) 更新トークンを使用できます。 アプリケーションが新しいアクセス トークンを要求すると、更新トークンが承認サーバーに提示されます。 

更新トークンには、ユーザーを認証するときに使用される認証方法の種類に関する要求と属性が含まれます。 たとえば、ユーザーが複数の方法を使用する認証 (ユーザー名とパスワード + 電話ベースの認証) に成功した場合、更新トークンには多要素認証 (MFA) 要求が存在します。 MFA の有効期間などのデータを含む追加要求も存在する可能性があります。 

クライアントは、更新トークンを使用して、新たな対話型認証なしで、新しいアクセス トークンを取得することができます。 更新トークンの有効期間はアクセス トークンに比べて非常に長く、更新トークンを使用して、アクセス許可と更新トークンの新しいペアを取得できます。 新たに取得した更新トークンを続けて使用して、アクセス許可と更新トークンの次のペアを取り込めます。 

クライアントは、更新トークンに対して設定された最大非アクティブ時間に達するか、更新トークンの最大有効期間が経過するか、認証および承認ポリシーの要件が変更されるまで、この SSO プロセスを続行します。 この変更は、元の更新トークンの発行時に発生します。 パスワードのリセットなどのユーザー属性の重大な変更も、新しい認証トークンの生成を要求します。 クライアントが操作を続行するには、対話型認証を新たに行う必要があります。 これは、本質的には、クライアントがこれまで経験したことがない SSO 処理の中断を意味します。 

#### <a name="conditional-access"></a>条件付きアクセス

アプリケーションの承認サーバーとしての Azure AD は、ユーザーがアクセスしようとしているリソースに適用される条件付きアクセス ポリシーの評価に基づいて、アクセス トークンを発行するかどうかを決定します。 ポリシーの要件を満たしていれば、アクセス トークンと更新された更新トークンが発行されます。 ポリシーに適合しない場合は、ポリシーに適合する方法の指示が表示され、ユーザーは多要素認証 (MFA) などの追加の手順の完了を要求されることがあります。  MFA が完了すると、MFA 要求が更新トークンに追加されます。  

更新トークン内の要求は、時間の経過と共に蓄積されます。 要求の一部には有効期限があり、期限切れになると、承認チェック時に考慮されなくなります。 これによって、予期しない結果が発生する可能性があります。 たとえば、条件付きアクセス ポリシーが、エクストラネットからの認証には MFA を要求するように構成されているとします。 このようなケースで、ユーザーがエクストラネットからリソースにアクセスするときに、予期される MFA プロンプトが表示されないことがあります。 考えられる理由は、ユーザーがイントラネットから離れる直前に MFA を実行していたことです。 このため、ユーザーのアクセス トークンには有効な MFA 要求が存在しています。 この MFA 要求がポリシー要件を満たすため、Azure AD は、追加の MFA 要求をユーザーに求めることはありません。

#### <a name="token-lifetime-policy"></a>トークンの有効期間ポリシー

トークン自体に、トークン内の個々のクレームの有効期限を超える有効期間があります。 前に述べたように、SSO エクスペリエンスが中断する理由の 1 つは、トークンの有効期間が終了することです。 [トークンの有効期間ポリシー](https://docs.microsoft.com/azure/active-directory/active-directory-configurable-token-lifetimes)を使用して、Azure AD によって発行されるトークンの有効期間を設定できます。 これまでの説明から推察できるように、SSO セッションの輪郭の定義は、把握するのが容易ではありません。 たとえば、接続されていないように見えるさまざまな要素で構成される機能豊富なアプリが、SSO セッションの有効期間に影響を与える可能性があります。

>[!NOTE]
>Azure AD グローバル管理者は、更新トークンの有効性と非アクティブ期間を制御できます。 記事で説明しているアクセス トークンと要求の詳細については、「[Azure Active Directory における構成可能なトークンの有効期間](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-configurable-token-lifetimes)」を参照してください。
>

#### <a name="primary-refresh-tokens"></a>プライマリ更新トークン

ここまで、この記事では、単一のクライアントのコンテキストの中で SSO がどのように動作するかについて説明してきました。 ただし、それだけでは、単一のアプリで SSO を体験するには十分ではありません。 今日、ユーザーは、Microsoft Office などの同じアプリケーション スイートの複数のアプリケーションにまたがる対話型ワークフローを行っています。 ユーザーは、社内で開発された LOB アプリケーションを含む、関連性のない複数のアプリケーションにアクセスする必要があります。 

伝統的に、ドメインに参加している Windows デバイスは、Windows 統合認証 (Kerberos) を使用して、複数のアプリケーションとリソースの間での高度な SSO を実現しています。 これらのアプリには、Internet Explorer や Edge などのサポートされているブラウザーが含まれています。 Azure AD の世界でこれに類似するものがプライマリ更新トークン (PRT) という形で存在します。 

この特権を持つ PRT トークンは、一連の厳選されたクライアント エンティティ (プラットフォーム システム コンポーネントなど) にのみ使用できます。 選択されたエンティティは他のクライアント アプリケーションに対して仲介型認証アクセスを実行できるため、シームレスな SSO エクスペリエンスを提供することができます。 

[iOS](https://docs.microsoft.com/azure/active-directory/develop/active-directory-sso-ios) と [Android ](https://docs.microsoft.com/azure/active-directory/develop/active-directory-sso-android) デバイスの Office 365 ユーザーのために、必要な認証の数を削減するための追加作業である、認証ブローカー機能の適用が行われています。 この機能は、Microsoft Authenticator アプリと Intune ポータル サイト アプリに組み込まれています。

>[!NOTE]
>このドキュメントに記載されている推奨事項は、いずれかのアプリがユーザーの iOS または Android デバイスにデプロイされていることを前提としています。 たとえば、認証ブローカー (Microsoft Authenticator や Intune ポータル サイト) などのアプリです。
>

### <a name="multi-factor-authentication"></a>多要素認証

多要素認証 (MFA) は、認証対象についての高レベルの信頼を提供しますが。その理由は、対象の身元に関する複数の証明や証拠を対象が提示するためです。 証明は、対象と証明機関のみが認識できる事前に確立されたシークレットでも、対象のみが所有することになっている物理的な実体でもかまいません。 通常、MFA は、段階的に実行されます。 最初に、パスワードを使用して ID を確立します。その後、別の (悪意のある攻撃に強い) 認証方法を使用して、第 2 の要素を認証する必要があります (順序が逆の場合もあります)。

MFA (強力な認証) の解釈は、証明機関によって多少異なる場合があります。 たとえば、一部の証明機関 (具体的にはこれらの機関でポリシーを構成する管理者) は、物理的なスマート カード ベースの認証を MFA と解釈することを選択する場合があります。 厳密に言えばスマート カード認証は単一段階の認証ですが、それでもこのように解釈される可能性があります。 

スマート カードを使用するには物理的なスマート カードの所有と PIN (シークレット) の入力を要件とすることで、この組み合わせを MFA として解釈できます。 また、実行する必要がある厄介な認証方法の実行回数を少なくすることが選択されれる場合もあります。 このため、強力な認証と認証の間で実行される標準的な認証は、通常は強力な認証を必要とするリソースにとって有効であるとみなされます。 たとえば、ある組織では、ユーザーに MFA の実行を数時間ごとまたは数日ごとに実行することを容認できる場合があります。 この時間は、保護されるリソースの機密性によって決まり、リソースにアクセスしようとしているユーザーの物理的な場所が変わらない限り、変更されることはありません。

Azure AD と ADFS MFA は、認証が MFA で実行されるかどうかを、MFA 要求を使用して指示します。 既定では、Azure AD は、認証が [Azure MFA](https://docs.microsoft.com/azure/multi-factor-authentication/multi-factor-authentication-get-started-cloud) または [Windows Hello for Business](https://docs.microsoft.com/en-us/windows/access-protection/hello-for-business/hello-identity-verification) で実行される場合に MFA 要求を含むトークンを発行します。 フェデレーション シナリオでは、Azure AD は、ADFS などのフェデレーション ID プロバイダーの MFA 要求を使用し、そのトークン内の MFA 要求を引き継ぎます。 

### <a name="security-guidelines"></a>セキュリティ ガイドライン

このセクションには、以降のセクションに提示されているセキュリティで保護された電子メールの推奨事項を実装するときに従う必要がある一般的なセキュリティ ガイドラインが含まれています。

#### <a name="security-and-productivity-trade-offs"></a>セキュリティと生産性のトレードオフ

セキュリティと生産性の間にはトレードオフがあります。 これらのトレードオフを理解するために、セキュリティ (S) と機能 (F) と使いやすさ (U) の 3 点を頂点とする SFU (セキュリティの三角形) が広く使用されています。

![セキュリティと生産性のトレードオフ](./media/secure-email/security-triad.png)

この SFU モデルに基づいて、このドキュメントの推奨事項では、次の原則を用いています。 

* 対象者を知る: 職務権限やセキュリティ上の禁止事項に柔軟性を持たせる
* セキュリティ ポリシーを適切なタイミングで適用し、セキュリティの意味があることを保証する

#### <a name="administrators-versus-users"></a>管理者とユーザー

管理アカウントを所有しているか、一時的に管理カウント/特権を所有する資格があるすべてのユーザーを含むセキュリティ グループを作成することをお勧めします。 これらのセキュリティ グループを使用して、Azure AD と Office 365 の管理者に固有の条件付きアクセス ポリシーを定義します。  

ポリシーでは、アカウントに関連付ける特権を考慮することをお勧めします。 [Office 365 管理者](https://support.office.com/en-us/article/About-Office-365-admin-roles-da585eea-f576-4f55-a1e0-87090b6aaa9d)ロールは、Exchange Online と Office 365 に比べて、かなり多くの権限を所有しています。 そのため、これらのアカウントに対するポリシーは、通常のユーザー アカウントよりも厳格にすることをお勧めします。 管理者を参照するすべてのポリシーは、Office 365 管理者アカウントに対して推奨されるポリシーを参考にすることをお勧めします。

#### <a name="reduce-the-number-of-accounts-with-persistent-admin-access"></a>永続的な管理アクセス権を持つアカウントの数を減らす

Azure AD Privileged Identity Management を使用して、永続的な管理アカウントの数を減らしてください。 さらに、Office 365 管理者は、管理以外の通常業務で使用するためユーザー アカウントを別に用意し、 職務権限に関連付けられているタスクを完了する必要があるときのみ、管理アカウントを使用することをお勧めします。

## <a name="next-steps"></a>次のステップ
[推奨されるポリシー](secure-email-recommended-policies.md)

