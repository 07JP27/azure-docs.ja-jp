<properties 
	pageTitle="ストレージ アカウントの概念 | Azure" 
	description="ストレージ アカウントの概念について学習します。" 
	headerExpose="" 
	footerExpose="" 
	services="storage" 
	authors="tamram" 
	manager="adinah" 
	editor="" 
	documentationCenter=""/>

<tags 
	ms.service="storage" 
	ms.workload="storage" 
	ms.tgt_pltfrm="na" 
	ms.devlang="multiple" 
	ms.topic="article" 
	ms.date="11/10/2014" 
	ms.author="tamram"/>


# Azure ストレージ アカウントについて

Azure ストレージ アカウントは、セキュリティで保護された、一意のアカウントであり、このアカウントを使用することで、BLOB、キュー、ファイル サービスといった、 - Azure ストレージ サービスにアクセスすることができます。データは、ストレージ アカウントのレベルに応じてセキュリティで保護され、既定では、所有者であるユーザーのみがデータを利用できます。 

Azure Storage は、ストレージ アカウントに基づいた使用量によって課金されます。ストレージのコストは、ストレージ容量、レプリケーション スキーム、ストレージ トランザクション、送信データ転送という 4 つの要因に基づいています。 

- ストレージ容量とは、データの保存に使用するためにストレージ アカウントに割り当てられた容量を指します。単純にデータを保存する場合の料金は、保存するデータ量とレプリケーション方法によって決まります。 
- レプリケーションによって、1 回に保持するデータのコピー数や、データの場所が決定されます。 
- トランザクションには、Azure ストレージに対するすべての読み取り操作と書き込み操作が含まれます。 
- 送信データ転送とは、Azure リージョンから転送されたデータを意味します。他のリージョンで動作しているアプリケーションがストレージ アカウント内のデータにアクセスした場合、そのアプリケーションがクラウド サービスか、その他の種類のアプリケーションかに関係なく、送信データ転送として課金されます(Azure サービスでは、同じデータ センター内のデータとサービスをグループ化して、送信データ転送処理とそれに伴う料金を削減または不要にする手順が用意されています)。  

ストレージ容量、レプリケーション、トランザクションの料金の詳細については、[Storage (ストレージ サービス) の料金詳細](http://azure.microsoft.com/pricing/details/#storage) のページを参照してください。送信データ転送の料金の詳細については、[データ転送の料金の詳細](http://azure.microsoft.com/pricing/details/data-transfers/) を参照してください。

この記事では、ストレージ アカウントの作成方法および、作成時に検討する必要があるいくつかの決定事項について説明します。ストレージ アカウントのアクセス キーの管理方法、およびストレージ アカウントの削除方法についても説明します。

## 目次 ##

- [方法:ストレージ アカウントを作成する](#create)
- [方法:ストレージ アクセス キーを表示、コピー、再生成する](#regeneratestoragekeys)
- [方法:ストレージ アカウントを削除する](#deletestorageaccount)


## <a id="create"></a>方法:ストレージ アカウントを作成する ##

1. [管理ポータル] にサインインします(https://manage.windowsazure.com)。

2. **[新規作成]**、**[ストレージ]**、**[簡易作成]** の順にクリックします。

	![NewStorageAccount](./media/storage-create-storage-account/storage_NewStorageAccount.png)

3. **[URL]** に、ストレージ アカウントの名前を入力します。Azure ストレージで、オブジェクトの処理にこの名前がどのように使用されるかについては、後述の [ストレージ アカウント エンドポイント](#account-endpoints) を参照してください。

4. **[場所/アフィニティ グループ]** で、自分または顧客がストレージ アカウントで使用しやすい場所を選択します。Azure 仮想マシンやクラウド サービスなど、別の Azure サービスがストレージ アカウントのデータにアクセスする場合、一覧のアフィニティ グループから 1 つを選択して、同じデータ センター内のストレージ アカウントと、パフォーマンス向上とコスト削減のために使用している Azure サービスとをグループ化することができます。 

	> [AZURE.NOTE] ストレージ アカウントが作成されると、アフィニティ グループを選択する必要があることに注意してください。既存のアカウントをアフィニティ グループに移動することはできません。

	アフィニティ グループの詳細については、後述の [アフィニティ グループによるサービス コロケーション](#affinity-group) を参照してください。

	
5. 複数の Azure サブスクリプションがある場合は、"**サブスクリプション**" フィールドが表示されます。**[サブスクリプション]** ボックスに、ストレージ アカウントを使用する Azure サブスクリプションを入力します。1 つのサブスクリプションに最大 5 個のストレージ アカウントを作成できます。

6. **[レプリケーション]** で、ストレージ アカウントで使用するレプリケーションのレベルを選択します。推奨されるレプリケーションのオプションは地理冗長ストレージのレプリケーションです。これは、最大限のデータ耐久性を提供します。Azure ストレージのレプリケーション オプションの詳細については、後述の [ストレージ アカウント レプリケーションのオプション](#replication-options) を参照してください。

6. **[ストレージ アカウントの作成]** をクリックします。

	ストレージ アカウントを作成するには数分かかる場合があります。状態を確認するには、ポータルの下部にある通知を監視します。ストレージ アカウントが作成されると、新しいストレージ アカウントの状態が "**オンライン**" になって、使用できるようになります。 

![StoragePage](./media/storage-create-storage-account/Storage_StoragePage.png)


### <a id="account-endpoints"></a>ストレージ アカウント エンドポイント 

Azure Storage に格納するすべてのオブジェクトは一意の URL アドレスを持ち、ストレージ アカウントの名前がこのアドレスのサブドメインになります。ドメイン名の付いたサブドメインは、各サービスに固有なものとなり、ストレージ アカウントの*エンドポイント*を形成します。 

たとえば、ストレージ アカウントの名前が「*mystorageaccount*」の場合、ストレージ アカウントの既定のエンドポイントは次のようになります。 

- BLOB サービス: http://*mystorageaccount*.blob.core.windows.net

- テーブル サービス: http://*mystorageaccount*.table.core.windows.net

- キュー サービス: http://*mystorageaccount*.queue.core.windows.net

- ファイル サービス: http://*mystorageaccount*.file.core.windows.net

アカウントは、作成されると Azure の管理ポータルで、ストレージのダッシュボードに、ストレージ アカウントのエンドポイントが表示されます。

ストレージ アカウント内のオブジェクトにアクセスするための URL は、ストレージ アカウント内のオブジェクトの場所をエンドポイントに追加して作成します。たとえば、BLOB アドレスは次のような形式になる場合があります。 http://*mystorageaccount*.blob.core.windows.net/*mycontainer*/*myblob*.

また、カスタム ドメイン名もストレージ アカウントを使用するように構成することができます。詳細については、[ストレージ アカウントの BLOB データのカスタム ドメイン名の構成](http://azure.microsoft.com/documentation/articles/storage-custom-domain-name/) を参照してください。

### <a id="affinity-group"></a>アフィニティ グループによるサービス コロケーション 

*アフィニティ グループ*は、Azure ストレージ アカウント内で Azure サービスと仮想マシンを地理的にまとめたグループです。アフィニティ グループは、コンピューティング ワークロードを同じデータ センター内または対象ユーザーの近くに配置することにより、サービス パフォーマンスを向上させることができます。また、同じアフィニティ グループに属している別のサービスがストレージ アカウント内のデータにアクセスする場合には、課金されません。

> [AZURE.NOTE]  アフィニティ グループを作成するには、管理ポータルの <b>[設定]</b> 領域を開き、<b>[アフィニティ グループ]</b> をクリックして、<b>[新しいアフィニティ グループの追加]</b> または <b>[追加]</b> をクリックします。また、Azure サービス管理 API を使用してアフィニティ グループを作成し管理することもできます。詳細については、<a href="http://msdn.microsoft.com/library/windowsazure/ee460798.aspx">アフィニティ グループに対する操作</a> を参照してください。


### <a id="replication-options"></a>ストレージ アカウント レプリケーションのオプション

[AZURE.INCLUDE [storage-replication-options](../includes/storage-replication-options.md)]


## <a id="regeneratestoragekeys"></a>方法:ストレージ アクセス キーを表示、コピー、再生成する

ストレージ アカウントを作成するときに、Azure によって 2 つの 512 ビット ストレージ アクセス キーが生成されます。これらは、ストレージ アカウントにアクセスするときに認証の目的で使用されます。Azure によって 2 つのストレージ アクセス キーが提供される結果、ストレージ サービスやサービスへのアクセスを中断することなく、これらのキーを再生成できます。

> [AZURE.NOTE] ストレージ アカウント アクセス キーは、他の人と共有しないことをお勧めします。アクセス キーを入力しないでストレージ リソースにアクセスする場合は、*共有アクセス署名*が利用できます。共有アクセス署名を使用すると、指定した期間、指定した権限で、アカウント内のリソースにアクセスできるようになります。詳細については、[共有アクセス署名、第 1 部: SAS モデルについて](../storage-dotnet-shared-access-signature-part-1/) を参照してください。

[管理ポータル](http://manage.windowsazure.com) で、ダッシュボードまたは **[ストレージ]** ページの **[キーの管理]** を使用して、BLOB、テーブル、およびキュー サービスのアクセスに使用するストレージ アクセス キーを表示、コピー、および再生成します。 

### ストレージ アクセス キーのコピー ###

**[キーの管理]** を使用してストレージ アクセス キーをコピーし、接続文字列で使用することができます。接続文字列には、ストレージ アカウント名および認証で使用するキーが必要です。Azure ストレージ サービスにアクセスする接続文字列の構成方法の詳細については、「[Azure 接続文字列の構成方法]」を参照してください(http://msdn.microsoft.com/library/ee758697.aspx)。

1. [管理ポータル](http://manage.windowsazure.com)で、**[ストレージ]** をクリックし、目的のストレージ アカウント名をクリックしてダッシュボードを開きます。

2. **[キーの管理]** をクリックします。

 	**[アクセス キーの管理]** が開きます。

	![Managekeys](./media/storage-manage-storage-account/Storage_ManageKeys.png)

 
3. ストレージ アクセス キーをコピーするには、キー文字列を選択します。右クリックして **[コピー]** をクリックします。

### ストレージ アクセス キーの再生成 ###
ストレージ接続のセキュリティを高めるために、ストレージ アカウントのアクセス キーは定期的に変更する必要があります。片方のアクセス キーでストレージ アカウントに接続したまま、もう片方のアクセス キーを再生成できるように、アクセス キーは 2 つ割り当てられます。 

> [AZURE の警告] アクセス キーを再生成すると、仮想マシン、メディア サービス、ストレージ アカウントに依存するすべてのアプリケーションが影響を受けます。アクセス キーを使用してストレージ アカウントにアクセスするすべてのクライアントを更新し、新しいキーが使用されるようにする必要があります。

**仮想マシン** - ストレージ アカウントに実行中の仮想マシンが含まれる場合は、アクセス キーを再生成した後に、すべての仮想マシンを再デプロイする必要があります。再デプロイを回避するには、アクセス キーを生成する前に仮想マシンをシャットダウンします。
 
**メディア サービス** - ストレージ アカウントに依存するメディア サービスがある場合は、キーを再生成した後に、アクセス キーをメディア サービスと再同期する必要があります。
 
**アプリケーション** - ストレージ アカウントを使用する Web アプリケーションやクラウド サービスがある場合は、キーを切り替えない限り、キーを再生成すると接続が失われます。キーを切り替える手順は次のとおりです。

1. ストレージ アカウントのセカンダリ アクセス キーを参照するようにアプリケーション コードの接続文字列を更新します。 

2. ストレージ アカウントのプライマリ アクセス キーを再生成します。[管理ポータル](http://manage.windowsazure.com)で、ダッシュボードまたは **[構成]** ページの **[キーの管理]** をクリックします。プライマリ アクセス キーの **[再生成]** をクリックし、確認画面で **[はい]** をクリックして新しいキーを生成します。

3. 新しいプライマリ アクセス キーを参照するようにアプリケーション コードの接続文字列を更新します。

4. セカンダリ アクセス キーを再生成します。

## <a id="deletestorageaccount"></a>方法:ストレージ アカウントを削除する

使わなくなったストレージ アカウントを削除するには、ダッシュボードまたは **[構成]** ページの **[削除]** を使用します。**[削除]** をクリックすると、アカウントにあるすべての BLOB、テーブル、キューを含めて、ストレージ アカウント全体が削除されます。 

> [AZURE.WARNING] 削除したストレージ アカウントのコンテンツを復元する手段はありません。保存する必要のあるデータは、アカウントを削除する前にバックアップを取っておいてください。<br />
	ストレージ アカウントに Azure の仮想マシンの VHD ファイルまたはディスクが含まれる場合、ストレージ アカウント全体を削除する前に、これらの VHD ファイルを使用するイメージやディスクを削除する必要があります。最初に、実行中の場合は仮想マシンを停止してから削除します。ディスクを削除するには、[ディスク] タブに移動し、ストレージ アカウントに格納されているディスクを削除します。イメージを削除するには、[イメージ] タブに移動し、アカウントに含まれているイメージを削除します。


1. [管理ポータル](http://manage.windowsazure.com)で、**[ストレージ]** をクリックします。

2. ストレージ アカウント項目の名前以外の部分をクリックして、**[削除]** をクリックします。

	 -または-

	ストレージ アカウントの名前をクリックしてダッシュボードを開き、**[削除]** をクリックします。

3. 確認画面で **[はい]** をクリックして、ストレージ アカウントを削除します。




<!--HONumber=42-->
