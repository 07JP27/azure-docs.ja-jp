<properties 
	pageTitle="データの前処理とクリーニング | Azure" 
	description="データの前処理とクリーニング" 
	metaKeywords="data cleansing" 
	services="machine-learning" 
	documentationCenter="" 
	authors="xibingaomsft,msolhab" 
	manager="paulettm" 
	editor="cgronlun" />

<tags 
	ms.service="machine-learning" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="02/16/2015" 
	ms.author="xibingaomsft,msolhab" /> 


データの前処理とクリーニング
========================================
未加工のデータは、多くの場合、ノイズが多く、信頼性が低く、値が欠落している可能性もあります。このようなデータを使用してモデリングを行うと、誤解を招く結果が生成されることがあります。データの前処理とクリーニングは、データセットを Machine Learning で使用する前に行う必要のある重要なステップです。この記事では、データを Azure Machine Learning に取り込む前に実行できるさまざまなデータ前処理の手順を紹介します。 

----------------

1. **なぜデータの前処理やクリーニングを行うのか?**

	実世界のデータはさまざまなソースやプロセスから収集されるため、不規則なデータや破損されたデータが含まれていて、データセットの品質が損なわれることがあります。よく発生するデータ品質の問題には、次のようなものがあります。
	- 不完全: データの属性が欠落していたり、欠落値を含んでいたりします。
	- ノイズが多い: データに誤りがあるレコードや外れ値が含まれています。
	- 整合性がない: データに矛盾や食い違いのあるレコードが含まれています。 
		
	データの品質は、予測モデルの品質の前提となるものです。"ゴミ入れ、ゴミ出し" を回避し、データの品質、ひいてはモデルの品質を向上させるには、データの正常性スクリーニングを実施してデータの問題点を早期に発見し、それに対処するための前処理とクリーニングの手順を決定する必要があります。

2. **よく実行されるデータの正常性スクリーニングには何があるか?** 
	
	全般的なデータの品質を確認するには、次の事項をチェックします。
    - レコードの数。
    - 属性 (または特徴) の数。
	- 属性データの種類 (名義、順序、連続)。
	- 欠落値の数。
	- データの形式の一貫性。データが tsv または csv の場合は、列の区切り記号と行の区切り記号によって常に正しく列と行が分離されているかどうかを確認します。データが HTML または XML 形式の場合は、それぞれの標準に基づいてデータが整形式かどうかを確認します。また、部分的に構造化されたデータやまったく構造化されていないデータから構造化された情報を抽出するためにも解析が必要になります。
	- 一貫性のないデータ レコード。たとえば、学生の GPA (成績) を格納しているデータであれば、GPA が、たとえば 0 ～ 4 の範囲で指定されていることを確認します。 

	データに関する問題が見つかったら、多くの場合、次のような処理ステップが必要になります。欠落値のクリーニング、データの正規化、データの離散化、データの配置に影響する可能性がある埋め込み文字を削除/置換するテキスト処理、共通のフィールドにデータ型が混在している場合の処理、その他。 
	
	Azure Machine Learning は、形式の整った表形式のデータを取り込みます。データが既に表形式である場合は、データの前処理を ML Studio 内で Azure Machine Learning を使用して直接実行できます。データが表形式でない場合は (たとえば、XML)、データを表形式に変換するための解析が必要になることがあります。  

3. **データの前処理の主要なタスクにはどのようもなのがあるか?**

	- データのクリーニング: 欠落値を入力し、ノイズ データや外れ値を検出して削除します。
	- データの変換: データを正規化して、次元やノイズを少なくします。
	- データの縮小: データのレコードまたは属性をサンプリングすることにより、データを処理しやすくします。
	- データの離散化: 連続値の属性をカテゴリ別の属性に変換することにより、Machine Learning の特定の方式で使いやすくします。
	- テキストのクリーニング: データの不整合を引き起こす可能性のある埋め込み文字を削除します。たとえば、タブ区切りのデータ ファイル内の埋め込みのタブや、レコードを中断する可能性のある改行などです。	
	
	以下のセクションでは、いくつかのデータの前処理ステップについて説明します。

4. **欠落値をどのように処理するか?**
	
	欠落値に対処するには、問題を扱いやすくするため、まず欠落値が発生している原因を識別することをお勧めします。欠落値を処理するための一般的な方法には、次のようなものがあります。

	- 削除: 欠落値があるレコードを削除します。
	- ダミーで置き換える: 欠落値をダミーの値に置き換えます。カテゴリ別の値なら unknown、数値なら 0 など。
	- 平均値で置き換える: 欠落しているデータが数値の場合は、欠落値を平均値で置き換えます。 
	- 最も頻繁に発生する値で置き換える: 欠落しているデータがカテゴリ別の値の場合は、欠落値を最も頻繁に発生する項目で置き換えます 
	- 回帰値で置き換える: 回帰メソッドを使用して、欠落値を回帰値で置き換えます。  

5. **データをどのように正規化するか?**
	
	データの正規化では、指定した範囲に数値をスケーリングします。よく使用されるデータの正規化方法は、次のとおりです。
	- 最小値と最大値による正規化: データを、たとえば 0 ～ 1 の範囲に、線形変換します。このとき、最小値を 0 に変換し、最大値を 1 に変換します。
	- Z スコアによる正規化: 平均と標準偏差に基づいてデータをスケーリングします。データ値と平均値の差を標準偏差で割って計算します。
	- 10 進スケーリング: 属性値の 10 進小数点を移動してデータをスケーリングします。  

6. **データをどのように離散化するか?**  

	データを離散化するには、連続値を名義属性または区間に変換します。たとえば、次のような方法があります。
	- 幅の等しいビン分割: 属性のすべての可能な値の範囲を同じサイズの N 個のグループに分割し、値が入るビンのビン番号をその値に割り当てます。
	- 高さの等しいビン分割: 属性のすべての可能な値を同じ個数ずつ N 個のグループに分割し、値が入るビンのビン番号をその値に割り当てます。  

7. **データをどのように縮小するか?**  

	データを処理しやすくするためにデータのサイズを縮小するには、さまざまな方法があります。データのサイズと領域に応じて、次の方法を適用できます。 
	- レコードのサンプリング: データ レコードをサンプリングし、代表的なサブセットのみをデータから選択します。 
	- 属性のサンプリング: 重要な属性のみをデータから選択します。  
	- 集計: データをグループに分割し、各グループの数値を格納します。たとえば、レストラン チェーンの過去 20 年間の毎日の売上の数値を毎月の売上に集計することにより、データのサイズを小さくします。  

8. **テキスト データをどのようにクリーニングするか?**  

	表形式データ内のテキスト フィールドには、列の配置やレコードの境界に影響を与える文字が含まれていることがあります。たとえば、タブ区切りファイルの項目に埋め込みタブが含まれていると、列の不整合が発生します。また、改行文字が含まれているとレコードの行が中断されます。テキストの読み取り/書き込み時にテキスト エンコードの処理を誤ると、情報の損失や、読み取り不能な文字 (null など) の発生などが起こり、テキスト解析に影響が出る可能性があります。テキスト フィールドが適切に配置されるようにクリーニングし、構造化されていない、または部分的に構造化されたテキスト データから構造化されたデータを抽出するには、注意深い解析と編集が必要になることがあります。

データを探索すると、データの初期ビューが提供されます。このステップの際に、データのいくつかの問題点が明らかになり、  それらの問題点に対処する処置を実行できることがあります。その場合は、問題の原因は何か、その問題点はどのようにして発生したのかと考えながら対処することが重要です。そのように作業を進めていくことは、問題点を解決するのに必要なデータ処理手順を決定するためにも役立ちます。また、データから引き出そうとしている洞察の種類によっても、データの処理作業の優先順位が変わります。

**参照資料**
	
>Data Mining: Concepts and Techniques、第 3 版、Morgan Kaufmann、2011、Jiawei Han、Micheline Kamber、Jian Pei 著

<!--HONumber=49-->