<properties
	pageTitle="Azure Batch の技術概要 | Microsoft Azure"
	description="Azure Batch サービスの概念、ワークフロー、シナリオについて説明します。"
	services="batch"
	documentationCenter=""
	authors="dlepow"
	manager="timlt"
	editor=""/>

<tags
	ms.service="batch"
	ms.workload="big-compute"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="get-started-article"
	ms.date="07/13/2015"
	ms.author="danlep"/>


# Azure Batch の技術概要
Azure Batch を使用すると、大規模な並列コンピューティングやハイ パフォーマンス コンピューティング (HPC) のアプリケーションをクラウドで効率的に実行できます。これは、ジョブを実行する管理された仮想マシン (VM) のコレクションのジョブ スケジューリングと自動スケールを提供するプラットフォーム サービスです。Batch サービスを使用すると、Azure でオンデマンド実行またはスケジュール実行するようにバッチ ワークロードを構成できます。HPC クラスター、VM、ジョブ スケジューラの構成や管理に伴う複雑さに悩む必要はありません。

>[AZURE.NOTE]Batch を使用するには、Azure アカウントが必要です。アカウントがない場合は、無料の試用アカウントを数分で作成することができます。詳細については、[Azure アカウントの作成に関するページ](http://azure.microsoft.com/develop/php/tutorials/create-a-windows-azure-account/)を参照してください。


## ユース ケース

Batch は、クラウドの弾力性とスケールを*バッチ処理*または*バッチ コンピューティング*に利用して、望ましい結果を得るために類似のタスクを大量に実行します。コマンド ライン プログラムまたはスクリプトがデータ ファイルのセットを入力として受け取り、データを一連のタスクで処理して、一連の出力ファイルを生成します。最終的な結果または大規模なワークフローの中間ステップが出力ファイルとなります。

バッチ コンピューティングは、定期的にまたはオンデマンドで大量のデータの処理、変換、および分析を行う組織にとって一般的なパターンです。これには、銀行の日次リスク レポートや定期的に行う必要がある給与処理などのサイクル末期処理が含まれます。また、一般に計算クラスターまたはグリッドのツールやリソースを必要とする大規模なビジネス、科学、エンジニアリング アプリケーションも含まれます。このようなアプリケーションには、デジタル コンテンツの作成から金融サービスや生命科学の研究までの分野での専門的なワークロードだけでなく、流体力学シミュレーションなどの従来の HPC アプリケーションも含まれます。

Batch は、本質的に並列な ("並列性がきわめて高い" とも呼ばれます) アプリケーションまたはワークロードに対応するため、複数のコンピューター (たとえば、Batch サービスによって管理されるコンピューティング VM) で並列タスクを実行するのに役立ちます。

![並列タスク][parallel]

**図 1:複数のコンピューターで実行される並列タスク**

たとえば、次のようになります。

* 財務リスクのモデリング
* 画像のレンダリングと画像処理
* メディアのエンコードとトランスコード
* 遺伝子配列の分析
* ソフトウェアのテスト

また、Batch を使用して並列計算を実行すると、最終的により少ないステップで、より複雑な他の並列ワークロードを処理できます。

>[AZURE.NOTE]現時点では、Batch で実行できるのは Windows Server のワークロードだけです。さらに、Batch では、Message Passing Interface (MPI) アプリケーションはサポートされていません。

## 開発者シナリオ

Batch では、Batch サービスで大規模な並列ワークロードを構成して実行するのに役立つさまざまな開発者シナリオがサポートされています。これらのシナリオでは、API を使用して、VM (コンピューティング ノード) のプールを作成および管理し、それらで実行されるジョブとタスクのスケジュールを設定します。Basic の概念について詳しくは、「[Azure Batch の API の基本](batch-api-basics.md)」をご覧ください。

以下のセクションでは、Batch 開発者の一般的なシナリオを示します。

### 並列ワークロードをスケールアウトする

最大数千個のコンピューティング コアのプールでのイメージ レンダリングなど、本質的に並列な作業を、Batch API を使用してスケールアウトします。コンピューティング クラスターをセットアップしたり、ジョブのキューイングやスケジュール設定のためのコードを記述したりして、必要な入力データと出力データを移動する代わりに、大きな計算ジョブのスケジュール設定を自動化し、ジョブを実行するコンピューティング VM のプールを拡張または縮小できます。オンデマンドで、スケジュールに従って、または [Azure Data Factory](https://azure.microsoft.com/documentation/services/data-factory/) などのツールによって管理される大きなワークフローの一部として、ジョブおよびタスクを実行するクライアント アプリまたはフロントエンドを作成できます。

図 2 は、処理のために分散先の Batch プールにアプリケーションを送信する簡単なワークフローを示します。

![作業項目のワークフロー][work_item_workflow]

**図 2: Batch の並列ワークロードをスケールアウトする**

1.	ジョブに必要な入力ファイル (ソース データやイメージ) を Azure ストレージ アカウントにアップロードします。これらのファイルは、Batch サービスがアクセスできるように、ストレージ アカウントに配置する必要があります。タスクが実行されると、Batch サービスは計算ノードにファイルを読み込みます。
2.	依存バイナリ ファイルをストレージ アカウントにアップロードします。バイナリ ファイルとは、タスクによって実行されるプログラムと依存アセンブリを表します。これらのファイルはストレージからもアクセスできる必要があります。これらのファイルは、計算ノードに読み込まれます。
3.	計算ノードのプールを作成し、VM サイズや実行する OS などのプロパティを指定します。また、ワークロードに対応してプール内のノードの数をスケールアップまたはスケールダウンする方法も定義できます。タスクを実行すると、このプールからノードが割り当てられます。
4.	プールで実行するジョブを定義します。
5.	ジョブにタスクを追加します。各タスクは、アップロードされたプログラムを使用して、アップロードされたファイルの情報を処理します。
6.	アプリケーションを実行し、出力の結果を監視します。


### 多くのコンピューティング処理を要するアプリをクラウド対応にする

Preview Batch Apps API を使用すると、既存のアプリケーションをラップして、Batch がバックグラウンドで管理するコンピューティング ノードのプールでサービスとしてアプリケーションを実行できます。アプリケーションは、クライアント ワークステーションまたはコンピューティング クラスターで現在実行している可能性があります。ユーザーがピーク時の作業をクラウドにオフロードできる、または作業を完全にクラウドで実行できる、サービスを開発できます。Batch Apps フレームワークは、入力および出力ファイルの移動、ジョブのタスクへの分割、ジョブとタスクの処理、およびデータの保存を処理します。

>[AZURE.IMPORTANT]Azure は、プレビュー形式の Batch Apps API のみを提供します。テストまたは概念実証プロジェクトの開発だけに使用する必要があります。Batch Apps の主要な機能は、将来リリースされるサービスの Batch API に統合されます。

図 3 は、Batch Apps API を使用してアプリケーションを発行した後、ユーザーがアプリケーションにジョブを送信できるようにする、基本的なワークフローを示しています。

![アプリケーションの発行ワークフロー][app_pub_workflow]

**図 3: Batch Apps を使用してアプリケーションを発行して実行するためのワークフロー**

1.	**アプリケーション イメージ** (既存のアプリケーション実行可能ファイルと必要なサポート ファイルの zip ファイル) を準備します。従来のサーバー ファームまたはクラスターで実行するのと同じ実行可能ファイルを使用できる場合があります。
2.	ワークロードを呼び出して Batch サービスにディスパッチする**クラウド アセンブリの** zip ファイルを作成します。これには 2 つのコンポーネントが含まれます。

	a.**ジョブ スプリッター** - ジョブを個別に処理できるタスクに分割します。たとえば、アニメーション シナリオで、ジョブ スプリッターは、ムービー レンダリング ジョブを受け取って個々のフレームに分割します。

	b.**タスク プロセッサ** - 特定のタスクに対してアプリケーション実行可能ファイルを呼び出します。たとえば、アニメーション シナリオで、タスク プロセッサはレンダリング プログラムを起動して、タスクで指定された 1 つのフレームをレンダリングします。

3.	Batch Apps API または開発者ツールを使用して、前の 2 つの手順で準備した zip ファイルを Azure ストレージ アカウントにアップロードします。これらのファイルは、Batch サービスがアクセスできるように、ストレージ アカウントに配置する必要があります。通常、この操作は、サービス管理者がアプリケーションごとに 1 回行います。
4.	Azure で有効になっているアプリケーション サービスにジョブを送信する方法を提供します。これには、アプリケーションの UI のプラグインや Web ポータルを使用できます。また、バックエンド システムの一部としての自動サービスを使用することもできます。

	ジョブを実行するには、次の手順を実行します。

	a.ユーザーのジョブに固有の入力ファイル (ソース データやイメージ) をアップロードします。これらのファイルは、Batch サービスがアクセスできるように、ストレージ アカウントに配置する必要があります。

	b.必要なパラメーターおよびファイルと共にジョブを送信します。

	c.API または Batch Apps ポータルを使用してジョブの進行状況を監視します。



## <a id="BKMK_Account">Batch アカウント</a>
Batch サービスでの使用と開発のために、1 つ以上の専用 **Batch アカウント**を作成する必要があります。Batch サービスに対して行うすべての要求は、アカウント名とそのアクセス キーを使用して認証する必要があります。

Batch アカウントを作成し、Azure プレビュー ポータルまたは [Batch PowerShell コマンドレット](batch-powershell-cmdlets-get-started.md)を使用してアカウントのアクセス キーを管理できます。

ポータルで Batch アカウントを作成するには

1. [Azure プレビュー ポータル](https://portal.azure.com)にサインインします。

2. **[新規]**、**[コンピューティング]**、**[Marketplace]**、**[すべて]** の順にクリックし、検索ボックスに「*Batch*」と入力します。

	![Marketplace での Batch][marketplace_portal]

3. 検索結果で **[Batch サービス]** をクリックして、**[作成]** をクリックします。

4. **[新しい Batch アカウント]** ブレードで、次の情報を入力します。

	a.**[アカウント名]** に、Batch アカウントの URL に使用する一意の名前を入力します。

	>[AZURE.NOTE]Batch アカウント名は Azure に一意である必要があります。3 ～ 24 文字で小文字と数字のみを使用します。

	b.**[リソース グループ]** をクリックして、アカウント用に既存のリソース グループを選択するか、新しいリソース グループを作成します。

	c.複数のサブスクリプションがある場合は、**[サブスクリプション]** をクリックし、アカウントが作成される使用可能なサブスクリプションを選択します。

	d.**[場所]** で、Batch が使用可能な Azure リージョンを選択します。

	![Batch アカウントを作成する][account_portal]

5. **[作成]** をクリックして、アカウントの作成を完了します。


アカウントの作成後は、ポータルでアカウントを見つけて、アクセス キーや他の設定を管理できます。たとえば、アクセス キーを管理するには、鍵のアイコンをクリックします。

![Batch アカウント キー][account_keys]

## その他のリソース

* [.NET 向け Azure Batch ライブラリの概要](batch-dotnet-get-started.md)
* [Azure Batch 開発ライブラリとツール](batch-development-libraries-tools.md)
* [Azure Batch REST API リファレンス](http://go.microsoft.com/fwlink/p/?LinkId=517803)
* [Azure Batch Apps REST API リファレンス](http://go.microsoft.com/fwlink/p/?LinkId=517804)

[parallel]: ./media/batch-technical-overview/parallel.png
[marketplace_portal]: ./media/batch-technical-overview/marketplace_batch.PNG
[account_portal]: ./media/batch-technical-overview/batch_acct_portal.png
[account_keys]: ./media/batch-technical-overview/account_keys.PNG
[work_item_workflow]: ./media/batch-technical-overview/work_item_workflow.png
[app_pub_workflow]: ./media/batch-technical-overview/app_pub_workflow.png

<!---HONumber=August15_HO9-->