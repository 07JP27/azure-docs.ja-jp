<properties title="How to create a hybrid deployment of RemoteApp" pageTitle="RemoteApp のハイブリッド デプロイメントの作成方法" description="Learn how to create a deployment of RemoteApp that connects to your internal network." metaKeywords="" services="" solutions="" documentationCenter="" authors="elizapo" manager="kathyw" />

<tags ms.service="remoteapp" ms.workload="tbd" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="09/12/2014" ms.author="elizapo" ms.manager="kathyw" />

#RemoteApp のハイブリッド デプロイメントの作成方法

RemoteApp のデプロイメントには、次の 2 種類の方法があります。 

- クラウド: Azure に完全に常駐し、Azure の管理ポータルの **[簡易作成]** オプションを使用して作成されます。  
- ハイブリッド: 内部設置型アクセス用の仮想ネットワークを含み、管理ポータルの **[VPN で作成]** オプションを使用して作成されます。

このチュートリアルでは、ハイブリッド デプロイメントを作成する手順について説明します。以下の 7 つのステップがあります。 

1.	[RemoteApp のカスタム テンプレート イメージ](http://azure.microsoft.com/ja-jp/documentation/articles/remoteapp-create-custom-image/)を作成します。
2.	RemoteApp サービスを作成する。
2.	仮想ネットワークに関連付ける。
3.	テンプレート イメージに関連付ける。
4.	ディレクトリ同期を構成します。RemoteApp を使用するには、次のいずれかの方法で Azure Active Directory と統合する必要があります。1) パスワード同期オプションを使用してディレクトリ同期を構成します。2) パスワード同期オプションを使用しないでディレクトリ同期を構成します。ただし、この場合は AD FS にフェデレーションされたドメインを使用します。
5.	RemoteApp プログラムを発行する。
6.	ユーザー アクセスを構成する。

**開始する前に**

サービスを作成する前に、以下の操作が必要です。

- RemoteApp のプレビューにサインアップします。これは、[http://azure.microsoft.com/ja-jp/services/remoteapp/](http://azure.microsoft.com/ja-jp/services/remoteapp/) で行うことができます。
- RemoteApp サービス アカウントとして使用するためのユーザー アカウントを Active Directory に作成します。ドメインへのマシンの参加のみが実行可能になるように、このアカウントのアクセス許可を制限します。
- オンプレミスのネットワークに関する情報を収集します。IP アドレスの情報と VPN デバイスの詳細情報が含まれます。
- [Azure PowerShell](http://azure.microsoft.com/ja-jp/documentation/articles/install-configure-powershell/) モジュールをインストールします。
- アクセス権を付与するユーザーとグループに関する情報を集めます。この情報とは、ユーザーまたはグループの Microsoft アカウントの情報または Active Directory の職場アカウントの情報です。
- テンプレート イメージを作成します。RemoteApp テンプレート イメージには、ユーザーに発行するアプリケーションとプログラムが含まれます。詳細な手順については、「[RemoteApp のカスタム テンプレート イメージの作成方法](http://azure.microsoft.com/ja-jp/documentation/articles/remoteapp-create-custom-image/)」を参照してください。 






## **手順 1.RemoteApp サービスを作成する** ##



1. [Azure の管理ポータル](http://manage.windowsazure.com)で、[RemoteApp] ページに移動します。
2. **[新規]、[VPN で作成]** の順にクリックします。
3. サービスの名前を入力してから、**[RemoteApp サービスの作成]** をクリックします。

RemoteApp サービスが作成されたら、RemoteApp の **[クイック スタート]** ページに進んでセットアップの手順を続行します。

## **手順 2.仮想ネットワークに関連付ける** ##

ユーザーは仮想ネットワークを利用することで、ローカル ネットワーク上のデータに RemoteApp リモート リソースを介してアクセスします。仮想ネットワークの関連付けを構成するには、次の 4 つの手順があります。

1. [クイック スタート] ページで、**[RemoteApp 仮想ネットワークに関連付ける]** をクリックします。 
2. 新しい仮想ネットワークを作成するか、既存のネットワークを使用するか選択します。このチュートリアルでは、新しいネットワークを作成します。
3. 新しいネットワークのために次の情報を提供します。  
      - 名前
      - 仮想ネットワークのアドレス空間
      - ローカル アドレス空間
      - DNS サーバーの IP アドレス
      - VPN の IP アドレス

	詳細については、「[管理ポータルでのサイト間 VPN の構成](http://msdn.microsoft.com/library/azure/dn133795.aspx)」を参照してください。

4. 次に、[クイック スタート] ページに戻り、**[スクリプトを取得]** をクリックして、先ほど作成した仮想ネットワークに VPN デバイスを接続する構成のためのスクリプトをダウンロードします。VPN デバイスに関する次の情報が必要になります。 
	- ベンダー名
	- プラットフォーム
	- オペレーティング システム

スクリプトを保存し、VPN デバイスで実行します。 

	**注: **このスクリプトを実行すると、仮想ネットワークが準備完了状態に移行します。これには 5 ～ 7 分かかる場合があります。ネットワークの準備が完了するまでは使用できません。

5. 最後にもう一度 [クイック スタート] ページで、**[ローカル ドメインに参加]** をクリックします。RemoteApp サービス アカウントをローカル Active Directory ドメインに追加します。追加するには、ドメイン名、組織単位、サービス アカウントのユーザー名とパスワードが必要になります。


## **手順 3.RemoteApp テンプレート イメージを関連付ける** ##

RemoteApp テンプレート イメージにはユーザーと共有するプログラムが含まれています。(「[RemoteApp のカスタム テンプレート イメージの作成方法](http://azure.microsoft.com/ja-jp/documentation/articles/remoteapp-create-custom-image/)」の手順で) 作成した新しいテンプレート イメージをアップロードするか、または既存のイメージ (既に Azure にアップロードしたイメージ) にリンクできます。

新しいイメージをアップロードする場合は、イメージの名前を入力して場所を選択する必要があります。ウィザードの次のページに PowerShell コマンドレットのセットが表示されます。特定のイメージをアップロードするために、このコマンドレットをコピーして管理者特権の Windows PowerShell プロンプトから実行します。

既存のテンプレート イメージを関連付ける場合は、そのイメージ名、保管場所、関連先の Azure のサブスクリプションを指定するだけで実行できます。



## **手順 4.Active Directory ディレクトリ同期を構成する** ##

RemoteApp を使用するには、次のいずれかの方法で Azure Active Directory と統合する必要があります。1) パスワード同期オプションを使用してディレクトリ同期を構成します。2) パスワード同期オプションを使用しないでディレクトリ同期を構成します。ただし、この場合は AD FS にフェデレーションされたドメインを使用します。計画に関する情報、および詳しい手順については、「[ディレクトリ同期のロードマップ](http://msdn.microsoft.com//library/azure/hh967642.aspx)」を参照してください。

## **手順 5.RemoteApp プログラムを発行する** ##

RemoteApp プログラムは、ユーザーに提供するアプリケーションまたはプログラムのことです。このプログラムは、サービス用にアップロードしたテンプレート イメージに置かれています。ユーザーが RemoteApp プログラムにアクセスすると、プログラムはユーザーのローカル環境で実行しているように見えますが、実際には Azure で実行しています。 

ユーザーから RemoteApp プログラムへのアクセスを可能にするには、最初にこのプログラムをエンド ユーザー フィードに発行する必要があります。エンド ユーザー フィードとは、ユーザーが Azure のポータルを通じてアクセスできるプログラムの一覧です。
 
RemoteApp サービスには複数のプログラムを発行できます。[RemoteApp プログラム] ページから、**[発行]** をクリックしてプログラムを追加します。プログラムは、テンプレート イメージの [スタート] メニューから発行することも、テンプレート イメージのパスをプログラムに指定して発行することもできます。[スタート] メニューから追加する場合は、発行するプログラムを選択します。プログラムのパスを指定して発行する場合は、プログラムの名前と、プログラムがインストールされるテンプレート イメージ上の保存場所までのパスを指定します。

## **手順 6.ユーザー アクセスを構成する** ##

これで RemoteApp サービスが作成できたので、リモート リソースを使用可能にするユーザーとグループを追加する必要があります。アクセス権を付与するユーザーまたはグループは、この RemoteApp サービスを作成するために使用したサブスクリプションに関連付けられた Active Directory テナントに存在している必要があります。

1.	[クイック スタート] ページの **[ユーザー アクセスの構成]** をクリックします。 
2.	アクセス権を付与する (Active Directory の) 職場アカウントかグループ名、または Microsoft アカウントを入力します。

	ユーザーに対しては、"user@domain.com" 形式を使用するようにしてください。グループに対しては、グループ名を入力します。

3.	ユーザーまたはグループが検証されたら、**[保存]** をクリックします。


## 次のステップ##
これで、RemoteApp ハイブリッドのデプロイメントの作成とデプロイが正常に完了しました。次のステップは、ユーザーによるリモート デスクトップ クライアントのダウンロードとインストールです。このクライアントの URL は、RemoteApp の [クイック スタート] ページにあります。次に、ユーザーがクライアントにログインし、発行した RemoteApp プログラムにアクセスします。


