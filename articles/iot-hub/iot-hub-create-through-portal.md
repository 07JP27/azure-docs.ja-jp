---
title: Azure Portal を使用して IoT Hub を作成する | Microsoft Docs
description: Azure Portal で Azure IoT Hub を作成、管理、および削除する方法。 価格レベル、スケーリング、セキュリティ、およびメッセージングの構成に関する情報が含まれています。
author: robinsh
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 09/06/2018
ms.author: robinsh
ms.openlocfilehash: 8f08141f5c14a734f89ba91045767e2a36a44fd2
ms.sourcegitcommit: 32d218f5bd74f1cd106f4248115985df631d0a8c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2018
ms.locfileid: "46985607"
---
# <a name="create-an-iot-hub-using-the-azure-portal"></a>Azure Portal を使用して IoT Hub を作成する

[!INCLUDE [iot-hub-resource-manager-selector](../../includes/iot-hub-resource-manager-selector.md)]

この記事では、[Azure portal](https://portal.azure.com) を使用して、IoT ハブを作成して管理する方法について説明します。

このチュートリアルの手順を使用するには、Azure サブスクリプションが必要です。 Azure サブスクリプションをお持ちでない場合は、開始する前に [無料アカウント](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) を作成してください。

## <a name="create-an-iot-hub"></a>IoT Hub の作成

1. [Azure Portal](https://portal.azure.com) にログインします。 

2. [+ **リソースの作成]**、**[モノのインターネット]** の順に選択します。

3. 右側のリストにある **[Iot Hub]** をクリックします。 IoT ハブを作成するための最初の画面が表示されます。

   ![Azure Portal での Hub の作成を示したスクリーンショット](./media/iot-hub-create-through-portal/iot-hub-create-screen-basics.png)

   フィールドに入力します。

   **サブスクリプション**: IoT ハブで使用するサブスクリプションを選択します。

   **リソース グループ**: 新しいリソース グループを作成することも、既存のものを使用することもできます。 新しいものを作成するには、**[新規作成]** をクリックして、使用する名前を入力します。 既存のグループを使用するには、**[既存のものを使用]** をクリックし、ドロップダウン リストからリソース グループを選択します。

   **リージョン**: ドロップダウン リストから、ハブを配置するリージョンを選択します。

   **Iot Hub 名**: IoT Hub の名前を入力します。 この名前はグローバルに一意である必要があります。 

   [!INCLUDE [iot-hub-pii-note-naming-hub](../../includes/iot-hub-pii-note-naming-hub.md)]

4. **[Next: Size and scale]\(次へ: サイズとスケール\)** をクリックして、次の画面に移動します。

   ![Azure portal を使用して新しい IoT ハブ用のサイズとスケールを設定する様子を示すスクリーンショット](./media/iot-hub-create-through-portal/iot-hub-create-screen-size-scale.png)

   この画面では、既定値を使用して、下部にある **[確認および作成]** をクリックするだけです。 必要に応じて、フィールドに入力することもできます。

   **価格とスケール ティア**: 必要な機能の数とソリューションで 1 日に送信するメッセージの数に応じて、複数のレベルから選ぶことができます。 無料レベルは、テストおよび評価用です。 IoT Hub に接続できるデバイスは 500 個で、1 日に許可されるメッセージ数は最大 8,000 件です。 Azure サブスクリプションごとに、無料レベルの IoT Hub を 1 つ作成できます。 

   **IoT Hub ユニット**: ユニットごとに許可される 1 日あたりのメッセージの数は、ハブの価格レベルによって決まります。 たとえば、IoT Hub で 700,000 件の受信メッセージをサポートする場合は、S1 レベルのユニットを 2 つ選択します。

   他のレベルのオプションについて詳しくは、[適切な IoT Hub レベルの選択](iot-hub-scaling.md)に関するページをご覧ください。

   **高度なパーティションと Device-to-cloud パーティション**: このプロパティでは、device-to-cloud メッセージがそのメッセージの同時閲覧者数に関連付けられます。 ほとんどの IoT ハブでは、4 つのパーティションのみが必要となります。 

5. **[確認および作成]** をクリックして、選択内容を確認します。 次の画面のようになります。

   ![新しい IoT ハブを作成するための情報を確認するスクリーンショット](./media/iot-hub-create-through-portal/iot-hub-create-review.png)

5. **[作成]** をクリックして、新しい IoT ハブを作成します。 ハブの作成には数分かかります。

## <a name="change-the-settings-of-the-iot-hub"></a>IoT Hub の設定変更

IoT Hub ウィンドウから IoT ハブを作成したら、既存の IoT ハブの設定を変更できます。

![IoT Hub の設定を示すスクリーンショット](./media/iot-hub-create-through-portal/iot-hub-settings-panel.png)

IoT ハブに対して設定できるプロパティをいくつか以下に示します。

**価格とスケール**: このプロパティを使用して、別のレベルに移行したり、IoT Hub ユニットの数を設定したりすることができます。 

**操作の監視**: デバイスからクラウドへのメッセージまたはクラウドからデバイスへのメッセージに関連するイベントのログ記録など、さまざまな監視カテゴリをオンまたはオフにします。

**IP フィルター**: IoT ハブで許可または拒否される IP アドレスの範囲を指定します。

**プロパティ**: リソース ID、リソース グループ、場所など、コピーして別の場所で使用できるプロパティのリストが提供されます。

### <a name="shared-access-policies"></a>共有アクセス ポリシー

**[設定]** セクションの **[共有アクセス ポリシー]** をクリックして、共有アクセス ポリシーのリストを表示したり、変更したりすることもできます。 これらのポリシーで、IoT Hub に接続するデバイスとサービス用のアクセス許可を定義します。 

**[追加]** をクリックして、**[共有アクセスポリシーを追加]** ブレードを開きます。  次の図に示すように、新しいポリシーの名前と、このポリシーに関連付けるアクセス許可を入力できます。

![共有アクセス ポリシーの追加を示すスクリーンショット](./media/iot-hub-create-through-portal/iot-hub-add-shared-access-policy.png)

* **レジストリの読み取り**ポリシーと**レジストリの書き込み**ポリシーは、ID レジストリに対する読み取りと書き込みのアクセス権を付与します。 書き込みオプションを選択すると、読み取りオプションが自動的に選択されます。

* **サービス接続**ポリシーは、**デバイスからクラウドへの受信**など、サービス エンドポイントへのアクセス許可を付与します。 

* **デバイス接続**ポリシーは、IoT Hub デバイス側エンドポイントを使用してメッセージを送受信するためのアクセス許可を付与します。

**[作成]** をクリックして、この新しく作成されたポリシーを既存のリストに追加します。

## <a name="message-routing-for-an-iot-hub"></a>IoT ハブのメッセージ ルーティング

**[メッセージング]** で **[メッセージ ルーティング]** をクリックして、メッセージ ルーティング ウィンドウを表示します。ここでハブのルートとカスタム エンドポイントを定義することができます。 [メッセージ ルーティング](iot-hub-devguide-messages-d2c.md) では、デバイスからエンドポイントへのデータの送信方法を管理することができます。 最初の手順では、新しいルートを追加します。 その後、ルートに既存のエンドポイントを追加したり、Blob Storage など、サポートされる新しい種類のいずれかを作成したりすることができます。 

![メッセージ ルーティング ウィンドウ](./media/iot-hub-create-through-portal/iot-hub-message-routing.png)

### <a name="routes"></a>Routes

[ルート] は、メッセージ ルーティング ウィンドウで最初のタブです。 新しいルートを追加するには、[+ **追加]** をクリックします。 次の画面が表示されます。 

![新しいルートの追加を示すスクリーンショット](./media/iot-hub-create-through-portal/iot-hub-add-route-storage-endpoint.png)

ハブに名前を付けます。 名前は、そのハブのルートのルート リスト内で一意である必要があります。 

**[エンドポイント]** では、ドロップダウン リストのいずれかを選択したり、新しいものを追加したりすることができます。 この例では、ストレージ アカウントとコンテナーは既に使用可能です。 それらをエンドポイントとして追加するには、エンドポイント ドロップダウンの横にある [+ **追加]** をクリックして、**[Blob Storage]** を選択します。 次の画面には、ストレージ アカウントとコンテナーが指定されている場所が示されています。

![ルーティング規則用のストレージ エンドポイントの追加を示すスクリーンショット](./media/iot-hub-create-through-portal/iot-hub-routing-add-storage-endpoint.png)

**[コンテナーを選択します]** をクリックして、ストレージ アカウントとコンテナーを選択します。 これらのフィールドを選択すると、エンドポイント ウィンドウに戻ります。 残りのフィールドでは既定値を使用して、**[作成]** を選択してストレージ アカウントのエンドポイントを作成し、それをルーティング規則に追加します。

**[データ ソース]** では、[Device Telemetry Messages]\(デバイス テレメトリ メッセージ\) を選びます。 

次に、ルーティング クエリを追加します。 この例では、`critical` と同じ値の `level` と呼ばれるアプリケーション プロパティを含むメッセージが、ストレージ アカウントにルーティングされます。

![新しいルーティング規則の保存を示すスクリーンショット](./media/iot-hub-create-through-portal/iot-hub-add-route.png)

**[保存]** をクリックして、ルーティング規則を保存します。 メッセージ ルーティング ウィンドウに戻ると、新しいルーティング規則が表示されます。

### <a name="custom-endpoints"></a>カスタム エンドポイント

**[カスタム エンドポイント]** タブをクリックします。既に作成されているカスタム エンドポイントがすべて表示されます。 ここで、新しいエンドポイントを追加したり、既存のエンドポイントを削除したりすることができます。 

> [!NOTE]
> ルートを削除しても、そのルートに割り当てられているエンドポイントは削除されません。 エンドポイントを削除するには、[カスタム エンドポイント] タブをクリックして、削除するエンドポイントを選択し、[削除] をクリックします。
>

カスタム エンドポイントの詳細については、「[リファレンス - IoT Hub エンドポイント](iot-hub-devguide-endpoints.md)」を参照してください。

IoT ハブに対して最大 10 個のカスタム エンドポイントを定義できます。 

ルーティングでカスタム エンドポイントを使用する方法の完全な例を確認する場合は、[IoT Hub でのメッセージ ルーティング](tutorial-routing.md)に関するページを参照してください。

## <a name="find-a-specific-iot-hub"></a>特定の IoT ハブを見つける

サブスクリプション内の特定の IoT ハブを見つける方法は次の 2 つです。

1. IoT ハブが属しているリソース グループがわかっている場合は、**[リソース グループ]** をクリックし、リストからリソース グループを選択します。 リソース グループ画面には、IoT ハブを含め、そのグループ内のすべてのリソースが表示されます。 探しているハブをクリックします。

2. **[すべてのリソース]** をクリックします。 **[すべてのリソース]** ウィンドウには、既定で `All types` に設定されているドロップダウン リストがあります。 ドロップダウン リストをクリックして、`Select all` をオフにします。 `IoT Hub` を見つけて、オンにします。 ドロップダウン リスト ボックスをクリックして閉じると、エントリがフィルター処理され、自分の IoT ハブのみが表示されます。

## <a name="delete-the-iot-hub"></a>IoT Hub の削除

IoT ハブを削除するには、削除する IoT ハブを見つけて、IoT ハブ名の下にある **[削除]** ボタンをクリックします。

## <a name="next-steps"></a>次の手順

Azure IoT Hub の管理についてさらに学習するには、次のリンクを使用してください。

* [IoT Hub でのメッセージ ルーティング](tutorial-routing.md)
* [IoT Hub メトリック](iot-hub-metrics.md)
* [操作の監視](iot-hub-operations-monitoring.md)