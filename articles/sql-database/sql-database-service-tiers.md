---
title: Azure SQL Database サービス | Microsoft Docs
description: 単一のデータベースとプールされたデータベースに対してパフォーマンス レベルとストレージ サイズを提供するサービス レベルについて説明します。
services: sql-database
author: CarlRabeler
ms.service: sql-database
ms.custom: DBs & servers
ms.topic: article
ms.date: 04/04/2018
manager: craigg
ms.author: carlrab
ms.openlocfilehash: a4474aec212084006becd02f317dabae6e731d98
ms.sourcegitcommit: 6fcd9e220b9cd4cb2d4365de0299bf48fbb18c17
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/05/2018
---
# <a name="what-are-azure-sql-database-service-tiers"></a>Azure SQL Database サービス レベルとは

[Azure SQL Database](sql-database-technical-overview.md) には、コンピューティング、ストレージ、および IO リソースに対して 2 つの購入モデルが用意されています。1 つは DTU ベースの購入モデルで、もう 1 つは仮想コアベースの購入モデル (プレビュー) です。 次の表とグラフは、この 2 つの購入モデルを比較しています。

|**購入モデル**|**説明**|**最適な用途**|
|---|---|---|
|DTU ベースのモデル|このモデルは、コンピューティング、ストレージ、および IO リソースのバンドルされた測定値に基づいています。 パフォーマンス レベルは、単一データベースの場合はデータベース トランザクション ユニット (DTU) で、エラスティック プールの場合はエラスティック データベース トランザクション ユニット (eDTU) で表されます。 DTU と eDTU の詳細については、[DTU と eDTU の概要](sql-database-what-is-a-dtu.md)に関する記事をご覧ください。|シンプルな構成済みリソースのオプションを希望するお客様に最適です。| 
|仮想コアベースのモデル|このモデルでは、コンピューティングおよびストレージ リソースを個別にスケーリングできます。 また、SQL Server 向けの Azure ハイブリッド特典を使用して、コストを削減することもできます。|柔軟性、制御、および透明性を重視するお客様に最適です。|
||||  

![価格モデル](./media/sql-database-service-tiers/pricing-model.png)

## <a name="dtu-based-purchasing-model"></a>DTU ベースの購入モデル

データベース スループット ユニット (DTU) は、CPU、メモリ、読み取り、書き込みの測定値を組み合わせて算出されます。 DTU ベースの購入モデルは、事前構成済みコンピューティング リソースと付属ストレージのバンドル セットを提供することで、さまざまなレベルのアプリケーション パフォーマンスを実現します。 事前構成済みバンドルと毎月支払う料金が決まっているというシンプルさを好むお客様については、この DTU ベースのモデルがニーズに適している可能性があります。 DTU ベースの購入モデルでは、[単一データベース](sql-database-single-database-resources.md)と[エラスティック プール](sql-database-elastic-pool.md)の両方について、お客様が **Basic**、**Standard**、**Premium** のいずれかのサービス レベルを選択できます。 サービス レベルは、固定の付属ストレージ容量、固定のバックアップ リテンション期間、および固定の価格を持つさまざまなパフォーマンス レベルによって区別されます。 すべてのサービス レベルで、ダウンタイムなしでパフォーマンス レベルを柔軟に変更できます。 単一データベースとエラスティック プールは、サービス レベルおよびパフォーマンス レベルに基づいて、時間単位で課金されます。

> [!IMPORTANT]
> SQL Database マネージ インスタンスは、現在、パブリック プレビュー段階であり、DTU ベースの購入モデルをサポートしていません。 詳細については、[Azure SQL Database マネージ インスタンスに関するページ](sql-database-managed-instance.md)を参照してください。 

### <a name="choosing-a-service-tier-in-the-dtu-based-purchasing-model"></a>DTU ベースの購入モデルでのサービス レベルの選択

サービス レベルの選択は、主に、ビジネス継続性、ストレージ、およびパフォーマンスの要件に依存します。
||Basic|標準|Premium|
| :-- | --: |--:| --:| --:| 
|対象のワークロード|開発、運用|開発、運用|開発、運用||
|アップタイム SLA|99.99%|99.99%|99.99%|プレビューは対象外|
|バックアップ保有期間|7 日|35 日|35 日|
|CPU|低|低、中、高|中、高|
|IO スループット (概算) |DTU あたり 2.5 IOPS| DTU あたり 2.5 IOPS | DTU あたり 48 IOPS|
|IO 待機時間 (概算)|5 ミリ秒 (読み取り)、10 ミリ秒 (書き込み)|5 ミリ秒 (読み取り)、10 ミリ秒 (書き込み)|2 ミリ秒 (読み取り/書き込み)|
|列ストア インデックス作成 |該当なし|S3 以上|サポートされています|
|インメモリ OLTP|該当なし|該当なし|サポートされています|
|||||

### <a name="performance-level-and-storage-size-limits-in-the-dtu-based-purchasing-model"></a>DTU ベースの購入モデルのパフォーマンス レベルとストレージ サイズの制限

パフォーマンス レベルは、単一データベースの場合はデータベース トランザクション ユニット (DTU) で、エラスティック プールの場合はエラスティック データベース トランザクション ユニット (eDTU) で表されます。 DTU と eDTU の詳細については、[DTU と eDTU の概要](sql-database-what-is-a-dtu.md)に関する記事をご覧ください。

#### <a name="single-databases"></a>Single Database

||Basic|標準|Premium|
| :-- | --: | --: | --: | --: |
| 最大ストレージ サイズ* | 2 GB | 1 TB (テラバイト) | 4 TB  | 
| 最大 DTU | 5 | 3000 | 4000 | |
||||||

単一データベースに対して選択できる具体的なパフォーマンス レベルとストレージ サイズの詳細については、[単一データベースに対する SQL Database の DTU ベースのリソース制限](sql-database-dtu-resource-limits.md#single-database-storage-sizes-and-performance-levels)に関するページをご覧ください。

#### <a name="elastic-pools"></a>エラスティック プール

| | **Basic** | **Standard** | **Premium** | 
| :-- | --: | --: | --: | --: |
| データベースあたりの最大ストレージ サイズ*  | 2 GB | 1 TB (テラバイト) | 1 TB (テラバイト) | 
| プールあたりの最大ストレージ サイズ* | 156 GB | 4 TB | 4 TB | 
| データベースあたりの最大 eDTU 数 | 5 | 3000 | 4000 | 
| プールあたりの最大 eDTU 数 | 1600 | 3000 | 4000 | 
| プールあたりのデータベースの最大数 | 500  | 500 | 100 | 
||||||

> [!IMPORTANT]
> \* 付属のストレージ容量を超えるストレージ サイズはプレビュー段階であり、追加料金が適用されます。 詳細については、「 [SQL Database の価格](https://azure.microsoft.com/pricing/details/sql-database/)」をご覧ください。 
>
> \* Premium レベルでは現在、次のリージョンで 1 TB を超えるストレージが使用できます: オーストラリア東部、オーストラリア南東部、ブラジル南部、カナダ中部、カナダ東部、米国中部、フランス中部、ドイツ中部、東日本、西日本、韓国中部、米国中北部、北ヨーロッパ、米国中南部、東南アジア、英国南部、英国西部、米国東部 2、米国西部、米国政府バージニア、および西ヨーロッパ。 [P11 ～ P15 の現時点での制限](sql-database-dtu-resource-limits.md#single-database-limitations-of-p11-and-p15-when-the-maximum-size-greater-than-1-tb)に関するページを参照してください。  
> 

エラスティック プールに対して選択できる具体的なパフォーマンス レベルとストレージ サイズの詳細については、[SQL Database の DTU ベースのリソース制限](sql-database-dtu-resource-limits.md#elastic-pool-storage-sizes-and-performance-levels)に関するページをご覧ください。

## <a name="vcore-based-purchasing-model-preview"></a>仮想コアベースの購入モデル (プレビュー)

仮想コアは、ハードウェアの世代の選択が可能な論理 CPU を表します。 仮想コアベースの購入モデル (プレビュー) では、個々のリソース使用量において柔軟性、管理性、透明性が実現されており、オンプレミスのワークロード要件をクラウドに容易に移行できます。 このモデルでは、ワークロードの必要性に基づいて、コンピューティング、メモリ、ストレージをスケーリングできます。 仮想コアベースの購入モデルでは、[単一データベース](sql-database-single-database-resources.md)と[エラスティック プール](sql-database-elastic-pool.md)の両方について、お客様が General Purpose または Business Critical (プレビュー) のいずれかのサービス レベルを選択できます。 

サービス レベルは、さまざまなパフォーマンス レベル、高可用性の設計、障害の分離、ストレージの種類、および IO 範囲によって区別されます。 お客様は、バックアップ用に必要なストレージとリテンション期間を個別に構成する必要があります。 仮想コア モデルを使用する場合、単一データベースとエラスティック プールは、[SQL Server 向け Azure ハイブリッド使用特典](../virtual-machines/windows/hybrid-use-benefit-licensing.md)によって、最大 30% の割引対象となります。

仮想コアベースの購入モデルでは、お客様には次のものに対してお支払いいただきます。
- コンピューティング (サービス レベル + 仮想コア数 + ハードウェアの世代)*
- データおよびログ ストレージの種類と容量 
- IO 数**
- バックアップ ストレージ (RA-GRS)** 

\* 最初のパブリック プレビューでは、Gen 4 論理 CPU は、Intel E5-2673 v3 (Haswell) 2.4 GHz のプロセッサを基盤とします

\*\* プレビュー段階では、7 日間のバックアップと IO が無料です

> [!IMPORTANT]
> コンピューティング、IO、データおよびログ ストレージは、データベースまたはエラスティック プールごとに課金されます。 バックアップ ストレージはデータベースごとに課金されます。 マネージ インスタンス料金の詳細については、[Azure SQL Database マネージ インスタンス](sql-database-managed-instance.md)に関するページをご覧ください。

### <a name="choosing-service-tier-compute-memory-storage-and-io-resources"></a>サービス レベル、コンピューティング、メモリ、ストレージ、および IO リソースの選択

仮想コアベースの購入モデルに変換すると、コンピューティングおよびストレージ リソースを個別にスケーリングし、オンプレミスのパフォーマンスを一致させて、コストを最適化できます。 データベースまたはエラスティック プールが使用する DTU が 300 を超える場合は、仮想コアに変換することで、コストを抑えられる可能性があります。 任意の API または Azure Portal を使用して、ダウンタイムなしで変換できます。 しかし、変換は必須ではありません。 DTU 購入モデルがご自身のパフォーマンスおよびビジネス要件を満たしている場合は、このモデルを引き続き使用してください。 DTU モデルから仮想コア モデルに変換することを決めたら、Standard レベルでは 100 DTU ごとに 1 つ以上の仮想コア、Premium レベルでは 125 DTU ごとに 1 つ以上の仮想コアが必要であるという大まかな基準を目安に、パフォーマンス レベルを選択します。

次の表は、この 2 つのレベルの違いを把握するうえで役立ちます。

||**汎用**|**Business Critical**|
|---|---|---|
|最適な用途|ほとんどのビジネス ワークロード。 予算重視のスケーラブルでバランスの取れたコンピューティングおよびストレージ オプションを提供します。|IO 要件の高いビジネス アプリケーション。 分離された複数のレプリカを使用して、最高の耐障害性が提供されます。|
|コンピューティング|1 ～ 16 仮想コア|1 ～ 16 仮想コア|
|メモリ|コアあたり 7 GB |コアあたり 7 GB |
|Storage|Premium リモート ストレージ、5 GB ～ 4 TB|ローカル SSD ストレージ、5 GB ～ 1 TB|
|IO スループット (概算)|仮想コアあたり 500 IOPS (最大 7500 IOPS)|コアあたり 5000 IOPS|
|可用性|1 レプリカ、読み取りスケールなし|3 レプリカ、1 [読み取りスケール](sql-database-read-scale-out.md)、ゾーン冗長 HA|
|バックアップ|RA-GRS、7 ～ 35 日 (既定では 7 日)|RA-GRS、7 ～ 35 日 (既定では 7 日)*|
|インメモリ|該当なし|サポートされています|
|||

\* プレビュー段階では、バックアップ リテンション期間は構成できず、7 日間に固定されています。

> [!IMPORTANT]
> 必要なコンピューティング能力が仮想コア 1 つ分を下回る場合は、DTU ベースの購入モデルを使用します。

単一データベースに対して選択できる具体的なパフォーマンス レベルとストレージ サイズの詳細については、[単一データベースに対する SQL Database の仮想コアベースのリソース制限](sql-database-vcore-resource-limits.md#single-database-storage-sizes-and-performance-levels)に関するページを、エラスティック プールについては、[エラスティック プールに対する SQL Database の仮想コアベースのリソース制限](sql-database-vcore-resource-limits.md#elastic-pool-storage-sizes-and-performance-levels)に関するページをご覧ください。

よく寄せられる質問の回答については、「[SQL Database に関する FAQ](sql-database-faq.md)」を参照してください。 

### <a name="storage-considerations"></a>ストレージに関する考慮事項

以下、具体例に沿って説明します。
- 割り当てられたストレージは、データ ファイル (MDF) およびログ ファイル (LDF) によって使用されます。
- パフォーマンス レベルごとに最大データベース サイズがサポートされ、既定の最大サイズは 32 GB です。
- 必要なデータベース サイズ (MDF のサイズ) を構成するとき、LDF をサポートするために、その 30% の追加ストレージが自動的に追加されます
- 10 GB と、サポートされている最大サイズの間で、任意のデータベース サイズを選択できます
 - Standard Storage の場合は、10 GB の増分でサイズを増減します
 - Premium Storage の場合は、250 GB の増分でサイズを増減します
- General Purpose サービス レベルでは、`tempdb` には、接続されている SSD を使用します。このストレージ コストは、仮想コア価格に含まれます。
- Business Critical サービス レベルでは、`tempdb` は、接続されている SSD を MDF ファイルおよび LDF ファイルと共有します。tempDB ストレージ コストは、仮想コア価格に含まれます。

> [!IMPORTANT]
> MDF および LDF に割り当てられている合計ストレージに対して課金されます。

MDF および LDF の現在の合計サイズを監視するには、[sp_spaceused](https://docs.microsoft.com/sql/relational-databases/system-stored-procedures/sp-spaceused-transact-sql) を使用します。 個々の MDF ファイルおよび LDF ファイルの現在のサイズを監視するには、[sys.database_files](https://docs.microsoft.com/sql/relational-databases/system-catalog-views/sys-database-files-transact-sql) を使用します。

### <a name="backups-and-storage"></a>バックアップとストレージ

データベース バックアップのストレージは、SQL Database のポイントインタイム リストア (PITR) および長期リテンション期間 (LTR) 機能をサポートするために割り当てられます。 このストレージはデータベースごとに別個に割り当てられ、データベース料金ごとに 2 つが個々に課金されます。 

- **PITR**: 個々のデータベース バックアップが、RA-GRS ストレージに自動的にコピーされます。 ストレージのサイズは、新しいバックアップが作成されるにつれ、動的に増加します。  このストレージは、毎週の完全バックアップ、毎日の差分バックアップ、5 分ごとにコピーされるトランザクション ログ バックアップによって使用されます。 ストレージの使用量は、データベースの変化率とリテンション期間によって異なります。 リテンション期間は、データベースごとに 7 ～ 35 日の範囲内で別々に構成できます。 データ サイズと同量の最小ストレージ容量が、追加料金なしで提供されます。 ほとんどのデータベースでは、この容量で十分に 7 日間のバックアップを格納できます。
- **LTR**: SQL Database には、最大 10 年の完全バックアップの長期リテンション期間を構成するオプションが用意されています。 LTR ポリシーが有効になっている場合、これらのバックアップは、RA-GRS ストレージに自動的に格納されますが、バックアップがコピーされる頻度は制御できます。 さまざまなコンプライアンス要件を満たすために、毎週、毎月、毎年のバックアップに対して異なったリテンション期間を選択することができます。 この構成によって、LTR バックアップに使用されるストレージ容量が定義されます。 LTR ストレージのコストは、LTR 料金計算ツールを使用して見積もることができます。 詳細については、「[長期保存](sql-database-long-term-retention.md)」をご覧ください。

### <a name="azure-hybrid-use-benefit"></a>Azure Hybrid Use Benefit

仮想コアベースの購入モデルでは、[SQL Server 向け Azure ハイブリッド使用特典](../virtual-machines/windows/hybrid-use-benefit-licensing.md)を利用して、お使いの既存のライセンスを SQL Database の割引料金のライセンスに交換できます。 この Azure 特典では、オンプレミスのソフトウェア アシュアランス付き SQL Server ライセンスを利用することで、オンプレミスの SQL Server ライセンスで Azure SQL Database の料金が最大 30% オフになります。

![価格](./media/sql-database-service-tiers/pricing.png)

#### <a name="migration-of-single-databases-with-geo-replication-links"></a>geo レプリケーション リンクを含む単一データベースの移行

DTU ベースのモデルから仮想コアベースのモデルへの移行は、Standard データベースと Premium データベースの間で geo レプリケーション関係をアップグレードまたはダウングレードするのと似ています。 geo レプリケーションを終了する必要はありませんが、ユーザーは、シーケンス処理ルールに従う必要があります。 アップグレードの場合は、最初にセカンダリ データベースをアップグレードしてから、プライマリをアップグレードする必要があります。 ダウングレードは逆の順序で行います。つまり、最初にプライマリ データベースをダウングレードしてから、セカンダリをダウングレードします。 

2 つのエラスティック プールの間で geo レプリケーションを使用している場合は、一方のプールをプライマリとして指定し、もう一方をセカンダリとして指定することを強くお勧めします。 その場合、エラスティック プールの移行でも同じガイダンスが使用されます。  ただし、技術的には、1 つのエラスティック プールに、プライマリ データベースとセカンダリ データベースの両方を含めることができます。 この場合、正しく移行するには、使用率の高い方のプールを "プライマリ" と見なし、適宜シーケンス処理ルールに従います。  

次の表に、具体的な移行シナリオのガイダンスを示します。 

|現在のサービス レベル|移行先のサービス レベル|移行の種類|ユーザー操作|
|---|---|---|---|
|標準|汎用|ラテラル|任意の順序で移行できますが、適切な仮想コア サイズを確保する必要があります*|
|Premium|Business Critical|ラテラル|任意の順序で移行できますが、適切な仮想コア サイズを確保する必要があります*|
|標準|Business Critical|アップグレード|セカンダリを最初に移行する必要があります|
|Business Critical|標準|ダウングレード|プライマリを最初に移行する必要があります|
|Premium|汎用|ダウングレード|プライマリを最初に移行する必要があります|
|汎用|Premium|アップグレード|セカンダリを最初に移行する必要があります|
|Business Critical|汎用|ダウングレード|プライマリを最初に移行する必要があります|
|汎用|Business Critical|アップグレード|セカンダリを最初に移行する必要があります|
||||

\* Standard レベルでは 100 DTU ごとに 1 つ以上の仮想コア、Premium レベルでは 125 DTU ごとに 1 つ以上の仮想コアが必要です

#### <a name="migration-of-failover-groups"></a>フェールオーバー グループの移行 

複数のデータベースが含まれるフェールオーバー グループの移行では、プライマリ データベースとセカンダリ データベースを個別に移行する必要があります。 その処理中は、同じ考慮事項とシーケンス処理ルールが適用されます。 データベースが仮想コアベースのモデルに変換された後も、フェールオーバー グループには、同じポリシー設定が引き続き有効になります。 

#### <a name="creation-of-a-geo-replication-secondary"></a>geo レプリケーション セカンダリの作成

プライマリと同じサービス レベルを使用して、geo セカンダリのみを作成できます。 ログ生成率が高いデータベースの場合、プライマリと同じパフォーマンス レベルでセカンダリを作成することを強くお勧めします。 単一プライマリ データベースに対してエラスティック プールに geo セカンダリを作成する場合、そのプールの `maxVCore` 設定を、プライマリ データベースのパフォーマンス レベルと一致させることを強くお勧めします。 geo セカンダリの作成先エラスティック プールと、そのプライマリがあるエラスティック プールが異なる場合、その 2 つのプールの `maxVCore` 設定を同じにすることを強くお勧めします

#### <a name="using-database-copy-to-convert-a-dtu-based-database-to-a-vcore-based-database"></a>データベースのコピーを使用した、DTU ベースのデータベースから仮想コアベースのデータベースへの変換

DTU ベース パフォーマンス レベルのデータベースを、仮想コアベース パフォーマンス レベルのデータベースにコピーする場合、コピー先のパフォーマンス レベルが、コピー元データベースの最大データベース サイズをサポートしている限り、制限や特別なシーケンス処理は伴いません。 これは、データベースのコピーによって、コピー操作を開始した時点のデータ スナップショットが作成されるので、コピー元とコピー先の間でデータ同期が行われないためです。 

## <a name="next-steps"></a>次の手順

- 選択できる具体的なパフォーマンス レベルとストレージ サイズの詳細については、[SQL Database の DTU ベースのリソース制限](sql-database-dtu-resource-limits.md)および [SQL Database の仮想コアベースのリソース制限](sql-database-vcore-resource-limits.md)に関するページをご覧ください。
- よく寄せられる質問の回答については、「[SQL Database に関する FAQ](sql-database-faq.md)」を参照してください。
- 「[Azure サブスクリプションとサービスの制限、クォータ、制約](../azure-subscription-service-limits.md)」をご覧ください。
