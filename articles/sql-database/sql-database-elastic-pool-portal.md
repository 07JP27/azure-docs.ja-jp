<properties
	pageTitle="スケーラブルなエラスティック データベース プールを作成する | Microsoft Azure"
	description="SQL Database 構成にスケーラブルなエラスティック データベース プールを追加して、多数のデータベースの管理とリソース共有を簡単にする方法について説明します。"
	keywords="スケーラブルなデータベース、データベースの構成"
	services="sql-database"
	documentationCenter=""
	authors="sidneyh"
	manager="jhubbard"
	editor=""/>

<tags
	ms.service="sql-database"
	ms.devlang="NA"
	ms.date="02/12/2016"
	ms.author="sidneyh"
	ms.workload="data-management"
	ms.topic="get-started-article"
	ms.tgt_pltfrm="NA"/>


# Azure ポータルで SQL Database のスケーラブルなエラスティック データベース プールを作成する

> [AZURE.SELECTOR]
- [Azure portal](sql-database-elastic-pool-portal.md)
- [C#](sql-database-elastic-pool-csharp.md)
- [PowerShell](sql-database-elastic-pool-powershell.md)

この記事では、Azure ポータルを使用してスケーラブルな[エラスティック データベース プール](sql-database-elastic-pool.md)を作成する方法について説明します。エラスティック データベース プールがある SQL Database 構成にすると、複数のデータベースの管理とリソース共有が簡単になります。

> [AZURE.NOTE] エラスティック データベース プールは現在プレビュー段階であり、SQL Database V12 サーバーでのみ使用できます。SQL Database V11 サーバーがある場合は、[PowerShell を使用して V12 へのアップグレードとプールの作成](sql-database-upgrade-server-powershell.md)を 1 回の手順で実行できます。


## 前提条件

* SQL Database V12 サーバーのデータベース。これがない場合、5 分程度時間を取って「[最初の Azure SQL Database を作成する](sql-database-get-started.md)」を参照して作成してください。 
* または、SQL Database V11 サーバーが既にある場合は、[ポータルで V12 にアップグレード](sql-database-v12-plan-prepare-upgrade.md)した後で、次の手順に従ってプールを作成できます。


## 手順 1. 新しいプールを作成する

サーバーに新しいプールを追加することで、エラスティック データベース プールを作成します。サーバーに複数のプールを追加することはできますが、同じプールに異なるサーバーからデータベースを追加することはできません。


1. [Azure ポータル](http://portal.azure.com/)で **[SQL Server]** をクリックします。
2. プールに追加するデータベースが含まれているサーバーを選択します。
3. **[新しいプール]** をクリックします (推奨プールがあることを示すメッセージが表示された場合、それをクリックして簡単に確認し、サーバーのデータベース用に最適化されたプールを作成します)。推奨事項の詳細については、次の場所から確認できます。


    ![サーバーへのプールの追加](./media/sql-database-elastic-pool-portal/new-pool.png)


4. **[エラスティック データベース プール]** ブレードでは、新しいプールに既定の名前を使用することも、名前を入力することもできます。

    ![エラスティック プールの構成](./media/sql-database-elastic-pool-portal/configure-elastic-pool.png)


### 推奨されるエラスティック データベース プール

SQL Database サーバーを参照すると、そのサーバーに推奨されるエラスティック データベース プールがあることを示すメッセージが表示される場合があります (V12 のみ)。

### 推奨事項が表示されない場合の理由

SQL Database サービスでは使用状況の履歴を評価し、単一のデータベースを使用するよりコスト効率が高い場合は、1 つまたは複数のエラスティック データベース プールを推奨します。

![推奨されるプール](./media/sql-database-elastic-pool-portal/recommended-pool.png)

それぞれの推奨事項は、サーバーのデータベースでプールに最適なデータベースを一意の小集合にしたもので構成されます。

各プールの推奨事項には、次のものが含まれています。

- プールの価格レベル (Basic、Standard、Premium)。
- 適切な量のプール eDTU。
- エラスティック データベースの最小/最大 eDTU 設定。
- 推奨データベースの一覧。

エラスティック データベース プールを推奨するとき、このサービスでは過去 30 日間のテレメトリが考慮されます。あるデータベースをエラスティック データベース プールの候補と見なすとき、それは 7 日間以上存在している必要があります。エラスティック データベース プールに既に存在するデータベースはエラスティック データベース プール推奨の候補として考慮されません。

このサービスでは、各サービス レベルのシングル データベースを同じレベルのエラスティック データベース プールに移動することの必要性と対費用効果が評価されます。たとえば、サーバーのすべての Standard データベースの Standard エラスティック プールに対する適合性が評価されます。つまり、このサービスでは、Standard データベースを Premium プールに移動することなど、レベル間の推奨は行われません。


### 推奨されるプールの作成

1. メッセージをクリックして、推奨されるプールの一覧を表示します。
1. プールをクリックして、推奨事項の詳細を表示します。
2. 推奨事項のすべての設定を確認し、それをそのまま使用するか、特定のビジネス ニーズに合うように編集します。


## 手順 2: 価格レベルを選択します

プールの価格レベルによってプールのエラスティック データベースで使用できる機能が決まり、eDTU の最大数 (eDTU MAX) や各データベースで使用できるストレージ容量 (GB) が決まります。詳細については、「[サービス レベル](sql-database-service-tiers.md#Service-tiers-for-elastic-database-pools)」をご覧ください。

>[AZURE.NOTE] 現在のところ、プレビューでは、エラスティック データベース プールの価格レベルを作成後に変更することはできません。既存のエラスティック プールの価格レベルを変更するには、任意の価格レベルで新しいエラスティック プールを作成し、その新しいプールにエラスティック データベースを移行します。

   ![Choose a pricing tier](./media/sql-database-elastic-pool-portal/pricing-tier.png)

### プールの構成

価格レベルを設定した後は、データベースを追加するプールで [プールの構成] をクリックし、プールの eDTU とストレージ (プールの GB 値) を設定して、さらにプール内のエラスティック データベースの最小および最大 eDTU を設定します。

## 手順 3: データベースをプールに追加します

プールに対して、いつでもデータベースの追加や削除を行うことができます。

1. プールの作成時に、**[プールの構成]** ブレードで **[データベースの追加]** をクリックします。
2. プールに追加するデータベースを選択します。

    ![データベースの追加](./media/sql-database-elastic-pool-portal/add-databases.png)

    プールに追加するデータベースを選択する場合、次の条件を満たす必要があります。

    - プールにデータベースのためのスペースがあること (データベースの最大数がすでに含まれていないこと)。具体的には、プールには、各データベースの eDTU 保証をカバーする利用可能な eDTU が十分にある必要があります (たとえば、グループの eDTU 保証が 400 で、各データベースの eDTU 保証が 10 である場合、プールで使用できるデータベースの最大数は 40 になります (DB あたり 400 eDTU/10 eDTU = 40 最大データベース)。
    - データベースで使用される現在の機能は、プールで使用できる必要があります。

### 動的な推奨事項

データベースをプールに追加した後は、選択したデータベースの使用状況の履歴に基づき、推奨事項が動的に生成されます。この推奨事項は、**[プールの構成]** ブレード上部の推奨事項バナーに加え、eDTU と GB の使用状況グラフにも表示されます。このような推奨事項は、特定のデータベース用に最適化されたプールの作成をサポートすることを目的としています。


 ![dynamic recommendations](./media/sql-database-elastic-pool-portal/dynamic-recommendation.png)


## 手順 4: プールのパフォーマンス特性を設定します

プールのパフォーマンスを構成するには、プールと、プール内のエラスティック データベースの両方のパフォーマンス パラメーターを設定します。**[エラスティック データベースの設定]** はプール内のすべてのデータベースに適用されることにご注意ください。

 ![エラスティック プールの構成](./media/sql-database-elastic-pool-portal/configure-performance.png)

プールのパフォーマンスを定義するには、プールの eDTU 保証、プール内のエラスティック データベースに対する eDTU MIN と eDTU MAX の 3 つのパラメーターを設定できます。次の表は、それぞれについての説明と、設定方法について一部のガイドを表しています。特定の利用可能な値設定については、「[エラスティック データベース プールのリファレンス](sql-database-elastic-pool-reference.md)」をご覧ください。

| パフォーマンス パラメーター | 説明 |
| :--- | :--- |
| **プール eDTU** - プールの eDTU 保証 | プールの eDTU 保証とは使用可能な eDTU の保証の数であり、プール内のすべてのデータベースで共有されます。<br> グループ eDTU 保証の特定のサイズは、グループの過去の eDTU 使用率を考慮してプロビジョニングする必要があります。あるいは、このサイズはデータベースごとに要求される eDTU 保証によって、また同時に実行されているアクティブなデータベースを活用することで、設定されます。プールの eDTU 保証はプールで使用可能なストレージの容量にも関連します。プールに割り当てたあらゆる eDTU ごとに固定量のデータベース ストレージが得られます。<br> **プールの eDTU 保証は何に設定しますか。** <br>少なくとも、プールの eDTU 保証を ([データベースの数] x [データベースごとの DTU 使用率の平均]) に設定する必要があります。 |
| **eDTU MIN** - 各データベースの eDTU 保証 | データベースごとの eDTU 保証は、プール内の 1 つのデータベースが保証される eDTU の数です。<br> **データベースごとの eDTU 保証には何を設定する必要がありますか。** <br> 通常、データベースあたりの eDTU 保証 (eDTU MIN) は 0 と ([データベースごとの平均使用率]) の間に設定されます。データベースごとの eDTU 保証は、プール内のすべてのデータベースの eDTU 保証を設定するグローバル設定です。 |
| **eDTU MAX** - データベースごとの eDTU の上限 | データベースごとの eDTU MAX は、プール内の 1 つのデータベースで使用される可能性がある eDTU の最大数です。データベースごとの eDTU の上限は十分に高く設定し、データベースで発生する可能性があるバーストやスパイクを処理できるようにします。この上限はシステムで制限されている値まで設定できます。制限値はプールの価格レベルによって異なります (Premium は 1000 eDTU)。この上限の特定のサイズは、グループ内のデータベースの最大使用率パターンと合っている必要があります。プールでは通常、ホットとコールドのデータベース使用パターンがあり、すべてのデータベースが同時に最大に使用されることはないため、グループではある程度高めに上限が設定されています。<br> **データベースごとの eDTU 上限には何を設定する必要がありますか。** <br> データベースごとの eDTU MAX か eDTU 上限を ([データベースの最大使用率]) に設定します。たとえば、データベースごとの最大使用率を 50 DTU とし、グループの 100 のデータベースの 20% のみが同時に最大で使用されると仮定します。データベースごとの eDTU 上限が 50 eDTU に設定されている場合は、プールを 5 倍に設定するか、グループの eDTU 保証 (プール eDTU) を 1,000 eDTU と高く設定しておいても問題はありません。eDTU 上限はデータベースのリソース保証ではなく、使用可能な場合に達する可能性がある eDTU の限度であることにご注意ください。 |


## プールへのデータベースの追加とプールからのデータベースの削除

プールを作成した後は、**[エラスティック データベース]** ページ (**Essentials** で、プールに移動し、**[エラスティック データベース]** リンクをクリックします) でデータベースを追加または削除することで、プールにデータベースを追加することや、プールから既存のデータベースを削除することができます。

- **[データベースの追加]** をクリックして、プールに追加できるデータベースの一覧を表示します。

    または

- プールから削除するデータベースを選択し、**[データベースの削除]** をクリックします。

![推奨されるプール](./media/sql-database-elastic-pool-portal/add-remove-databases.png)

## プールに新しいデータベースを作成する

プールに新しいデータベースを作成するには、目的のプールに移動し、**[データベースを作成する]** をクリックします。

SQL データベースが正しいサーバーとプールで既に構成されているため、名前を入力して、データベース オプションを選択し、**[OK]** をクリックして、新しいデータベースを作成します。


   ![create elastic database](./media/sql-database-elastic-pool-portal/create-database.png)



## エラスティック データベース プールの監視と管理

エラスティック データベース プールを作成した後で、既存のプールの一覧を参照し、目的のプールを選択して、ポータルでプールを監視したり管理したりできます。

プールを作成した後、次のことができます。

- **[プールの構成]** を選択し、プール eDTU とデータベース設定ごとの eDTU を変更できます。
- **[ジョブの作成]** を選択し、エラスティック ジョブを作成してプールのデータベースを管理できます。エラスティック ジョブにより、プール内の任意の数のデータベースに対して Transact-SQL スクリプトを実行できます。詳細については、「[エラスティック データベース ジョブの概要](sql-database-elastic-jobs-overview.md)」をご覧ください。
- **[ジョブの管理]** を選択し、既存のエラスティック ジョブを管理します。
- **[データベースの作成]** をクリックして、プールに新しいデータベースを作成します。
- プール設定のリンクをクリックして、プールの eDTU とプールあたりの GB を調整します。
- データベースのリンクをクリックして、プールにデータベースを追加するか、プールからデータベースを削除します。
- データベース設定のリンクをクリックして、プール内のエラスティック データベースの最小および最大 eDTU を調整します。 

![エラスティック プールの監視](./media/sql-database-elastic-pool-portal/pool-tasks.png)


既存のプールを選択すると、プールのリソース使用率を確認できます。**[リソース使用率]** グラフをクリックして、グラフをカスタマイズして警告を設定できる **[メトリック]** ブレードを開きます。

![エラスティック プールの監視][4] ![リソース使用率][6]

**[グラフの編集]** をクリックしてパラメータを追加すると、プールのテレメトリを容易に確認できるようになります。


![グラフの編集][7]


## 次のステップ
エラスティック データベース プールを作成した後は、エラスティック ジョブを作成してプール内のデータベース を管理できます。エラスティック ジョブはプールのデータベースの任意の数に対して Transact-SQL スクリプトの実行を容易にします。詳細については、「[エラスティック データベース ジョブの概要](sql-database-elastic-jobs-overview.md)」をご覧ください。



## その他のリソース

- [SQL Database エラスティック プール](sql-database-elastic-pool.md)
- [PowerShell を使った SQL Database エラスティック プールの作成](sql-database-elastic-pool-powershell.md)
- [C# で SQL Database を作成し、管理する](sql-database-client-library.md)
- [エラスティック データベースのリファレンス](sql-database-elastic-pool-reference.md)


<!--Image references-->
[4]: ./media/sql-database-elastic-pool-portal/monitor-elastic-pool.png
[6]: ./media/sql-database-elastic-pool-portal/metric.png
[7]: ./media/sql-database-elastic-pool-portal/edit-chart.png
[10]: ./media/sql-database-elastic-pool-portal/star.png

<!---HONumber=AcomDC_0218_2016-->