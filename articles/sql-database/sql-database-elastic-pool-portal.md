<properties 
	pageTitle="SQL Database エラスティック データベース プールの作成と管理 (プレビュー)" 
	description="Azure SQL Database のグループ間で共有するリソースの 1 つのプールを作成します。" 
	services="sql-database" 
	documentationCenter="" 
	authors="stevestein" 
	manager="jeffreyg" 
	editor=""/>

<tags 
	ms.service="sql-database"
	ms.devlang="NA"
	ms.date="06/24/2015" 
	ms.author="sstein" 
	ms.workload="data-management" 
	ms.topic="article" 
	ms.tgt_pltfrm="NA"/>


# SQL Database エラスティック プール (プレビュー) の作成と管理

> [AZURE.SELECTOR]
- [Azure portal](sql-database-elastic-pool-portal.md)
- [PowerShell](sql-database-elastic-pool-powershell.md)

この記事では、[Azure ポータル](https://portal.azure.com)でエラスティック プールを作成する方法について説明します。

エラスティック プールは、プロセスの作成、メンテナンス、多くのデータベースのパフォーマンスとコストの管理を簡略化します。
 

> [AZURE.NOTE]エラスティック プールは現在プレビューで、SQL Database V12 サーバーでのみ使用できます。

 


## 前提条件

エラスティック プールを作成するには、以下のものが必要です。

- Azure サブスクリプション。 Azure サブスクリプションをお持ちでない場合、このページの上部の無料試用版をクリックしてからこの記事に戻り、最後まで完了してください。
- Azure SQL Database バージョン 12 サーバー。V12 サーバーがない場合は、「[Create your first Azure SQL Database (最初の Azure SQL Database を作成する)](sql-database-get-started.md)」の手順を確認して 1 つ作成してください。



## エラスティック プールの作成

サーバーに新しいプールを追加することで、エラスティック プールを作成します。サーバーに複数のプールを追加できますが、各プールに関連付けられるサーバーは 1 つのみです。さらに、サーバー上のデータベースのすべてまたは一部をプールに追加できます。


1.	プールに追加するデータベースを含む SQL Database V12 サーバーを選択します。
2.	**[SQL Server]** ブレード上部の **[プールの追加]** を選択してプールを作成します。

   ![エラスティック プールの作成][1]

## エラスティック プールの構成

価格レベルの設定、データベースの追加、プールのパフォーマンス特性の構成を行い、プールを構成します。

***[プールの追加]** コマンドを選択する場合は、**[プレビューの使用条件]** を選択し、**[プレビューの使用条件]** ブレードを完了してプレビューの使用条件に同意する必要があります。各サブスクリプションに対して 1 回のみ、使用条件に同意する必要があります。*

   ![エラスティック プールの構成][2]


### 価格レベル

エラスティック プールの価格レベルは SQL Database のサービス レベルに少し似ています。価格レベルによってプールのエラスティック データベースで使用できる機能が決まり、DTU の最大数 (DTU MAX) や各データベースで使用できるストレージ容量 (GB) が決まります。

> [AZURE.NOTE]プレビューは現在、**Standard** 価格レベルに制限されています。

| 価格レベル | データベースごとの DTU MAX |
| :--- | :--- |
| Standard | データベースごとの最大 100 DTU |

### データベースの追加

どの時点でも、特定のデータベースを選択してプールに含めることができます。新しくプールを作成する場合、Azure ではプールに含めることでメリットのあるデータベースを推奨し、含めるようマークすることをお勧めしています。サーバーで使用可能なすべてのデータベースを追加したり、初期のリストで必要に応じてデータベースを選択、削除したりできます。

   ![データベースの追加][5]

プールに追加するデータベースを選択する場合、次の条件を満たす必要があります。

- プールにデータベースのためのスペースがあること (データベースの最大数がすでに含まれていないこと)。具体的には、プールには、各データベースの DTU 保証をカバーする利用可能な DTU が十分にある必要があります (たとえば、グループの DTU 保証が 400 で、各データベースの DTU 保証が 10 である場合、プールで使用できるデータベースの最大数は 40 になります (DB あたり 400 DTU/10DTU = 40 最大データベース)。
- データベースで使用される現在の機能は、プールで使用できる必要があります。 


### パフォーマンスの構成

プールのパフォーマンスを構成するには、プールと、プール内のエラスティック データベースの両方のパフォーマンス パラメーターを設定します。**[エラスティック データベースの設定]** はプール内のすべてのデータベースに適用されることにご注意ください。

   ![エラスティック プールの構成][3]

プールのパフォーマンスを定義する 3 つのパラメーターを設定できます。プールの DTU 保証、プール内のエラスティック データベースの DTU MIN と DTU MAX の 3 つです。次の表は、それぞれについての説明と、設定方法について一部のガイドを表しています。

| パフォーマンス パラメーター | 説明 |
| :--- | :--- |
| **プール DTU/GB** - プールの保証 | プールの DTU 保証とは使用可能な DTU の保証の数であり、プール内のすべてのデータベースで共有されます。<br> 現時点では、100、200、400、800、1200 に設定できます。<br> グループ DTU 保証の特定のサイズは、グループの過去の DTU 使用率を考慮してプロビジョニングされる必要があります。あるいは、このサイズはデータベースごとに要求される DTU保証によって、また同時に実行されているアクティブなデータベースを活用することで、設定されます。プールの DTU 保証はプールで使用可能なストレージの容量にも関連します。プールに割り当てたあらゆる DTU ごとにデータベース ストレージの 1 GB が得られます (1 DTU = ストレージの 1 GB)。<br> **プールの DTU 保証には何を設定する必要がありますか** <br>少なくとも、プールの DTU 保証を ([データベースの数] x [データベースごとの DTU 使用率の平均]) に設定する必要があります。 |
| **DTU MIN** -各データベースの DTU 保証 | データベースごとの DTU 保証は、プール内の 1 つのデータベースが保証される DTU の数です。現時点では、この保証は、0、10、20、50 DTU に設定できます。そのグループでデータベースへの保証を提供しないことを選ぶこともできます (DTU MIN = 0)。<br> **データベースごとの DTU 保証には何を設定する必要がありますか。** <br>少なくとも、データベース (DTU MIN) ごとの DTU 保証を ([データベースごとの使用率の平均]) に設定する必要があります。データベースごとの DTU 保証は、プール内のすべてのデータベースの DTU 保証を設定するグローバル設定です。 |
| **DTU MAX** - データベースごとの DTU の上限 | データベースごとの DTU MAX は、プール内の 1 つのデータベースで使用される可能性がある DTU の最大数です。データベースごとの DTU の上限は十分に高く設定し、データベースで発生する可能性があるバーストやスパイクを処理できるようにします。この上限はシステムで制限されている値まで設定できます。制限値はプールの価格レベルによって異なります (Standard は 100 DTU)。この上限の特定のサイズは、グループ内のデータベースの最大使用率パターンと合っている必要があります。プールでは通常、ホットとコールドのデータベース使用パターンがあり、すべてのデータベースが同時に最大に使用されることはないため、グループではある程度高めに上限が設定されています。<br> **データベースごとの DTU 上限には何を設定する必要がありますか。** <br> データベースごとの DTU MAX か DTU 上限を ([データベースの最大使用率]) に設定します。たとえば、データベースごとの最大使用率を 50 DTU とし、グループの 100 のデータベースの 20% のみが同時に最大で使用されると仮定します。データベースごとの DTU 上限が 50 DTU に設定されている場合は、グループを 5 倍に設定するか、グループの DTU 保証を 1,000 DTU と高く設定しておいても問題はありません。DTU 上限はデータベースのリソース保証ではなく、使用可能な場合に達する可能性がある DTU の限度であることにご注意ください。 |


## エラスティック プールへのデータベースの追加

プールを作成した後で、プールにデータベースを追加したり削除したりできます。


## エラスティック プールの監視と管理

エラスティック プールを作成した後で、既存のプールの一覧を参照し、目的のプールを選択して、ポータルでプールを監視したり管理したりできます。

プールを作成した後、次のことができます。

- **[プールの構成]** を選択し、プール DTU とデータベース設定ごとの DTU を変更できます。
- **[ジョブの作成]** を選択し、エラスティック ジョブを作成してプールのデータベースを管理できます。エラスティック ジョブはプールのデータベースの任意の数に対して T-SQL スクリプトの実行を容易にします。詳細については、「[エラスティック データベース ジョブの概要](sql-database-elastic-jobs-overview.md)」をご覧ください。
- **[ジョブの管理]** を選択し、既存のエラスティック ジョブを管理します。



![エラスティック プールの監視][8]




![エラスティック プールの監視][4]

既存のプールを選択すると、プールのリソース使用率を確認できます。**[リソース使用率]** グラフをクリックして、グラフをカスタマイズして警告を設定できる **[メトリック]** ブレードを開きます。


![リソース使用率][6]

**[グラフの編集]** をクリックしてパラメータを追加すると、プールのテレメトリを容易に確認できるようになります。


![グラフの編集][7]







## 次のステップ
エラスティック プールを作成した後、エラスティック ジョブを作成してプールのデータベースを管理できます。エラスティック ジョブはプールのデータベースの任意の数に対して T-SQL スクリプトの実行を容易にします。

詳細については、「[エラスティック データベース ジョブの概要](sql-database-elastic-jobs-overview.md)」をご覧ください。



## 関連項目

- [SQL Database エラスティック プール](sql-database-elastic-pool.md)
- [PowerShell を使った SQL Database エラスティック プールの作成](sql-database-elastic-pool-powershell.md)
- [エラスティック データベースのリファレンス](sql-database-elastic-pool-reference.md)


<!--Image references-->
[1]: ./media/sql-database-elastic-pool-portal/new-elastic-pool.png
[2]: ./media/sql-database-elastic-pool-portal/configure-elastic-pool.png
[3]: ./media/sql-database-elastic-pool-portal/configure-performance.png
[4]: ./media/sql-database-elastic-pool-portal/monitor-elastic-pool.png
[5]: ./media/sql-database-elastic-pool-portal/add-databases.png
[6]: ./media/sql-database-elastic-pool-portal/metric.png
[7]: ./media/sql-database-elastic-pool-portal/edit-chart.png
[8]: ./media/sql-database-elastic-pool-portal/configure-pool.png

<!---HONumber=July15_HO4-->