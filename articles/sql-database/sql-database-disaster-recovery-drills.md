<properties 
   pageTitle="SQL Database の災害復旧訓練" 
   description="Azure SQL Database を使用して、ミッション クリティカルなビジネス アプリケーションがエラーと障害に対して回復力を保持するための災害復旧訓練を実行するためのガイダンスとベスト プラクティスについて説明します。" 
   services="sql-database" 
   documentationCenter="" 
   authors="mihaelablendea" 
   manager="jeffreyg" 
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-management" 
   ms.date="04/13/2015"
   ms.author="mihaelab"/>

#災害復旧訓練の実行

復旧ワークフローのためのアプリケーションの対応状況の検証は、定期的に実行することをお勧めします。アプリケーションの動作、データの損失の影響やフェールオーバーによる中断を検証することをお勧めします。これは、ビジネス継続性の証明として、ほとんどの業界標準で必要条件ともなっています。

障害復旧の訓練は以下のもので構成されています。

- データ層の停止シミュレーション
- 復旧 
- 復旧後のアプリケーションの整合性の検証

どのように[ビジネス継続性を設計](sql-database-business-continuity.md)するかによって、実行する訓練のワークフローは異なります。下記に、Azure SQL Database のコンテキストで災害復旧の訓練を行う際のベスト プラクティスについて説明します。

##地理リストア

災害復旧の訓練を実施する際のデータ損失の可能性を回避するために、実稼働環境のコピーから作成したテスト環境を使用して訓練を実行し、アプリケーションのフェールオーバーのワークフローの確認にもそれを使用することをお勧めします。
 
####障害のシミュレーション

- ソース データベースを削除するか、名前を変更することによって、システムの停止をシミュレートし、アプリケーションの接続エラーを発生させます。この方法で、障害の検出と警告を検証し、復旧時間の RTO を測定できます。

####復旧

- [こちら](sql-database-disaster-recovery.md)の説明に従って、データベースの地理リストアを別のサーバーに実行します。 
- アプリケーションの構成を変更して、復旧したデータベースに接続し、「[Finalize a Recovered Database (復旧データベースの最終処理)](sql-database-recovered-finalize.md)」ガイドに従って、復旧を完了します。

####検証

- 復旧後に、アプリケーションの整合性を検証して訓練を完了します (接続文字列、ログイン、基本的な機能のテスト、その他の標準的なアプリケーションのサインオフのプロシージャの検証など)。

##標準 geo レプリケーション

標準 geo レプリケーションを使用して保護されているデータベースは、1 つの判読できないセカンダリ データベースのみを持つことができます。訓練には、データベースが保護されていない時点でのリンクの強制終了が含まれます。また、データ損失の可能性があるため、実稼動データベースではこのようなテストを実行しないようにお勧めしています。代わりに、実稼働環境のコピーを作成し、それを使用して、アプリケーションのフェールオーバーのワークフローを確認することをお勧めします。

####障害のシミュレーション

- プライマリ データベースでのワークロードをシミュレートします。終了時に、プライマリがアクティブな場合は、データ損失が発生する場合がありますが、これは訓練をより現実的なものにしています。
- プライマリ データベースを削除するか、セカンダリ データベース側にあるリンクの[強制終了を実行します](sql-database-disaster-recovery.md)。

####復旧

- アプリケーション構成を変更して、以前の読み取り専用セカンダリに接続すると、セカンダリは完全にアクセス可能になり、アプリケーションを新しいプライマリとして使用できるようになります。 
- 「[Finalize a Recovered Database (復旧データベースの最終処理)](sql-database-recovered-finalize.md)」ガイドに従って、復旧を完了します。

####検証

- 復旧後に、アプリケーションの整合性を検証して訓練を完了します (接続文字列、ログイン、基本的な機能のテスト、その他の標準的なアプリケーションのサインオフのプロシージャの検証など)。

##アクティブ geo レプリケーション

災害復旧の訓練は、並列のターゲット サーバーを使用し、読み取り専用セカンダリの別のセットをその中に作成することによって実施します。アプリケーション層のテスト版は、強制終了後、そのサーバーに対してテストを実行して、操作の健全性とデータの整合性を検証するために使用します。

####障害のシミュレーション

- プライマリ データベースからセカンダリ テスト サーバーに[新しいアクティブな geo レプリケーション リンクを作成します](sql-database-business-continuity-design.md)。終了時に、プライマリがアクティブな場合は、データ損失が発生する場合がありますが、これは訓練をより現実的なものにしています。
- テスト サーバーに存在するセカンダリ データベースリンクの[強制終了を実行します](sql-database-disaster-recovery.md)。

####復旧

- アプリケーション構成を変更して、以前の読み取り専用セカンダリに接続すると、終了後にセカンダリは書き込み可能になります。
- 「[Finalize a Recovered Database (復旧データベースの最終処理)](sql-database-recovered-finalize.md)」ガイドに従って、復旧を完了します。

####検証

- 復旧後に、アプリケーションの整合性を検証して訓練を完了します (接続文字列、ログイン、基本的な機能のテスト、その他の標準的なアプリケーションのサインオフのプロシージャの検証など)。

 

<!---HONumber=July15_HO2-->