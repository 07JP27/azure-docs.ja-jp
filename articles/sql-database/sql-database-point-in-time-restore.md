<properties
   pageTitle="クラウドのビジネス継続性 - ポイントインタイム リストア | Microsoft Azure"
   description="Azure SQL Database を特定の時点 (最長 35 日間) にロール バックすることができる、ポイントインタイム リストアについて説明します。"
   services="sql-database"
   documentationCenter=""
   authors="stevestein"
   manager="jhubbard"
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-management"
   ms.date="05/10/2016"
   ms.author="sstein"/>

# 概要: SQL Database のポイントインタイム リストア

ポイントインタイム リストアを使用すると、データベースを以前の特定の時点に復元できます。

Azure SQL Database サービスは、自動バックアップ機能ですべてのデータベースを保護します。バックアップの保管期間は、Basic で 7 日間、Standard で 14 日間、Premium で 35 日間です。ポイントインタイム リストアは、偶発的なデータの破損や削除の後に、バックアップからデータベースを復元できるように設計されています。

データベースは自動的に取得されます。設定の選択や追加料金は必要ありません。この自動バックアップとポイントインタイム リストアは、原因にかかわらず、偶発的な破損や削除からデータベースを保護できるコスト ゼロ、管理作業ゼロの方法です。


|タスク (ポータル) | PowerShell | REST () |
|:--|:--|:--|
| [過去のある時点に SQL Database を復元する](sql-database-point-in-time-restore-portal.md) | [PowerShell](sql-database-point-in-time-restore-powershell.md) | [REST (createMode=PointInTimeRestore)](https://msdn.microsoft.com/library/azure/mt163685.aspx) |
| [削除された SQL Database の復元](sql-database-restore-deleted-database-portal.md) | [PowerShell](sql-database-restore-deleted-database-powershell.md) | [REST (createMode=Restore)](https://msdn.microsoft.com/library/azure/mt163685.aspx)|



## 自動バックアップの概要

Basic、Standard、Premium のすべてのデータベースは、自動バックアップで保護されています。完全バックアップが毎週作成され、差分バックアップは毎日作成されます。ログのバックアップは 5 分間隔で実行されます。初回の完全バックアップは、データベースの作成直後にスケジュールされます。通常、完全バックアップにかかる時間は 30 分ですが、長くかかることもあります。データベースのサイズが大きな場合 (たとえば、データベースのコピーや、大きなデータベースからの復元で作成されたデータベースの場合)、初回の完全バックアップに長い時間がかかる可能性があります。初回の完全バックアップ以降のバックアップは、すべて自動的にスケジュールされ、バックグラウンドで自動的に管理されます。完全バックアップと差分バックアップの正確なタイミングは、全体的な負荷のバランスに応じてシステムが決定します。バックアップ ファイルは、障害復旧時に可用性を確保するために、読み取りアクセス権 (RA-GRS) を持つ geo 冗長ストレージ アカウントで格納されます。


## ポイントインタイム リストアの復旧時間

データベースの復元にかかる時間は、データベースのサイズ、選択した時点、選択した時点の状態を再構築するために再生する必要があるアクティビティ数など、多くの要因で変わります。大規模なデータベースや、アクティビティ数が多いデータベースの場合、復元に数時間かかることがあります。データベースを復元すると、常に元のデータベースと同じサーバー上に新しいデータベースが作成されます。そのため、復元されるデータベースには、新しい名前を付ける必要があります。


データベースは、任意のパフォーマンス レベルまたはエラスティック プールに復元できます。復元によって新しいデータベースが作成される点や、復元されるデータベースのサービス レベルとパフォーマンス レベルが、現在実行中のデータベースの状態とは異なる点を考慮して、サーバーまたはプールに十分な DTU クォータがあることを確認する必要があります。復元が完了すると、復元されたデータベースは、通常の完全にアクセス可能なオンライン データベースになり、サービス レベルとパフォーマンス レベルに基づいて通常料金が発生します。復旧の目的でデータベースを復元する場合、復元されたデータベースを元のデータベースの代わりとして扱うか、データを取得し、元のデータベースを更新するために使用することができます。復元されたデータベースを元のデータベースの代わりに使用する場合、パフォーマンス レベルやサービス レベルが適切であることを確認し、必要に応じてデータベースをスケールしてください。T-SQL の ALTER DATABASE コマンドを使用して、元のデータベース名を変更し、復元したデータベースに元の名前を付けます。復元されたデータベースからデータを取得する場合、何らかのデータ復旧スクリプトを作成し、実行する必要があります。復元操作が完了するまでに時間がかかる可能性がありますが、データベース一覧全体でデータベースが表示されるようになります。復元中にデータベースを削除すると、操作は取り消され、料金はかかりません。



## 最近削除されたデータベースの復元

Basic、Standard、または Premium データベースを削除すると、最後のバックアップは、通常のリテンション期間維持されるので、削除された時点までデータベースを復元できます。

削除されたデータベースの場合、復元ポイントはデータベースの削除時点に固定されます。また、既に説明したように、削除されたデータベースを復元するときに、元のデータベースを含むサーバーにのみ復元できます。サーバーを削除するときは、この点に気を付けてください。サーバーを削除すると、そのサーバーに以前にあったデータベースを復元できなくなります。

## バックアップ/復元とコピー/エクスポート/インポート

ポイントインタイム リストアは、偶発的なデータの損失や破損から Basic、Standard、および Premium データベースを復旧する場合に推奨されるアプローチです。バックアップと復元は、低コスト (過度なサイズでなければ、バックアップに料金はかかりませんが、トランザクションに一貫性のあるエクスポートを確保する必要があるデータベース コピーや、BACPAC ファイルの格納の場合は料金がかかります)、管理作業ゼロ (バックアップは自動的に実行されますが、エクスポートの管理やスケジュールは管理者が行う必要があります) です。また、RPO に優れ (特定の時点への復元を、コピー/エクスポート/インポートのよりも細かい設定 (1 分) で行うことができます)、復元処理も短時間です (インポートは、スキーマの作成、インデックスの無効化、データの読み込み、各テーブルのインデックスの有効化という処理を伴うので、バックアップからの復元は、通常、インポートよりもはるかに高速です)。ただし、リテンション期間を超える長期のアーカイブの場合、今後もコピーとエクスポートが推奨されます。


## 概要

自動バックアップとポイントインタイム リストアを使用すると、偶発的なデータの破損や削除からデータベースを保護できます。このゼロ コスト、管理作業ゼロのソリューションは、すべての SQL Database で使用できます。短期間の復元のニーズがある場合、バックアップと復元には、代替のコピー/エクスポート/インポート ソリューションよりも大きな利点があります。ポイントインタイム リストアは、ビジネス継続性戦略の一環として使用し、長期のアーカイブやデータ移行目的で必要な場合にのみ、エクスポートを使用することをお勧めします。



## その他のリソース

- [ビジネス継続性の概要](sql-database-business-continuity.md)
- [geo リストア](sql-database-geo-restore.md)
- [アクティブ geo レプリケーション](sql-database-geo-replication-overview.md)
- [クラウド障害復旧用アプリケーションの設計](sql-database-designing-cloud-solutions-for-disaster-recovery.md)
- [復旧された Azure SQL データベースの最終処理を行う](sql-database-recovered-finalize.md)

<!---HONumber=AcomDC_0511_2016-->