<properties
	pageTitle="SQL エラー コード - データベース接続エラー | Microsoft Azure"
	description="よくあるデータベース接続エラー、データベース コピーの問題、一般エラーなど、SQL Database クライアント アプリケーションの SQL エラー コードについて説明します。"
	keywords="SQL エラー コード,SQL へのアクセス,データベース接続エラー,SQL エラー コード"
	services="sql-database"
	documentationCenter=""
	authors="MightyPen"
	manager="jeffreyg"
	editor="" />


<tags
	ms.service="sql-database"
	ms.workload="data-management"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="12/06/2015"
	ms.author="genemi"/>


# SQL Database クライアント アプリケーションの SQL エラー コード: データベース接続エラーとその他の問題


<!--
Old Title on MSDN:  Error Messages (Azure SQL Database)
ShortId on MSDN:  ff394106.aspx
Dx 4cff491e-9359-4454-bd7c-fb72c4c452ca
-->


この記事では、データベース接続エラー、一時的な障害、リソース ガバナンス エラー、データベース コピーの問題、その他のエラーなど、SQL Database クライアント アプリケーションの SQL エラー コードの一覧を示します。大半は Azure SQL Database に固有のカテゴリで、Microsoft SQL Server には当てはまりません。

クライアント アプリケーションでは、任意のエラーについて、カスタマイズしたメッセージをユーザーに表示することができます。

<a id="bkmk_connection_errors" name="bkmk_connection_errors">&nbsp;</a>


## データベース接続エラー、一時的な障害、その他の一時的なエラー

次の表に、接続喪失エラーや、アプリケーションが SQL Database にアクセスしようとしたときに発生する可能性がある一時的なエラーを示します。


### 最も一般的なデータベース接続エラーと一時的な障害


一時的な障害が現れるとき、一般的に、クライアント プログラムから次のエラー メッセージの 1 つが表示されます。

- サーバー <Azure_instance> 上のデータベース <db_name> は現在使用できません。後で接続を再試行してください。問題が解決しない場合は、<session_id> のセッション トレース ID を控えてカスタマー サポートに問い合わせてください。

- サーバー <Azure_instance> 上のデータベース <db_name> は現在使用できません。後で接続を再試行してください。問題が解決しない場合は、<session_id> のセッション トレース ID を控えてカスタマー サポートに問い合わせてください。(Microsoft SQL Server、エラー: 40613)

- 既存の接続はリモート ホストに強制的に切断されました。

- System.Data.Entity.Core.EntityCommandExecutionException: コマンド定義を実行中にエラーが発生しました。詳細については、内部例外を参照してください。 ---> System.Data.SqlClient.SqlException: サーバーから結果を受信しているときに、トランスポート レベルのエラーが発生しました。 (プロバイダー: セッション プロバイダー、エラー: 19 - 物理的な接続は使用できません)

一時的なエラーが発生すると通常、クライアント プログラムの*再試行ロジック*が設計に従って実行され、同じ操作がやり直されます。再試行ロジックのコード例については、以下のページを参照してください。


- [SQL Database のクライアント開発とクイック スタート コード サンプル](sql-database-develop-quick-start-client-code-samples.md)

- [SQL Database における接続エラーと一過性の障害から復旧するための対策](sql-database-connectivity-issues.md)


### 一時的な障害のエラー コード


| エラー コード | 重大度 | 説明 |
| ---: | ---: | :--- |
| 4060 | 16 | ログインで要求されたデータベース "%.&#x2a;ls" を開くことができません。ログインに失敗しました。 |
|40197|17|要求の処理中にサービスでエラーが発生しました。もう一度実行してください。エラー コード %d。<br/><br/>ソフトウェアやハードウェアのアップグレード、ハードウェアの障害、その他フェールオーバーに関する問題によってサービスがダウンしたときに、このエラーが発生します。障害の種類や発生したフェールオーバーに関する詳細な情報は、エラー 40197 のメッセージに埋め込まれたエラー コード (%d) から得られます。エラー 40197 のメッセージに埋め込まれるエラー コードとしては、40020、40143、40166、40540 などがあります。<br/><br/>SQL Database サーバーに再接続すると自動的に、正常なデータベースのコピーに接続されます。アプリケーションでエラー 40197 をキャッチし、メッセージに埋め込まれているエラー コード (%d) をログに記録してトラブルシューティングに備えたうえで、リソースが復旧して接続が再度確立されるまで SQL Database への再接続を試みる必要があります。|
|40501|20|サービスは現在ビジー状態です。10 秒後に要求を再試行してください。インシデント ID: %ls。コード: %d.<br/><br/>*注記:* 一般的な情報は、「<br/>• [Azure SQL Database のリソース制限](sql-database-resource-limits.md)」を参照してください。
|40613|17|サーバー '%.&#x2a;ls' のデータベース '%.&#x2a;ls' は現在使用できません。後で接続を再試行してください。問題が解決しない場合は、'%.&#x2a;ls' のセッション トレース ID を控えてカスタマー サポートに問い合わせてください。|
|49918|16|要求を処理できません。要求を処理するためのリソースが不足しています。<br/><br/>サービスは現在ビジー状態です。後で要求を再試行してください。 |
|49919|16|要求を処理、作成、更新できません。サブスクリプション "%ld" に対して実行中の作成または更新の操作が多すぎます。<br/><br/>サービスは、サブスクリプションまたはサーバーに対する複数の作成要求または更新要求の処理でビジー状態です。現在、要求はリソースの最適化のためにブロックされています。クエリ [sys.dm\_operation\_stats](https://msdn.microsoft.com/library/dn270022.aspx) を実行して保留中の操作を確認します。保留中の作成要求または更新要求が完了するまで待つか、いずれかの保留中の要求を削除して後で要求を再試行します。 |
|49920|16|要求を処理できません。サブスクリプション "%ld" に対して実行中の操作が多すぎます。<br/><br/>サービスは、このサブスクリプションに対する複数の要求の処理でビジー状態です。現在、要求はリソースの最適化のためにブロックされています。[sys.dm\_operation\_stats](https://msdn.microsoft.com/library/dn270022.aspx) を実行して操作の状態を確認します。保留中の要求が完了するまで待つか、いずれかの保留中の要求を削除して後で要求を再試行します。 |


<a id="bkmk_b_database_copy_errors" name="bkmk_b_database_copy_errors">&nbsp;</a>

## データベース コピー エラー


以下の表は、Azure SQL Database でデータベースをコピーするときに発生する可能性のある各種エラーの一覧です。詳細については、「[Azure SQL Database のコピー](sql-database-copy.md)」を参照してください。


|エラー コード|重大度|説明|
|---:|---:|:---|
|40635|16|IP アドレス '%.&#x2a;ls' のクライアントは一時的に無効化されています。|
|40637|16|データベース コピーの作成は現在無効です。|
|40561|16|データベースのコピーに失敗しました。ソースまたはターゲットのデータベースが存在しません。|
|40562|16|データベースのコピーに失敗しました。ソース データベースは削除されました。|
|40563|16|データベースのコピーに失敗しました。ターゲット データベースは削除されました。|
|40564|16|データベースのコピーに失敗しました。内部エラーが発生しました。ターゲット データベースを削除してやり直してください。|
|40565|16|データベースのコピーに失敗しました。同じソースから複数のデータベース コピーを同時に実行することはできません。ターゲット データベースを削除してやり直してください。|
|40566|16|データベースのコピーに失敗しました。内部エラーが発生しました。ターゲット データベースを削除してやり直してください。|
|40567|16|データベースのコピーに失敗しました。内部エラーが発生しました。ターゲット データベースを削除してやり直してください。|
|40568|16|データベースのコピーに失敗しました。ソース データベースが使用できなくなりました。ターゲット データベースを削除してやり直してください。|
|40569|16|データベースのコピーに失敗しました。ターゲット データベースが使用できなくなりました。ターゲット データベースを削除してやり直してください。|
|40570|16|データベースのコピーに失敗しました。内部エラーが発生しました。ターゲット データベースを削除してやり直してください。|
|40571|16|データベースのコピーに失敗しました。内部エラーが発生しました。ターゲット データベースを削除してやり直してください。|


<a id="bkmk_c_resource_gov_errors" name="bkmk_c_resource_gov_errors">&nbsp;</a>

## リソース ガバナンス エラー


以下の表は、Azure SQL Database を使った作業中、リソースの過剰使用によって発生するエラーの一覧です。次に例を示します。


- トランザクションを長時間開いたままにした。
- トランザクションで保持しているロックが多すぎる。
- プログラムのメモリ使用量が多すぎる。
- プログラムで使用している `TempDb` の領域が多すぎる可能性があります。


**ヒント:** 次のリンク先には、このセクションで取り上げた大半またはすべてのエラーに共通する情報が記載されています。


- [Azure SQL Database のリソース制限](sql-database-resource-limits.md)


|エラー コード|重大度|説明|
|---:|---:|:---|
|10928|20|リソース ID: %d。データベースの %s 制限の %d に達しました。詳細については、[http://go.microsoft.com/fwlink/?LinkId=267637](http://go.microsoft.com/fwlink/?LinkId=267637)を参照してください。<br/><br/>リソース ID は、制限に達したリソースを示します。ワーカー スレッドの場合、リソース ID = 1 となります。セッションの場合、リソース ID = 2 となります。<br/><br/>*注:* このエラーの詳細および解決方法については、「<br/>• [Azure SQL Database のリソース制限](sql-database-resource-limits.md)」を参照してください。 |
|10929|20|リソース ID: %d。%S の最低限保証は %d、最大値は %d 、データベースの現在の使用状況は %d です。ただし、サーバーは現在ビジー状態であり、このデータベースの %d を超える要求をサポートできません。詳細については、[http://go.microsoft.com/fwlink/?LinkId=267637](http://go.microsoft.com/fwlink/?LinkId=267637) を参照してください。それ以外の場合は、後でもう一度お試しください。<br/><br/>リソース ID は、制限に達したリソースを示します。ワーカー スレッドの場合、リソース ID = 1 となります。セッションの場合、リソース ID = 2 となります。<br/><br/>*注:* このエラーの詳細および解決方法については、「<br/>• [Azure SQL Database のリソース制限](sql-database-resource-limits.md)」を参照してください。|
|40544|20|データベースのサイズ クォータに達しました。データをパーティション分割するか、データを削除するか、インデックスを削除してください。その他の解決方法についてはドキュメントを参照してください。|
|40549|16|トランザクションが長時間実行されているため、セッションを終了しました。トランザクションを短くしてください。|
|40550|16|取得したロックの数が多すぎるため、セッションを終了しました。1 つのトランザクションで読み取る行または変更する行の数を減らしてください。|
|40551|16|`TEMPDB` の使用領域が多すぎるため、セッションを終了しました。クエリを変更して一時テーブルの使用領域を減らしてください。<br/><br/>*ヒント:* 一時オブジェクトを使用している場合、セッションで不要となった一時オブジェクトを削除して `TEMPDB` データベースの領域を節約してください。|
|40552|16|トランザクション ログの使用領域が多すぎるため、セッションを終了しました。1 回のトランザクションで変更する行を減らしてください。<br/><br/>*ヒント:* `bcp.exe` ユーティリティまたは `System.Data.SqlClient.SqlBulkCopy` クラスを使用して一括挿入を実行する場合は、1 回のトランザクションでサーバーにコピーされる行数を `-b batchsize` (または `BatchSize`) オプションで制限してください。`ALTER INDEX` ステートメントでインデックスを再構築する場合は、`REBUILD WITH ONLINE = ON` オプションの使用を検討してください。|
|40553|16|メモリの使用量が多すぎるため、セッションを終了しました。クエリを変更して、処理する行を減らしてください。<br/><br/>*ヒント:* Transact-SQL コード内の `ORDER BY` 操作と `GROUP BY` 操作の数を減らすことで、クエリのメモリ要件を軽減することができます。|


リソースのガバナンスおよび関連するエラーの詳細については、以下のページを参照してください。


- [Azure SQL Database のリソース制限](sql-database-resource-limits.md)



<a id="bkmk_e_general_errors" name="bkmk_e_general_errors">&nbsp;</a>

## 一般エラー


次の表は、上に挙げたいずれのカテゴリにも該当しない一般エラーの全一覧です。


|エラー コード|重大度|説明|
|---:|---:|:---|
|15006|16|<AdministratorLogin> は無効な文字を含んでいるため、有効な名前ではありません。|
|18452|14|ログインできませんでした。このログインは信頼されていないドメインからのログインなので、Windows 認証では使用できません。%.&#x2a;ls (Windows ログインは、このバージョンの SQL Server ではサポートされていません。)|
|18456|14|ユーザー '%.&#x2a;ls' はログインできませんでした。%.&#x2a;ls%.&#x2a;ls(ユーザー "%.&#x2a;ls" はログインできませんでした。パスワードを変更できませんでした。このバージョンの SQL Server ではログイン時にパスワードを変更することはできません。)|
|18470|14|ユーザー '%.&#x2a;ls' はログインできませんでした。理由: このアカウントは無効です。%.&#x2a;ls|
|40014|16|同じトランザクションで複数のデータベースを使用することはできません。|
|40054|16|クラスター化インデックスのないテーブルは、このバージョンの SQL Server ではサポートされていません。クラスター化インデックスを作成してからやり直してください。|
|40133|15|この操作は、このバージョンの SQL Server ではサポートされていません。|
|40506|16|指定された SID は、このバージョンの SQL Server では無効です。|
|40507|16|このバージョンの SQL Server では、'%.&#x2a;ls' の呼び出しでパラメーターを使用することはできません。|
|40508|16|USE ステートメントを使用してデータベースを切り替えることはできません。別のデータベースに接続するには新しい接続を使用してください。|
|40510|16|ステートメント '%.&#x2a;ls' は、このバージョンの SQL Server ではサポートされていません。|
|40511|16|組み込み関数 '%.&#x2a;ls' は、このバージョンの SQL Server ではサポートされていません。|
|40512|16|推奨されない機能 '%ls' は、このバージョンの SQL Server ではサポートされていません。|
|40513|16|サーバー変数 '%.&#x2a;ls' は、このバージョンの SQL Server ではサポートされていません。|
|40514|16|'%ls' は、このバージョンの SQL Server ではサポートされていません。|
|40515|16|このバージョンの SQL Server では、'%.&#x2a;ls' でデータベース名やサーバー名を参照することはできません。|
|40516|16|グローバル一時オブジェクトは、このバージョンの SQL Server ではサポートされていません。|
|40517|16|キーワードまたはステートメントのオプション '%.&#x2a;ls' は、このバージョンの SQL Server ではサポートされていません。|
|40518|16|DBCC コマンド '%.&#x2a;ls' は、このバージョンの SQL Server ではサポートされていません。|
|40520|16|セキュリティ保護可能なクラス '%S\_MSG' は、このバージョンの SQL Server ではサポートされていません。|
|40521|16|セキュリティ保護可能なクラス '%S\_MSG' は、このバージョンの SQL Server ではサーバー スコープでサポートされていません。|
|40522|16|データベース プリンシパル '%.&#x2a;ls' の型は、このバージョンの SQL Server ではサポートされていません。|
|40523|16|このバージョンの SQL Server では、ユーザー '%.&#x2a;ls' を暗黙的に作成することはできません。ユーザーを明示的に作成してから使用してください。|
|40524|16|データ型 '%.&#x2a;ls' は、このバージョンの SQL Server ではサポートされていません。|
|40525|16|WITH '%.ls' は、このバージョンの SQL Server ではサポートされていません。|
|40526|16|行セット プロバイダー '%.&#x2a;ls' は、このバージョンの SQL Server ではサポートされていません。|
|40527|16|リンク サーバーは、このバージョンの SQL Server ではサポートされていません。|
|40528|16|このバージョンの SQL Server では、ユーザーを資格情報、非対称キー、または Windows ログインにマップすることはできません。|
|40529|16|このバージョンの SQL Server では、組み込み関数 '%.&#x2a;ls' を権限借用コンテキストで使用することはできません。|
|40532|11|ログインにより要求されたサーバー "%.&#x2a;ls" を開けません。ログインに失敗しました。|
|40553|16|メモリの使用量が多すぎるため、セッションを終了しました。クエリを変更して、処理する行を減らしてください。<br/><br/>*注:* Transact-SQL コード内の `ORDER BY` 操作と `GROUP BY` 操作の数を減らすことで、クエリのメモリ要件を軽減することができます。|
|40604|16|サーバーのクォータを超えるため、CREATE/ALTER DATABASE できませんでした。|
|40606|16|データベースのアタッチは、このバージョンの SQL Server ではサポートされていません。|
|40607|16|Windows ログインは、このバージョンの SQL Server ではサポートされていません。|
|40611|16|サーバーで定義できるファイアウォール規則は最大 128 個です。|
|40614|16|ファイアウォールの規則の開始 IP アドレスに終了 IP アドレスを超える値を指定することはできません。|
|40615|16|ログインにより要求されたサーバー '{0}' を開けません。IP アドレス '{1}' のクライアントはこのサーバーへのアクセスが許可されていません。アクセスできるようにするには、SQL Database ポータルを使用するか、master データベースで run sp\_set\_firewall\_rule を実行して、この IP アドレスまたはアドレス範囲のファイアウォールの規則を作成します。この変更が有効になるまで最大で 5 分かかる場合があります。|
|40617|16|<rule name> で始まるファイアウォール規則の名前は長すぎます。最大長は 128 です。|
|40618|16|ファイアウォール規則の名前を空にすることはできません。|
|40620|16|ユーザー "%.&#x2a;ls" はログインできませんでした。パスワードを変更できませんでした。このバージョンの SQL Server ではログイン時にパスワードを変更することはできません。|
|40627|20|サーバー '{0}' およびデータベース '{1}' で操作を実行中です。数分待ってから、再試行してください。|
|40630|16|パスワードの検証に失敗しました。パスワードの文字数が不足していて、ポリシーで指定された基準を満たしていません。|
|40631|16|指定したパスワードが長すぎます。パスワードは 128 文字以下で指定してください。|
|40632|16|パスワードの検証に失敗しました。パスワードは、複雑さが不十分なため、ポリシーの要件を満たしていません。|
|40636|16|予約されているデータベース名 '%.&#x2a;ls' をこの操作で使用することはできません。|
|40638|16|サブスクリプション ID <subscription-id> は無効です。サブスクリプションが存在しません。|
|40639|16|要求がスキーマに準拠していません: <schema error>。|
|40640|20|サーバーで予期しない例外が発生しました。|
|40641|16|指定された場所が無効です。|
|40642|17|サーバーは現在ビジー状態です。後でもう一度やり直してください。|
|40643|16|指定された x-ms-version ヘッダー値が無効です。|
|40644|14|指定されたサブスクリプションへのアクセスの承認に失敗しました。|
|40645|16|サーバー名 <servername> を空や null にすることはできません。小文字アルファベットの 'a' ～ 'z'、数字の 0 ～ 9、およびハイフンでのみ構成されている必要があります。名前の先頭や末尾にハイフンを使用することはできません。|
|40646|16|サブスクリプションの ID を空にすることはできません。|
|40647|16|サブスクリプション subscription-id にサーバー servername がありません。|
|40648|17|多くの要求が行われています。後で再試行してください。|
|40649|16|無効なコンテンツ タイプが指定されました。サポートされているのは application/xml のみです。|
|40650|16|サブスクリプション <subscription-id> が存在しないか、操作の準備が整っていません。|
|40651|16|サブスクリプション <subscription-id> が無効であるため、サーバーを作成できませんでした。|
|40652|16|サーバーを移動または作成できません。サブスクリプション <subscription-id> がサーバーのクォータを超えています。|
|40671|17|ゲートウェイと管理サービスの間で通信エラーが発生しました。後で再試行してください。|
|40852|16|ログインで要求されたデータベース '%.*ls' on server '%.*ls' を開くことができません。データベースへのアクセスは、セキュリティが有効な接続文字列を使用した場合のみ許可されます。このデータベースにアクセスするには、サーバーの FQDN に ’secure’ を含むように接続文字列を変更します。 - 'server name'.database.windows.net は 'server name'.database.`secure`.windows.net. に変更する必要があります。| |45168|16|SQL Azure システムに負荷がかかっているため、サーバー 1 台あたりの同時実行 DB CRUD 操作 (データベースの作成など) に上限を設定しています。エラー メッセージに示されているサーバーは、最大同時接続数を超過しました。後でもう一度やり直してください。| |45169|16|SQL Azure システムに負荷がかかっているため、サブスクリプション 1 つあたりの同時実行サーバー CRUD 操作 (サーバーの作成など) に上限を設定しています。エラー メッセージに示されているサブスクリプションは、最大同時接続数を超過したため、要求が拒否されました。後でもう一度やり直してください。|


## 関連リンク

- [Azure SQL Database の一般的な制限事項とガイドライン](sql-database-general-limitations.md)
- [Azure SQL Database のリソース制限](sql-database-resource-limits.md)

<!---HONumber=AcomDC_0128_2016-->