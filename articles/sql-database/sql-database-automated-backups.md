<properties
   pageTitle="SQL Database のバックアップ | Microsoft Azure"
   description="SQL Database 組み込みデータベース バックアップについて説明します。この機能を使用すると、Azure SQL Database を以前の時点にロールバックしたり、データベースを地理的リージョン内の新しいデータベースにコピーしたりすることができます (最大 35 日)。"
   services="sql-database"
   documentationCenter=""
   authors="CarlRabeler"
   manager="jhubbard"
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="09/26/2016"
   ms.author="carlrab"/>

# SQL Database のバックアップ

SQL Database では、サービスの一環としてデータベースのバックアップが自動的に作成されます。申し込みや追加の費用は必要ありません。データベースのバックアップを使用すると、過去のある時点にデータベースを復元できます。この記事では、SQL Database のデータベースのバックアップ機能について詳しく説明します。

## データベースのバックアップとは  

データベースのバックアップは、特定の時点のデータベースの状態に関する情報を格納したファイルです。SQL Database で作成されるバックアップには、[完全バックアップ](https://msdn.microsoft.com/library/ms186289.aspx)、[差分バックアップ](https://msdn.microsoft.com/library/ms175526.aspx)、および[トランザクション ログ バックアップ](https://msdn.microsoft.com/library/ms191429.aspx)があります。データベースを特定の時点に復元するとき、どのバックアップを復元する必要があるかをサービスが判定します。

データの不慮の破損または削除から保護するデータベース バックアップは、ビジネス継続性および障害復旧戦略の最も重要な部分です。詳細については、[ビジネス継続性の概要](sql-database-business-continuity.md)に関するページを参照してください。

## geo 冗長ストレージ

SQL Database サービスでは、データベースのバックアップ ファイルは、読み取りアクセス geo 冗長ストレージ アカウント (RA-GRS) に格納されます。Azure Storage RA-GRS 機能は、バックアップ ファイルを[ペアのデータ センター](../best-practices-availability-paired-regions.md)にレプリケートします。この geo レプリケーションにより、プライマリ データベース リージョンからデータベースのバックアップにアクセスできない場合でもデータベースを復元できます。次の例では、SQL Database によって米国東部リージョンでデータベースのバックアップが作成され、それが RA-GRS アカウントに格納されます。次に、Azure Storage により、バックアップが米国西部リージョンのペアになるデータ センターに geo レプリケートされます。

![geo リストア](./media/sql-database-geo-restore/geo-restore-1.png)

>[AZURE.NOTE] Azure Storage の "*レプリケーション*" という用語は、ある場所から別の場所にファイルをコピーすることを表します。SQL の "*データベース レプリケーション*" は、複数のセカンダリ データベースとプライマリ データベースとの同期を保つことを意味します。

関連情報:
- geo 冗長ストレージの詳細については、「[Azure Storage のレプリケーション](../storage/storage-redundancy.md)」を参照してください。
- RA-GRS ストレージの詳細については、「[読み取りアクセス geo 冗長ストレージ](../storage/storage-redundancy.md#read-access-geo-redundant-storage)」を参照してください。

## データベース バックアップのコスト

Microsoft Azure SQL Database は、バックアップ ストレージとして、プロビジョニングされている最大のデータベース ストレージの 200% までを追加のコストなしで提供します。たとえば、プロビジョニングされたデータベース サイズが 250 GB の Standard データベース インスタンスの場合、500 GB のバックアップ ストレージを追加のコストなしで利用できます。データベースのサイズがプロビジョニングされたバックアップ ストレージを超える場合は、Azure サポートに連絡してリテンション期間を短縮できます。もう 1 つのオプションとして、標準の読み取りアクセス geo 冗長ストレージ (RA-GRS) の料金で課金される追加のバックアップ ストレージに対して料金を支払うこともできます。

## データベースのバックアップ スケジュール

Basic、Standard、Premium のすべてのデータベースは、自動バックアップで保護されています。完全データベース バックアップが毎週作成され、差分データベース バックアップは 1 時間に 1 回作成されます。また、トランザクション ログのバックアップは 5 分間隔で実行されます。初回の完全バックアップは、データベースの作成直後にスケジュールされます。通常この操作は 30 分以内に終了しますが、データベースのサイズが大きい場合はそれ以上かかることがあります。たとえば、復元されたデータベースまたはデータベースのコピーでは、初期バックアップに時間がかかります。初回の完全バックアップ以降のバックアップは、すべて自動的にスケジュールされ、バックグラウンドで自動的に管理されます。データベースの完全バックアップと[差分バックアップ](https://msdn.microsoft.com/library/ms175526.aspx)の正確なタイミングは、全体的なシステムのワークロードのバランスを図りながら決定されます。

## データベース バックアップのリテンション期間

各 SQL Database バックアップのリテンション期間は、Basic で 7 日間、Standard で 35 日間、Premium で 35 日間となっています。各サービス レベルで利用可能な機能の詳細については、[サービス レベル](sql-database-service-tiers.md)に関する記事を参照してください。

### サービス レベルをダウングレード/アップグレードする場合、復元ポイントの保有期間はどうなるのでしょうか。

低いパフォーマンス レベルにダウングレードする場合、復元ポイントの保有期間は、現在のデータベースのパフォーマンス レベルにおける保有期間までにただちに短縮されます。サービス レベルをアップグレードする場合、保有期間はデータベースがアップグレードした後からのみ延長されます。たとえば、データベースを Basic にダウングレードした場合、リテンション期間は 35 日間から 7 日間に変更されます。7 日より前のすべての復元ポイントは即座に使用できなくなります。データベースを Standard または Premium にアップグレードすると、リテンション期間は当初の 7 日間から最大 35 日間に延長されます。

### ドロップしたデータベースの保有期間を教えてください。 

保有期間は、データベースが存在していた期間のサービス レベルや、存在していた日数のいずれか短い方によって決まります。

> [AZURE.IMPORTANT] Azure SQL Database サーバー インスタンスを削除すると、そのインスタンスに属するデータベースもすべて削除されます。これを回復することはできません。削除されたサーバーを復元することはできません。


## データベースのバックアップの一般的な用途

データベースのバックアップの主な用途は、データベースをリテンション期間内の特定の時点に復元することです。データベースのバックアップを使用すると、データベースを特定の時点に復元したり、削除されたデータベースを削除時の状態に復元したりできます。また、データベースを他の地理的リージョンに復元することもできます。

- データベースの復元の詳細については、[自動バックアップを使用したデータベースの復元](sql-database-recovery-using-backups.md)に関する記事を参照してください。

データベースのバックアップを使用すると、任意の地理的リージョン内の論理 SQL サーバーにデータベースをコピーできます。このコピーは、現在の SQL Database とトランザクション上の一貫性を保ちます。

- データベースのコピー操作については、[データベースのコピー](sql-database-copy.md)に関する記事を参照してください。

自動化されたバックアップをリテンション期間を超えてアーカイブすることもできます。そのためには、データベースのコピーを作成し、これを [BACPAC ファイルにエクスポート](sql-database-export.md)します。BACPAC ファイルを作成したら、長期的なストレージにアーカイブし、リテンション期間を超えて保管できます。または、BACPAC を使用して、オンプレミスまたは Azure の仮想マシン (VM) の SQL サーバーにデータベースのコピーを転送できます。

- データベースのバックアップのアーカイブ操作については、[データベースのコピー](sql-database-copy.md)に関する記事を参照してください。


## 関連トピック

### シナリオ

- ビジネス継続性の概要については、[ビジネス継続性の概要](sql-database-business-continuity.md)に関するページをご覧ください

### Features (機能)

関連情報:

- データベースのバックアップについては、[サービスによって開始されたバックアップからデータベースを復元する方法](sql-database-recovery-using-backups.md)に関する記事を参照してください。
- データベースのバックアップのアーカイブ操作については、[データベースのコピー](sql-database-copy.md)に関する記事を参照してください。
- より迅速な復旧オプションについては、[アクティブ geo レプリケーション](sql-database-geo-replication-overview.md)に関する記事を参照してください。

<!-- ### Tasks -->

<!-- ### Tutorials -->

<!---HONumber=AcomDC_0928_2016-->