<properties
    pageTitle="Azure デプロイ用にリモート アクセスを Eclipse で有効にする方法"
    description="Azure Toolkit for Eclipse を使用して Azure デプロイのリモート アクセスを有効にする方法について説明します。"
    services=""
    documentationCenter="java"
    authors="rmcmurray"
    manager="wpickett"
    editor=""/>

<tags
    ms.service="multiple"
    ms.workload="na"
    ms.tgt_pltfrm="multiple"
    ms.devlang="Java"
    ms.topic="article"
    ms.date="05/04/2016" 
    ms.author="robmcm"/>

<!-- Legacy MSDN URL = https://msdn.microsoft.com/library/azure/hh690951.aspx -->

# Azure デプロイ用にリモート アクセスを Eclipse で有効にする方法 #

デプロイの問題を解消するとき、リモート アクセスを有効にして利用し、デプロイをホストする仮想マシンに接続できます。リモート アクセス機能は、リモート デスクトップ プロトコル (RDP) に依存しています。Azure に公開した後にデプロイメントのリモート アクセスを構成できます。あるいは、Windows オペレーティング システムで Eclipse を使用している場合、Azure に公開する前にリモート アクセスを構成できます。Azure でデプロイの仮想マシンに接続するには、ご利用のオペレーティング システムとの間に互換性があるリモート デスクトップ クライアントが必要になることにご注意ください。

## Azure にデプロイする前にリモート アクセスを有効にする方法 ##

>[AZURE.NOTE] Azure にアプリケーションをデプロイする前にリモート アクセスを有効にするには、Windows で Eclipse を実行する必要があります。

次の図は、リモート アクセスを有効にするために使用する **[リモート アクセス]** プロパティ ダイアログを示しています。

![][ic719494]

**[リモート アクセス]** プロパティ ダイアログは 2 つの方法で表示できます。

* **[Azure に発行]** の **[リモート アクセス]** セクションにある **[詳細]** リンクをクリックします。
* Azure プロジェクトの **[プロパティ]** ダイアログを開きます。

新しい Azure デプロイメント プロジェクトを作成すると、プロジェクトのリモート アクセスは既定では有効になりません。ただし、**[Azure に発行]** ダイアログにユーザー名とパスワードを指定することでリモート アクセスを簡単に有効にできます。リモート アクセスのパスワードは X.509 証明書で暗号化されます。自分の証明書を利用しない場合、Azure Plugin for Eclipse に付属する自己署名証明書が暗号化で利用されます。この自己署名証明書は Azure プロジェクトの **cert** フォルダーにあり、パブリック証明書ファイル (SampleRemoteAccessPublic.cer) と PFX (Personal Information Exchange) 証明書ファイル (SampleRemoteAccessPrivate.pfx) の両方として保存されています。後者には証明書の秘密鍵と既定のパスワードである **Password1** が含まれています。ただし、このパスワードは公開されているため、既定の証明書は学習目的にのみ利用し、本稼働デプロイには利用できません。そのため、学習目的以外では、デプロイのリモート セッションを有効にするとき、**[Azure に発行]** ダイアログの **[詳細]** リンクをクリックし、自分の証明書を指定する必要があります。Azure でユーザー パスワードを復号化できるように、Microsoft Azure 管理ポータル内でホストされているサービスに PFX 版の証明書をアップロードする必要があります。

このチュートリアルの残りの部分では、最初にリモート アクセスを無効にして作成した Azure デプロイメント プロジェクトのリモート アクセスを有効にする方法について紹介します。このチュートリアルでは、新しい自己署名証明書を作成します。選択したパスワードがその .pfx ファイルに入ります。証明書機関が発行した証明書を利用することもできます。

## Azure にデプロイした後、リモート アクセスを有効にする方法 ##

Azure にデプロイした後にリモート アクセスを有効にするには、次の手順を使用します。

1. Azure アカウントを使用して Microsoft Azure 管理ポータルにログインします。
1. **[Cloud Services]** の一覧で、デプロイしたクラウド サービスを選択します。
1. クラウド サービス Web ページで、**[構成]** リンクをクリックします。
1. 構成ページの下部で、**[リモート]** リンクをクリックします。
1. ポップアップ ダイアログ ボックスが表示されたら、次の操作を行います。
    1. リモート アクセスを有効にするロールを指定します。
    1. クリックして **[リモート デスクトップを有効にする]** チェックボックスを選択します。
    1. リモート アクセスに使用するユーザー名とパスワードを指定します。
    1. 使用する証明書を選択します。
1. **[OK]** をクリックします。 

構成変更が進行中であり、完了に数分かかることを示すメッセージが表示されます。構成変更が完了したら、この記事の後半にある「**リモートでログインするには**」セクションの手順に従います。
	
## パッケージのリモート アクセスを有効にする方法 ##

* Eclipse の [プロジェクト エクスプローラー] ウィンドウで、Azure プロジェクトを右クリックし、**[プロパティ]** をクリックします。
* **[プロパティ]** ダイアログで、左側のウィンドウの **[Azure]** を展開し、**[リモート アクセス]** をクリックします。
* **[リモート アクセス]** ダイアログで、**[すべてのロールでこれらのログイン資格情報によるリモート デスクトップ接続を承認できるようにする]** が選択されていることを確認します。
* リモート デスクトップ接続のユーザー名を指定します。
* ユーザーのパスワードを指定し、確定しますこのダイアログに設定されているユーザー名とパスワードの値は、リモート デスクトップ接続時に使用されます。(これは PFX パスワードとは別のパスワードであることに注意してください。)
* ユーザー アカウントの有効期限を指定します。
* **[新規]** をクリックし、新しい自己署名証明書を作成します。(代替的に、**[ワークスペース]** ボタンまたは **[ファイル システム]** ボタンでワークスペースまたはシステムから証明書を選択できます。ただし、このチュートリアルでは、新しい証明書を作成します。)
* **[新しい証明書]** ダイアログ ボックスで、PFX ファイルに使用するパスワードを指定し、確認します。
* **[名前 (CN)]** に与えられた値をそのまま使用するか、自分で作成した名前を使用します。
* パスとファイル名を指定します。その場所に新しい証明書が .cer 形式で保存されます。この手順と次の手順で、Azure プロジェクトの **cert** フォルダーを使用できますが、別の場所を選択しても構いません。このチュートリアルでは、**c:\\mycert\\mycert.cer** を使用します。(続行する前に **c:\\mycert** フォルダーを作成するか、必要に応じて既存のフォルダーを使用します。)
* パスとファイル名を指定します。その場所に新しい証明書とその秘密鍵が .pfx 形式で保存されます。このチュートリアルでは、**c:\\mycert\\mycert.pfx** を使用します。**[新しい証明書]** ダイアログ ボックスは次のようになります (**c:\\mycert** を使用しない場合、フォルダー パスを更新します): ![][ic712275]
* **[OK]** をクリックし、**[新しい証明書]** ダイアログ ボックスを閉じます。
* **[リモート アクセス]** ダイアログ ボックスは次のようになります。</p> ![][ic719495]
* **[OK]** をクリックし、**[リモート アクセス]** ダイアログ ボックスを閉じます。
	
クラウドにデプロイメントするためのビルド セットでアプリケーションを再構築します。

## リモートでログインするには ##

ロール インスタンスの準備ができたら、アプリケーションをホストしている仮想マシンにリモートでログインできます。

* Windows で Eclipse を使用しているとき、Azure にデプロイメントする際、**[デプロイメントでリモート デスクトップを開始する]** オプションを選択した場合、デプロイメントを開始する [リモート デスクトップ接続] ログオン画面が表示されます。ユーザー名とパスワードの入力が求められたら、リモート ユーザーに指定した値を入力します。それでログインできます。
* リモートでログインするもう 1 つの方法は <a href="http://go.microsoft.com/fwlink/?LinkID=512959">Microsoft Azure 管理ポータル</a>を利用することです。
    * Microsoft Azure 管理ポータルの **[Cloud Services]** ビュー内で、クラウド サービスをクリックし、**[インスタンス]** をクリックし、特定のインスタンスをクリックし、**[接続]** ボタンをクリックします。 **[接続]** ボタンはコマンド バーに次のように表示されます。 ![][ic659273]
    >[AZURE.NOTE] Windows 以外のオペレーティング システムを使用している場合、そのオペレーティング システムと互換性のあるリモート デスクトップ クライアントを利用し、次の手順に従い、ダウンロードした RDP ファイルの設定でそのクライアントを構成する必要があります。
    * **[接続]** ボタンをクリックすると、RDP ファイルを開くように求められます。ファイルを開き、指示に従います。(または、このファイルをローカル コンピューターに保存し、それをダブルクリックすることでファイルを実行できます。先に管理ポータルに移動する必要がありません。)
    * ユーザー名とパスワードの入力が求められたら、リモート ユーザーに指定した値を入力します。それでログインできます。

## 関連項目 ##

[Azure Toolkit for Eclipse][]

[Azure の Hello World アプリケーションを Eclipse で作成する][]

[Azure Toolkit for Eclipse のインストール][]

Java での Azure の使用の詳細については、[Azure Java デベロッパー センター][]を参照してください。

<!-- URL List -->

[Azure Java デベロッパー センター]: http://go.microsoft.com/fwlink/?LinkID=699547
[Azure Management Portal]: http://go.microsoft.com/fwlink/?LinkID=512959
[Azure Toolkit for Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699529
[Azure の Hello World アプリケーションを Eclipse で作成する]: http://go.microsoft.com/fwlink/?LinkID=699533
[Azure Toolkit for Eclipse のインストール]: http://go.microsoft.com/fwlink/?LinkId=699546

<!-- IMG List -->

[ic712275]: ./media/azure-toolkit-for-eclipse-enabling-remote-access-for-azure-deployments/ic712275.png
[ic719495]: ./media/azure-toolkit-for-eclipse-enabling-remote-access-for-azure-deployments/ic719495.png
[ic719494]: ./media/azure-toolkit-for-eclipse-enabling-remote-access-for-azure-deployments/ic719494.png
[ic659273]: ./media/azure-toolkit-for-eclipse-enabling-remote-access-for-azure-deployments/ic659273.png

<!---HONumber=AcomDC_0504_2016-->