---
title: "Azure Logic Apps で X12 契約を作成する | Microsoft Docs"
description: "Enterprise Integration Pack の X12 契約の作成についての詳細情報 | Azure Logic Apps"
services: logic-apps
documentationcenter: .net,nodejs,java
author: padmavc
manager: anneta
editor: cgronlun
ms.assetid: 7422d2d5-b1c7-4a11-8c9b-0d8cfa463164
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/31/2017
ms.author: padmavc
translationtype: Human Translation
ms.sourcegitcommit: 1a982309fe771c0c244c691ae648bd5f4844a825
ms.openlocfilehash: f7b61b85cadfabde6637e46f0e65108a29901198


---
# <a name="enterprise-integration-with-x12"></a>X12 での Enterprise Integration

## <a name="prereqs"></a>前提条件
X12 メッセージの交換を始める前に、X12 契約を作成し、統合アカウントに格納する必要があります。 次の手順では、X12 契約を作成するプロセスについて説明します。

* Azure サブスクリプションで定義されている[統合アカウント](../logic-apps/logic-apps-enterprise-integration-accounts.md)  
* 少なくとも&2; つの[パートナー](../logic-apps/logic-apps-enterprise-integration-partners.md)が、ビジネス ID の下に EDI X12 修飾子を使用して構成されている必要があります。   
* [スキーマ](../logic-apps/logic-apps-enterprise-integration-schemas.md)を[統合アカウント](../logic-apps/logic-apps-enterprise-integration-accounts.md)にアップロードする必要があります。

## <a name="create-an-x12-agreement"></a>X12 契約の作成
[Azure ポータル](http://portal.azure.com "Azure ポータル")にログインしたら、次の手順に従います。  

1. [Azure Portal](http://portal.azure.com "Azure Portal") にサインインします。
2. **[その他のサービス]** を選択し、フィルター検索ボックスに「**統合**」と入力します。 結果の一覧から **[統合アカウント]** を選択します。    
![](./media/logic-apps-enterprise-integration-agreements/overview-1.png)    
3. 証明書の追加先となる統合アカウントを選択します。    
![](./media/logic-apps-enterprise-integration-overview/overview-3.png)   
4. **[契約]** タイルを選択します。 [契約] タイルが表示されない場合は追加します。     
![](./media/logic-apps-enterprise-integration-agreements/agreement-1.png)   
5. 開かれた [契約] ブレードの **[追加]** ボタンを選択します。   
![](./media/logic-apps-enterprise-integration-agreements/agreement-2.png)     
6. 開いた [契約] ブレードで、契約の**名前**を入力し、**契約の種類**、**ホスト パートナー**、**ホスト ID**、**ゲスト パートナー**、**ゲスト ID** を選択します。    
![](./media/logic-apps-enterprise-integration-x12/x12-1.png)  

| プロパティ | Description |
| --- | --- |
| 名前 |契約の名前。 |
| 契約の種類 | X12 にする必要があります。 |
| Host Partner (ホスト パートナー) |契約には、ホストとゲストの両方のパートナーが必要です。 ホスト パートナーは、契約を構成している組織を表します。 |
| Host Identity (ホスト ID) |ホスト パートナーの ID。 |
| Guest Partner (ゲスト パートナー) |契約には、ホストとゲストの両方のパートナーが必要です。 ゲスト パートナーは、ホスト パートナーと取引している組織を表します。 |
| ゲスト ID |ゲスト パートナーの ID。 |
| Receive Settings (受信の設定) |これらのプロパティは、契約によって受信されたすべてのメッセージに適用されます。 |
| Send Settings (送信の設定) |これらのプロパティは、契約によって送信されたすべてのメッセージに適用されます。 |  

> [!NOTE]
> X12 契約では、パートナーと受信メッセージに定義された、送信者の修飾子/識別子と受信者の修飾子/識別子が一致している必要があります。  パートナー側でこれらの値を変更した場合は、契約も同様に編集します。
> 
> 

## <a name="receive-settings"></a>Receive Settings (受信の設定)

1. **[Receive Settings (受信の設定)]** を選択し、この契約を使用して受信されたメッセージを処理する方法を構成します。  
2. [受信設定] コントロールは、[識別子]、[受信確認]、[スキーマ]、[エンベロープ]、[制御番号]、[検証]、[内部設定] の各セクションに分かれています。 メッセージを交換するパートナーとの契約に基づいて、これらのプロパティを構成します。 これらのコントロールのビューは次のようになります。この契約で受信メッセージをどのように特定して処理するかに基づいてコントロールを構成してください。  

### <a name="identifiers"></a>識別子

![](./media/logic-apps-enterprise-integration-x12/x12-2.png)  

| プロパティ | 説明 |
| --- | --- |
| ISA1 (Authorization Qualifier) (ISA1 (認証修飾子)) |ドロップダウン リストから認証修飾子値を選択します。 |
| ISA2 |省略可能。 認証情報値を入力します。 ISA1 に入力された値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。 |
| ISA3 (Security Qualifier) (ISA3 (セキュリティ修飾子)) |ドロップダウン リストからセキュリティ修飾子値を選択します。 |
| ISA4 |省略可能。 セキュリティ情報値を入力します。 ISA3 に入力された値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。 |

### <a name="acknowledgments"></a>謝辞

![](./media/logic-apps-enterprise-integration-x12/x12-3.png) 

| プロパティ | 説明 |
| --- | --- |
| TA1 が必要 |インターチェンジの送信者に技術確認を返します。 |
| FA Expected (FA が必要) |インターチェンジの送信者に機能確認を返します。 次に、スキーマのバージョンに基づいて、997 か 999 の受信確認のいずれかを選択します。 |
| Include AK2/IK2 Loop (AK2/IK2 ループを含める) |受理されたトランザクション セットの機能確認で AK2 ループの生成を有効にします。 |


### <a name="schemas"></a>スキーマ
各トランザクション タイプ (ST1) および送信側アプリケーション (GS2) のスキーマを選択します。 受信パイプラインは、受信メッセージの ST1 と GS2 の値とここで設定した値、および受信メッセージのスキーマとここで設定したスキーマと照合することで受信メッセージを逆アセンブルします。

![](./media/logic-apps-enterprise-integration-x12/x12-33.png) 

| プロパティ | 説明 |
| --- | --- |
| バージョン |X12 のバージョンを選択します |
| トランザクションの種類 (ST01) |トランザクションの種類を選択します |
| Sender Application (GS02) (送信側アプリケーション (GS02)) |送信側のアプリケーションを選択します |
| スキーマ |使用するスキーマ ファイルを選択します。 スキーマは統合アカウントに追加されます。 |

> [!NOTE]
> [統合アカウント](../logic-apps/logic-apps-enterprise-integration-accounts.md)にアップロードする[スキーマ](../logic-apps/logic-apps-enterprise-integration-schemas.md)を構成してください。
> 
> 

### <a name="envelopes"></a>エンベロープ

![](./media/logic-apps-enterprise-integration-x12/x12-34.png) 

| プロパティ | 説明 |
| --- | --- |
| ISA11 の使用法 |このフィールドを使用して、トランザクション セットでの区切り記号を指定します。</br></br>EDI 受信パイプラインの受信ドキュメントの&10; 進数表記の代わりに "."  の&10; 進数表記を使用する場合は、[標準識別子] を選択します。</br></br>繰り返し出現する単純なデータ要素または繰り返されるデータ構造体の区切り記号を指定するには、[繰り返し区切り記号] を選択します。 たとえば、繰り返しの区切り記号としては通常、(^) が使用されます。 HIPAA スキーマに対しては、(^) のみ使用できます。 |

### <a name="control-numbers"></a>制御番号

![](./media/logic-apps-enterprise-integration-x12/x12-35.png) 

| プロパティ | 説明 |
| --- | --- |
| Disallow Interchange control number duplicates (インターチェンジ制御番号の重複を許可しない) |重複したインターチェンジを防止します。 受信したインターチェンジ制御番号がインターチェンジ制御番号 (ISA13) と一致していないかチェックします。 一致が検出された場合、受信パイプラインはインターチェンジを処理しません。 *[ISA13 の重複の確認間隔 (日単位)]* に適切な値を指定して、チェックを実行する間隔の日数を指定できます。 |
| Disallow Group control number duplicates (グループ制御番号の重複を許可しない) |グループ制御番号が重複したインターチェンジを防止します。 |
| Disallow Transaction set control number duplicates (トランザクション セット制御番号の重複を許可しない) |トランザクション セット制御番号が重複したインターチェンジを防止します。 |

### <a name="validations"></a>Validations (検証)

![](./media/logic-apps-enterprise-integration-x12/x12-36.png) 

| プロパティ | 説明 |
| --- | --- |
| メッセージの種類 |EDI メッセージの種類 ([850-Purchase Order (850 - 発注書)] や [999-Implementation Acknowledgement (999 - 実装確認)] など)。 |
| EDI Validation (EDI の検証) |スキーマ、長さ制限、空のデータ要素、および末尾の区切り記号の EDI プロパティで定義されたデータ型で EDI 検証を実行します。 |
| 拡張された検証 |データ型が EDI でない場合は、検証はデータ要素の要件と許可された繰り返し、列挙、およびデータ要素の長さの検証 (最小/最大) で実行されます。 |
| Allow Leading/Trailing Zeroes (先頭および末尾のゼロを許可) |先頭または末尾のスペースおよびゼロの文字が保持されます。 これらは削除されません。 |
| 末尾の区切り記号のポリシー |受信したインターチェンジに末尾の区切り記号を生成します。 [許可しない]、[省略可能]、および [必須] のオプションがあります。 |

### <a name="internal-settings"></a>Internal Settings (内部設定)

![](./media/logic-apps-enterprise-integration-x12/x12-37.png) 

| プロパティ | 説明 |
| --- | --- |
| 暗黙的に指定された 10 進形式 Nn を 底 10 の数値に変換する |形式 Nn で指定されている EDI 番号を底&10; の数値に変換します。 |
| 末尾の区切り記号が許可されている場合は空の XML タグを作成する |インターチェンジの送信者が末尾の区切り記号に空の XML タグを含めるには、このチェック ボックスをオンにします。 |
| インターチェンジをトランザクション セットとして分割 - エラー発生時にトランザクション セットを中断|トランザクション セットに適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。 検証に失敗したトランザクションのみを中断します。 |
| インターチェンジをトランザクション セットとして分割 - エラー発生時にインターチェンジを中断|適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。 インターチェンジの&1; つ以上のトランザクション セットが検証に失敗した場合、インターチェンジ全体を中断します。 | 
| インターチェンジの保存 - エラー発生時にトランザクション セットを中断 |インターチェンジはそのままにして、バッチ インターチェンジ全体に対する XML ドキュメントを作成します。 検証に失敗したトランザクション セットだけを中断し、他のすべてのトランザクション セットの処理を継続します。 |
| インターチェンジの保存 - エラー発生時にインターチェンジを中断 |インターチェンジはそのままにして、バッチ インターチェンジ全体に対する XML ドキュメントを作成します。  インターチェンジの&1; つ以上のトランザクション セットが検証に失敗した場合、インターチェンジ全体を中断します。 |

受信設定のプロパティを設定したら、**[OK]** ボタンを選択します。  
   
これで選択したスキーマに準拠する受信メッセージを処理する準備ができました。

## <a name="send-settings"></a>Send Settings (送信の設定)

1. **[送信設定]** を選択し、この契約を使用して送信されたメッセージを処理する方法を構成します。  

2. [Send Settings (送信の設定)] コントロールは、[Identifiers (識別子)]、[Acknowledgement (確認)]、[Schemas (スキーマ)]、[Envelopes (エンベロープ)]、[Control Numbers (コントロール番号)]、[Character Sets and Separators (文字セットと区切り文字)]、[Validation (検証)] のセクションに分かれています。  メッセージを交換するパートナーとの契約に基づいて、これらのプロパティを構成します。 これらのコントロールのビューは次のようになります。この契約で送信メッセージをどのように特定して処理するかに基づいてコントロールを構成してください。


### <a name="identifiers"></a>識別子

![](./media/logic-apps-enterprise-integration-x12/x12-4.png)  

| プロパティ | 説明 |
| --- | --- |
| 認証修飾子 (ISA1) |ドロップダウン リストから認証修飾子値を選択します。 |
| ISA2 |認証情報値を入力します。 この値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。 |
| セキュリティ修飾子 (ISA3) |ドロップダウン リストからセキュリティ修飾子値を選択します。 |
| ISA4 |セキュリティ情報値を入力します。 値 (ISA4) テキスト ボックスのこの値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。 |

### <a name="acknowledgment"></a>Acknowledgement (受信確認)

![](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| プロパティ | 説明 |
| --- | --- |
| TA1 が必要 |インターチェンジの送信者に技術確認 (TA1) を返す場合は、このチェックボックスをオンにします。 この設定は、メッセージを送信しているホスト パートナーが契約でゲスト パートナーからの受信確認を要求していることを指定します。 これらの受信確認は、契約の [受信の設定] に基づいてホスト パートナーから求められます。 |
| FA Expected (FA が必要) |インターチェンジの送信者に機能的 (FA) な受信確認を返す場合は、このチェックボックスをオンにし、使用しているスキーマのバージョンに基づいて、997 または 999 の受信確認のいずれかを選択します。 これらの受信確認は、契約の [受信の設定] に基づいてホスト パートナーから求められます。 |
| FA Version (FA のバージョン) |FA のバージョンを選択します |

### <a name="schemas"></a>スキーマ

![](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| プロパティ | 説明 |
| --- | --- |
| バージョン |X12 のバージョンを選択します |
| トランザクションの種類 (ST01) |トランザクションの種類を選択します |
| スキーマ |使用するスキーマを選択します。 スキーマは統合アカウント内にあります。 先にスキーマを選択すると、バージョンとトランザクションの種類が自動的に構成されます。  |

> [!NOTE]
> [統合アカウント](../logic-apps/logic-apps-enterprise-integration-accounts.md)にアップロードする[スキーマ](../logic-apps/logic-apps-enterprise-integration-schemas.md)を構成してください。
> 
> 

### <a name="envelopes"></a>エンベロープ

![](./media/logic-apps-enterprise-integration-x12/x12-6.png) 

| プロパティ | 説明 |
| --- | --- |
| ISA11 の使用法 |このフィールドを使用して、トランザクションでの区切り記号を指定します。 |
| 標準識別子 |EDI 受信パイプラインの受信ドキュメントの&10; 進数表記の代わりに "."  |
| Repetition Separator |繰り返し出現する単純なデータ要素または繰り返されるデータ構造体の区切り記号を指定するには、[繰り返し区切り記号] を選択します。 たとえば、繰り返しの区切り記号としては通常、(^) が使用されます。 HIPAA スキーマに対しては、(^) のみ使用できます。 |

### <a name="control-numbers"></a>制御番号

![](./media/logic-apps-enterprise-integration-x12/x12-8.png) 

| プロパティ | 説明 |
| --- | --- |
| 制御バージョン番号 (ISA12) |X12 標準のバージョンを選択します。 |
| 使用状況インジケーター (ISA15) |インターチェンジのコンテキストを選択します。  情報、実稼働データ、またはテスト データから選択します。 |
| スキーマ |送信パイプラインに送信する X12 でエンコードされたインターチェンジの GS および ST セグメントを生成します。 |
| GS1 |省略可能。機能コードの値をドロップダウン リストから選択します。 |
| GS2 |省略可能。アプリケーションの送信者です。 |
| GS3 |省略可能。アプリケーションの受信者です。 |
| GS4 |省略可能。CCYYMMDD または YYMMDD を選択します。 |
| GS5 |省略可能。HHMM、HHMMSS、または HHMMSSdd を選択します。 |
| GS7 |省略可能。担当機関の値をドロップダウン リストから選択します。 |
| GS8 |省略可能。ドキュメントのバージョンです。 |
| インターチェンジ制御番号 (ISA13) |必須。インターチェンジ制御番号の値の範囲を入力します。 1 ～ 999999999 の数値を入力します。 |
| グループ制御番号 (GS06) |必須。グループ制御番号の値の範囲を入力します。 1 ～ 999999999 の数値を入力します。 |
| トランザクション セット制御番号 (ST02) |必須。トランザクション セット制御番号の値の範囲を入力します。 1 ～ 999999999 の数値の範囲を入力します。 |
| Prefix (プレフィックス) |省略可能。受信確認で使用するトランザクション セット制御番号の範囲を指定します。 中間の&2; つのフィールドに数値を、プレフィックスとサフィックスのフィールドに英数字値 (必要な場合) を入力します。 中間のフィールドは必須であり、制御番号の最小値と最大値が含まれます。 |
| サフィックス |省略可能。受信確認で使用するトランザクション セット制御番号の範囲を指定します。 中間の&2; つのフィールドに数値を、プレフィックスとサフィックスのフィールドに英数字値 (必要な場合) を入力します。 中間のフィールドは必須であり、制御番号の最小値と最大値が含まれます。 |

### <a name="character-sets-and-separators"></a>Character Sets and Separators (文字セットと区切り文字)

各メッセージ タイプで使用する文字セットや、異なるセットの区切り文字を入力できます。 特定のメッセージ スキーマで文字セットが指定されていない場合は、既定の文字セットが使用されます。

![](./media/logic-apps-enterprise-integration-x12/x12-9.png) 


| プロパティ | 説明 |
| --- | --- |
| 使用する文字セット |プロパティを検証するための X12 文字セットを選択します。  基本、拡張、UTF8 から選択します。 |
| スキーマ |ドロップダウン リストから [スキーマ] を選択します。 選択したスキーマに対して、使用する区切り記号のセットを選択します。 |
| 入力タイプ |ドロップダウン リストから入力タイプを選択します。 |
| コンポーネント要素区切り記号 |複合データ要素を区切る単一の文字を入力します。 |
| Data Element Separator |複合データ要素内の単純データ要素を区切る単一の文字を入力します。 |
| Replacement Character |置換文字を入力します。 X12 送信メッセージが生成されるときに、ペイロード データ内の区切り文字のすべてのインスタンスが、指定した文字に置換されます。 |
| Segment Terminator |EDI セグメントの終端を示す単一の文字を入力します。 |
| サフィックス |セグメント識別子と共に使用される文字を選択します。 サフィックスを指定する場合は、セグメント終端記号のデータ要素が空でもかまいません。 セグメント終端記号を空にする場合は、サフィックスを指定する必要があります。 |

### <a name="validation"></a>検証

![](./media/logic-apps-enterprise-integration-x12/x12-10.png) 

| プロパティ | 説明 |
| --- | --- |
| メッセージの種類 |メッセージの種類を一覧から選択します。 |
| EDI Validation (EDI の検証) |このオプションを選択すると、インターチェンジ受信者の検証を有効にします。 この検証では、データ型、長さの制限、および空のデータ要素と末尾の区切り記号を検証することで、トランザクション セットのデータ要素に対して EDI の検証を実行します。 |
| 拡張された検証 |このオプションを選択すると、インターチェンジ送信者から受信したインターチェンジの拡張された検証を有効にします。 これには、XSD データ型の検証に加えて、フィールド長、省略可能性、および繰り返し回数の検証が含まれます。 EDI の検証を有効にしなくても拡張された検証を有効にすることができます。また、その逆も可能です。 |
| Allow leading/ trailing zeroes (先頭および末尾のゼロを許可) |このオプションを選択すると、当事者から受け取った EDI インターチェンジのデータ要素が末尾のスペースのために長さ要件に準拠しないが、そのスペースが削除されたときに長さ要件に準拠している場合に、EDI インターチェンジの検証が失敗とみなされません。 |
| 末尾の区切り記号 |このオプションを選択すると、当事者から受け取った EDI インターチェンジのデータ要素が先頭 (または末尾) のゼロまたは末尾のスペースのために長さ要件に準拠しなくても、それらが削除されたときに長さ要件に準拠している場合に、EDI インターチェンジの検証が失敗と見なされません。</br></br>インターチェンジ送信者から受信したインターチェンジに末尾の区切り記号や区切り文字を許可しない場合は、[許可しない] を選択します。 インターチェンジに末尾の区切り記号や区切り文字が含まれている場合、無効と宣言されます。</br></br>末尾の区切り記号や区切り文字の有無に関係なくインターチェンジを受け入れる場合は、[オプション] を選択します。</br></br>受信したインターチェンジに末尾の区切り記号や区切り文字が含まれている必要がある場合は、[必須] を選択します。 |

送信設定のプロパティを設定したら、**[OK]** ボタンを選択します。  これで選択したスキーマに準拠する送信メッセージを処理する準備ができました。

[OK] を選択して契約を作成します。

[統合アカウント] ブレード上の **[契約]** タイルを選択すると、新しく追加された契約が表示されます。  
![](./media/logic-apps-enterprise-integration-x12/x12-7.png)   

## <a name="learn-more"></a>詳細情報
* [Enterprise Integration Pack についての詳細情報](../logic-apps/logic-apps-enterprise-integration-overview.md "Enterprise Integration Pack についての詳細情報")  




<!--HONumber=Feb17_HO1-->


