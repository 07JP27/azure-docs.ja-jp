<properties 
	pageTitle="Microsoft Azure App Service のエンタープライズ コネクタ | Azure" 
	description="エンタープライズ コネクタ (マイクロサービス アーキテクチャ) を作成して構成する方法について説明します。" 
	services="app-service\logic" 
	documentationCenter="" 
	authors="MandiOhlinger" 
	manager="dwrede" 
	editor="cgronlun"/>

<tags 
	ms.service="app-service-logic" 
	ms.workload="integration" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="07/08/2015" 
	ms.author="mandia"/>

# Microsoft Azure App Service のエンタープライズ コネクタ

> [AZURE.NOTE]このトピックは廃止されています。使用できるすべての組み込みコネクタと API Apps を確認するには、「[コネクタと API Apps の一覧](app-service-logic-connectors-list.md)」を参照してください。

Microsoft Azure App Service (略して App Service) には、SAP や Marketo などのエンタープライズ システムで使用できるいくつかのコネクタが含まれています。これらのコネクタを使用すると、エンタープライズ システムに簡単に接続してさまざまなタスクを完了できます。

エンタープライズ コネクタには、"トリガー" や "アクション" などの機能が用意されています。トリガーは、MongoDb のエントリを更新するなどの特定のイベントに基づいて新しいインスタンスを開始します。アクションは、トリガーの結果であり、MongoDB のエントリを更新した後で、MongoDB からエントリを取得するなどの動作です。


## エンタープライズ コネクタとは
エンタープライズ コネクタは、既存の "API Apps" であり、次のようなオンプレミスまたはクラウドベースのエンタープライズ システムに接続できます。

コネクタ | 説明
--- | ---
Marketo | **アクション** コネクタ。Marketo に接続し、潜在顧客の作成/更新、潜在顧客の変更の取得、キャンペーンのスケジュール作成、キャンペーンの要求、潜在顧客の取得、キャンペーン情報/リスト情報の取得、リストへの潜在顧客の追加、リストからの潜在顧客の削除など、さまざまなアクションを実行します。
MongoDB | **トリガー**と**アクション** コネクタ。Mongo サーバーのデータベースまたオンプレミスの Mongo サーバーに接続します。MongoDB のコレクションで、エントリの作成、更新、取得、削除など、さまざまなアクションを実行します。 
QuickBooks | **アクション** コネクタ。QuickBooks に接続し、ユーザーのアプリケーションを使用して、Intuit QuickBooks の顧客、品目、請求書など、さまざまなエンティティの作成、更新、読み取り、削除、クエリを行います。
Salesforce |**アクション** コネクタ。SalesForce に接続し、ユーザーの Salesforce アカウントで、アカウント、潜在顧客、販売機会、事例など、さまざまなエンティティを管理します。各エンティティに対して、作成、更新、upsert、クエリ、削除など、さまざまなアクションを実行できます。 
SugarCRM | **アクション** コネクタ。SugarCRM にオンラインで接続し、ユーザーのアプリケーションを使用して、アカウント、担当者、商品など、さまざまなタイプのモジュールの作成、更新、読み取り、削除を行います。
SAP | **アクション** コネクタ。オンプレミスの SAP サーバーに接続します。RFC、BAPI、tRFC を起動します。IDOCs の送信もします。


これらのコネクタを使用すると、エンタープライズ システム上でさまざまなタスクを完了できます。たとえば、QuickBooks コネクタを使用すると、新規顧客の追加、請求書の更新、項目の削除など、QuickBooks に含まれる一般的なタスクを実行できます。

必要な数のコネクタを簡単に作成できます。複数のシナリオやワークフローの中で 1 つのコネクタを再利用することもできます。

たとえば、ある会場であなたの会社の商品を 10 品目購入したいという顧客に会ったとします。あなたは、モバイル デバイスでモバイル アプリを開き、作成済みの QuickBooks コネクタを使用して顧客情報を追加し、請求書を作成できます。

一方、この会議の最中に、別の顧客が、請求書の金額を支払うためにあなたの会社に来た場合、あなたの同僚は、同じ QuickBooks コネクタを使用する別のアプリケーションを開いて顧客情報を検索し、最新の支払い残高が反映されるように請求書を更新します。

フローは異なりますが、これらの作業は、同じ QuickBooks コネクタを使用しています。これらのコネクタを作成して使用する場合、コードを記述する必要は一切ありません。それでは始めましょう。


## 前提要件
エンタープライズ コネクタを作成する場合に必要なリソースがいくつかあります。これらのリソースは、コネクタ内で使用する前に、ユーザーが作成しておく必要があります。要件は次のとおりです。

要件 | 説明
--- | ---
Service Bus 名前空間とそのキー値 | オンプレミスの SAP または MongoDB を使用する場合、Service Bus 名前空間と、そのキー値が必要です。オンプレミスのシステムに接続していない場合、Service Bus 名前空間は必要ありません。<br/><br/>[Service Bus 名前空間の作成](http://msdn.microsoft.com/library/azure/hh690931.aspx)
オンプレミスの Hybrid Connection Manager | オンプレミスのシステムに接続する場合には、そのシステムに Hybrid Connection Manager をインストールします。オンプレミスのコネクタを作成する場合、コネクタのプロパティや設定はダウンロードを利用できます。 
システムに固有のプロパティ | エンタープライズ システムを使用する場合には、システムに固有のプロパティ (ユーザー名、パスワードなど) が必要です。 


## コネクタの作成
コネクタは、Azure ポータルを使用して作成できます。

### Azure ポータルでのコネクタの作成
Azure ポータルでは、ロジック アプリ、Web アプリ、またはモバイル アプリを作成する際に、エンタープライズ コネクタを作成できます。または、独自のブレードを使用して作成することもできます。どちらの方法も簡単なため、ニーズや好みに応じて使い分けることができます。ユーザーによっては、最初に、ユーザー固有のプロパティを含むすべてのコネクタを作成しておく方法を好む場合もあります。この場合には、コネクタを作成した後で、Logic Apps、Web Apps、または Mobile Apps を作成し、作成済みのコネクタを追加します。

以下の手順は、コネクタ ブレードを使用してエンタープライズ コネクタを作成する方法です。

1. Azure ポータルのスタート画面 (ホーム ページ) で、**[Marketplace]** を選択します。**API Apps** に、既存のすべてのコネクタの一覧が表示されます。特定のコネクタを**検索**することもできます。
2. コネクタを選択します。新しいブレードで **[作成]** を選択します。 
3. 次のプロパティを入力します。 

プロパティ | 説明
--- | ---
名前 | コネクタに任意の名前を入力します。たとえば、*SAPConnector*、*SalesForceGetAccounts*、*QuickBooksGetItems* などの名前にできます。
パッケージの設定 | *SAP ユーザー名*や *SugarCRM サーバー URL* など、エンタープライズ システムの設定を入力します。このトピックの「[エンタープライズ システムに固有のプロパティ](#AddProperties)」を参照してください。 
App Service プラン | 支払プランの一覧を表示します。プランは必要なリソースの増減に応じて変更することができます。
価格レベル | Azure サブスクリプション内での価格のカテゴリの一覧を表示する読み取り専用プロパティです。 
リソース グループ | 新しいリソース グループを作成するか、既存のグループを使用します。ロジック アプリ、Web アプリ、モバイル アプリのすべての API Apps とコネクタが同じリソース グループに属している必要があります。<br/><br/>[リソース グループの使用](../resource-group-overview.md)に関するページに、このプロパティについての説明があります。 
[サブスクリプション] | 現在のサブスクリプションを一覧表示する読み取り専用のプロパティです。
場所 | Azure サービスをホストする地理的な場所です。 
スタート画面への追加 | スタート画面 (ホーム ページ) にコネクタを追加する場合は、このプロパティを選択します。


	**<a name="AddProperties"></a>エンタープライズ システムに固有のプロパティ**

> [AZURE.IMPORTANT]各コネクタには、接続するエンタープライズ システム固有のプロパティが必要です。たとえば、SAP に接続する場合には、SAP 固有のプロパティを入力し、Salesforce に接続する場合には、Salesforce 固有のプロパティを入力します。次の表は、各エンタープライズ システムに必要なプロパティを示しています。
	
Enterprise System | Required Properties
--- | ---
Marketo | <ul><li>エンドポイント</li><li>プロバイダー名</li></ul>
MongoDB| <ul><li>接続文字列</li><li>ホスト</li><li>ポート</li><li></li>ユーザー名<li>パスワード</li><li>データベース</li><li>SSL 暗号化の使用</li><li>オンプレミス: MongoDb システムがクラウド ベースの場合、False を入力します。オンプレミスの場合は True を入力し、次のプロパティも入力してください。<ul><li>共有アクセス キー名</li><li>Service Bus 名前空間</li><li>リレー パス</li><li>キーの送信</li></ul></li></ul>
QuickBooks | <ul><li>会社 ID</li><li>プロバイダー名</li></ul>
SAP | <ul><li>ホスト名</li><li>言語</li><li>ユーザー名</li><li>パスワード</li><li>システム番号</li><li>Service Bus 接続文字列</li><li>RFC 名</li><li>TRFC 名</li><li>BAPI 名</li><li>IDOC 名</li></ul>
Salesforce | <ul><li>プロバイダー名</li><li>インスタンス</li><li>バージョン</li><li>エンティティ (コンマ区切り値)</li></ul>
SugarCRM | <ul><li>サーバー URL</li><li>プロバイダー名</li><li>モジュール名</li></ul>

4. **[作成]** を選択します。


## On-Premises Hybrid Connection Manager のインストール
SAP などのオンプレミス システムに接続するエンタープライズ コネクタを作成した後で、On-Premises Hybrid Connection Manager をインストールします。

1. オンプレミスのエンタープライズ システム上で、Azure の管理ポータルを開き、エンタープライズ コネクタを選択します。 
2. ブレードで、**[ハイブリッド接続]** を選択します。 
3. **[プライマリ ゲートウェイの構成文字列]** の値をコピーします。 
4. **[ダウンロードして構成]** を選択します。インストールの間に、コピーしたゲートウェイの構成文字列を貼り付け、インストールを続行します。 
5. 接続状態を確認するには、エンタープライズ コネクタのブレードを開きます。ステータスが **[接続済み]** になっていることを確認してください。 

「[オンプレミスの SAP サーバーと統合する](app-service-logic-integrate-with-an-on-premise-SAP-server.md)」に、その例が記載されています。


## API Apps の監視
Azure の管理ポータルで、エンタープライズの API アプリを開きます。**[操作]** セクションでは、さまざまな管理操作を表示できます。たとえば、次のようなことができます。

- 情報イベントやエラー イベントの表示
- ワーカー プロセス (w3wp) のメモリ使用量とスレッド数の表示
- アプリケーションおよび web サーバーのログを表示します。

詳細については、「[ロジック アプリを監視する](app-service-logic-monitor-your-logic-apps.md)」を参照してください。


## アプリケーションへのコネクタの追加 
Microsoft Azure App Service は、上記のコネクタが使用できるさまざまな種類のアプリケーションを公開しています。新たに作成したものや既存のコネクタをロジック アプリ、モバイル アプリ、または Web アプリに追加できます。

アプリ内でギャラリーからコネクタを選択するだけで、自動的にアプリに追加されます。

次に示すのは、ロジック アプリ、モバイル アプリ、または Web アプリにエンタープライズ コネクタを追加する手順です。

1. Azure ポータルのスタート画面 (ホーム ページ) で、**Marketplace** に移動し、Logic Apps、Mobile Apps、または Web Apps を検索します。

	新しいアプリを作成する場合は、ロジック アプリ、モバイル アプリ、または Web アプリを検索します。アプリを選択し、新しいブレードで **[作成]** を選択します。[ロジック アプリの作成](app-service-logic-create-a-logic-app.md)に関するページに、この手順が記載されています。

2. アプリを開き、**[トリガーとアクション]** を選択します。

3. 作成したコネクタを**ギャラリー**から追加します。これにより、コネクタはアプリに自動的に追加されます。
4. **[OK]** を選択して変更を保存します。 


## セキュリティ
エンタープライズ コネクタの中には、OAuth セキュリティを使用するものがあります。アプリにコネクタを追加した場合には、サインイン アカウントでエンタープライズ システムに接続してコネクタを**承認**し、条項に同意します。これにより、アプリとコネクタは、サインインのアカウントを使用してシステムに認証されます。


### REST API を使用したコネクタへのアクセス
[コネクタ REST API の使用方法に関するドキュメントを参照してください。](http://go.microsoft.com/fwlink/p/?LinkId=529766)

## その他のエンタープライズ コネクタのリソース
[オンプレミスの SAP サーバーと統合する](app-service-logic-integrate-with-an-on-premise-SAP-server.md)<br/> [コネクタと BizTalk API Apps とは](app-service-logic-what-are-biztalk-api-apps.md)


## Logic Apps と Web Apps に関するガイド
[Logic Apps とは](app-service-logic-what-are-logic-apps.md)<br/> [Azure App Service の Websites と Web Apps](../app-service-web/app-service-web-overview.md)



## その他のコネクタ

[コネクタと API Apps の一覧](app-service-logic-connectors-list.md)<br/><br/>[コネクタと BizTalk API Apps とは](app-service-logic-what-are-biztalk-api-apps.md)

<!---HONumber=July15_HO4-->