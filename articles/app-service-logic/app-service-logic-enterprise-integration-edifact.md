<properties 
	pageTitle="EDIFACT でのエンタープライズ統合 | Microsoft Azure" 
	description="EDIFACT 契約を使用してロジック アプリを作成する方法について説明しています。" 
	services="app-service\logic" 
	documentationCenter=".net,nodejs,java"
	authors="jeffhollan" 
	manager="erikre" 
	editor="cgronlun"/>

<tags 
	ms.service="app-service-logic" 
	ms.workload="integration" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="07/26/2016" 
	ms.author="jonfan"/>

# EDIFACT でのエンタープライズ統合 

> [AZURE.NOTE] このページでは、Logic Apps が備えている EDIFACT の機能について取り上げます。X12 については、[こちら](app-service-logic-enterprise-integration-x12.md)をクリックしてください。

## EDIFACT 契約の作成 
EDIFACT メッセージの交換を始める前に、EDIFACT 契約を作成し、統合アカウントで保管する必要があります。次の手順では、EDIFACT 契約を作成するプロセスについて説明します。

### 開始する前に必要な項目
- Azure サブスクリプションで定義されている[統合アカウント](./app-service-logic-enterprise-integration-accounts.md)
- 統合アカウントで既に定義されている 2 つ以上の[パートナー](./app-service-logic-enterprise-integration-partners.md)

>[AZURE.NOTE]契約を作成する際は、パートナーとの間で送受信するメッセージの内容と契約の種類とが一致している必要があります。


[統合アカウントを作成](./app-service-logic-enterprise-integration-accounts.md)し、[パートナーを追加](./app-service-logic-enterprise-integration-partners.md)した後に、EDIFACT 契約を作成するには、次の手順に従います。

### Azure ポータルのホーム ページから

[Azure ポータル](http://portal.azure.com "Azure ポータル")にログインしたら、次の手順に従います。
1. 左側のメニューの **[参照]** を選択します。

>[AZURE.TIP]**[参照]** リンクが表示されない場合は、最初にメニューを展開する必要があります。これを行うには、折りたたまれたメニューの左上にある **[メニューの表示]** リンクを選択します。

![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-0.png)
2. フィルター検索ボックスに「*integration*」と入力し、結果のリストから **[統合アカウント]** を選択します。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-3.png)
3. 表示された **[統合アカウント]** ブレードで、契約を作成する統合アカウントを選択します。統合アカウントがリストに表示されない場合は、[最初に統合アカウントを 1 つ作成](./app-service-logic-enterprise-integration-accounts.md "統合アカウントについて")します。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-4.png)
4.  **[契約]** タイルを選択します。契約タイルが表示されない場合は、最初に契約タイルを追加します。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-5.png)
5. 開かれた [契約] ブレードの **[追加]** ボタンを選択します。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-agreement-2.png)
6. 開いた [契約] ブレードで、契約の**名前**を入力し、EDIFACT の**契約の種類**、**ホスト パートナー**、**ホスト ID**、**ゲスト パートナー**、**ゲスト ID** を選択します。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1.png)
7. 契約のプロパティを設定したら、**[受信設定]** を選択し、この契約を使用して受信されたメッセージを処理する方法を構成します。
8. [受信設定] コントロールは、[識別子]、[受信確認]、[スキーマ]、[制御番号]、[検証]、[内部設定]、[バッチ処理] セクションに分かれています。メッセージを交換するパートナーとの契約に基づいて、これらのプロパティを構成します。これらのコントロールのビューは次のようになります。この契約で受信メッセージをどのように特定して処理するかに基づいてコントロールを構成してください。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-2.png)
9. **[OK]** ボタンを選択して設定を保存します。

### 識別子

|プロパティ|説明 |
|---|---|
|UNB6.1 (受信者の参照パスワード)|1 ～ 14 文字の英数字を値として入力します。|
|UNB6.2 (受信者の参照修飾子)|1 ～ 2 文字の英数字を入力します。|

### 謝辞 

|プロパティ|説明 |
|----|----|
|メッセージの受信 (CONTRL)|インターチェンジの送信者に技術確認 (CONTRL) を返すには、このチェック ボックスをオンにします。これらの受信確認は、契約の送信設定に基づいてインターチェンジの送信者に送信されます。|
|確認 (CONTRL)|機能確認 (CONTRL) をインターチェンジの送信者に返すには、このチェック ボックスをオンにします。この確認は、契約の送信設定に基づいてインターチェンジの送信者に送られます。|

### スキーマ

|プロパティ|説明 |
|----|----|
|UNH2.1 (種類)|トランザクション セットの種類を選択します。|
|UNH2.2 (バージョン)|メッセージのバージョン番号を入力します (最低 1 文字、最大 3 文字)。|
|UNH2.3 (リリース)|メッセージのリリース番号を入力します。(最低 1 文字、最大 3 文字)。|
|UNH2.5 (関連付けられている割り当てコード)|割り当てられているコードを入力します。最大 6 文字の英数字を入力する必要があります。|
|UNG2.1 (アプリ送信者 ID)|1 ～ 35 文字の英数字を入力します。|
|UNG2.2 (APP 送信者コードの修飾子)|最大 4 文字の英数字を値として入力します。|
|スキーマ|関連付けられている統合アカウントから、使用対象となる以前アップロードしたスキーマを選択します。|

### 制御番号

|プロパティ|説明 |
|----|----|
|Disallow Interchange control number duplicates (インターチェンジ制御番号の重複を許可しない)|インターチェンジの重複を防止するには、このチェック ボックスをオンにします。選択した場合、受信したインターチェンジのインターチェンジ制御番号 (UNB5) が、過去に処理されたインターチェンジ制御番号と一致しないことが、EDIFACT デコード アクションによって確認されます。一致が検出された場合、インターチェンジは処理されません。
|重複する UNB5 をチェックする間隔 (日)|重複するインターチェンジ制御番号を許可しないように選択した場合は、**[重複する UNB5 をチェックする間隔 (日)]** オプションに適切な値を指定して、チェックを実行する間隔の日数を指定できます。|
|Disallow Group control number duplicates (グループ制御番号の重複を許可しない)|グループ制御番号 (UNG5) が重複したインターチェンジを防止するには、このチェック ボックスをオンにします。|
|Disallow Transaction set control number duplicates (トランザクション セット制御番号の重複を許可しない)|トランザクション セット制御番号 (UNH1) が重複したインターチェンジを防止するには、このチェック ボックスをオンにします。|
|EDIFACT 確認制御番号|受信確認で使用するトランザクション セット参照番号を指定するには、プレフィックスの値と参照番号の範囲、サフィックスを指定します。|

### Validations (検証)

|プロパティ|説明 |
|----|----|
|メッセージの種類|メッセージの種類を指定します。検証対象の行が 1 つ完了するたびに別の行が自動的に追加されます。ルールが指定されていない場合は、既定として指定された行が検証に使用されます。|
|EDI Validation (EDI の検証)|スキーマ、長さ制限、空のデータ要素、および末尾の区切り記号の EDI プロパティで定義されたデータ型で EDI 検証を実行する場合は、このチェック ボックスをオンにします。|
|拡張された検証|インターチェンジ送信者から受信したインターチェンジの拡張された検証 (XSD) を有効にする場合は、このチェック ボックスをオンにします。これには、XSD データ型の検証に加えて、フィールド長、省略可能性、および繰り返し回数の検証が含まれます。|
|Allow Leading/Trailing Zeroes (先頭および末尾のゼロを許可)|先頭および末尾のゼロを許可する場合は **[許可する]** を、許可しない場合は **[許可しない]** を選択します。また、先頭および末尾のゼロをトリミングするには、**[削除]** を選択します。|
|先頭および末尾のゼロをトリミングする|先頭と末尾のゼロをトリミングする場合は、このチェック ボックスをオンにします。|
|末尾の区切り記号のポリシー|インターチェンジ送信者から受信したインターチェンジに末尾の区切り記号や区切り文字を許可しない場合は、**[許可しない]** を選択します。インターチェンジに末尾の区切り記号や区切り文字が含まれている場合、無効と宣言されます。末尾の区切り記号や区切り文字の有無に関係なくインターチェンジを受け入れる場合は、**[オプション]** を選択します。受信したインターチェンジに末尾の区切り記号や区切り文字が含まれている必要がある場合は、**[必須]** を選択します。|

### Internal Settings (内部設定)

|プロパティ|説明 |
|----|----|
|末尾の区切り記号が許可されている場合は空の XML タグを作成する|インターチェンジの送信者が末尾の区切り記号に空の XML タグを含めるには、このチェック ボックスをオンにします。|
|Inbound batching processing (受信バッチ処理)|次のオプションがあります。</br></br>**[インターチェンジをトランザクション セットとして分割 - エラー発生時にトランザクション セットを中断]**: トランザクション セットに適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。このオプションを使用すると、インターチェンジの 1 つまたは複数のトランザクション セットが失敗した場合、失敗したトランザクション セットのみ中断されます。[インターチェンジをトランザクション セットとして分割 - エラー発生時にインターチェンジを中断]: 適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。このオプションを使用すると、インターチェンジの 1 つまたは複数のトランザクション セットが失敗した場合に、インターチェンジ全体が中断されます。</br></br>**[インターチェンジの保存 - エラー発生時にトランザクション セットを中断]**: インターチェンジをそのまま残し、バッチ インターチェンジ全体に対して XML ドキュメントを作成します。このオプションを使用すると、インターチェンジの 1 つまたは複数のトランザクション セットが失敗した場合に、失敗したトランザクション セットのみが中断され、その他のトランザクション セットは処理されます。</br></br>**[インターチェンジの保存 - エラー発生時にインターチェンジを中断]**: インターチェンジをそのまま残し、バッチ インターチェンジ全体に対して XML ドキュメントを作成します。このオプションを使用すると、インターチェンジの 1 つまたは複数のトランザクション セットが失敗した場合に、インターチェンジ全体が中断されます。|

これで選択した設定に準拠する受信メッセージを処理する準備ができました。

パートナーに送信するメッセージを処理する設定を構成するには:
10. **[送信設定]** を選択し、この契約を使用して送信されたメッセージを処理する方法を構成します。

[送信設定] コントロールは、[識別子]、[受信確認]、[スキーマ]、[エンベロープ]、[制御番号]、[文字セットと区切り記号]、[検証] のセクションに分かれています。

これらのコントロールのビューは以下のとおりです。この契約でパートナーに送信するメッセージをどのように処理するかに基づいて選択してください。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-3.png)
11. **[OK]** ボタンを選択して設定を保存します。

### 識別子
|プロパティ|説明 |
|----|----|
|UNB1.2 (構文バージョン)|**1** ～ **4** の値を選択します。|
|UNB2.3 (送信者の逆ルーティングのアドレス)|1 ～ 14 文字の英数字を入力します。|
|UNB3.3 (受信者の逆ルーティングのアドレス)|1 ～ 14 文字の英数字を入力します。|
|UNB6.1 (受信者の参照パスワード)|1 ～ 14 文字の英数字を入力します。|
|UNB6.2 (受信者の参照修飾子)|1 ～ 2 文字の英数字を入力します。|
|UNB7 (アプリケーション参照 ID)|1 ～ 14 文字の英数字を入力します。|

### Acknowledgement (受信確認)
|プロパティ|説明 |
|----|----|
|メッセージの受信 (CONTRL)|ホスト パートナーが技術確認 (CONTRL) の受け取りを想定している場合、このチェック ボックスをオンにします。この設定は、メッセージを送信しているホスト パートナーがゲスト パートナーからの受信確認を要求していることを指定します。|
|確認 (CONTRL)|ホスト パートナーが機能確認 (CONTRL) の受け取りを想定している場合、このチェック ボックスをオンにします。この設定は、メッセージを送信しているホスト パートナーがゲスト パートナーからの受信確認を要求していることを指定します。|
|受理されたトランザクション セットの SG1/SG4 ループを生成する|機能確認を要求するように選択した場合は、このチェック ボックスをオンにします。受理されたトランザクション セットの SG1/SG4 ループが、機能 CONTRL 確認に強制的に生成されます。|

### スキーマ
|プロパティ|説明 |
|----|----|
|UNH2.1 (種類)|トランザクション セットの種類を選択します。|
|UNH2.2 (バージョン)|メッセージのバージョン番号を入力します|
|UNH2.3 (リリース)|メッセージのリリース番号を入力します。|
|スキーマ|使用するスキーマを選択します。スキーマは統合アカウント内にあります。スキーマにアクセスするには、まず統合アカウントをロジック アプリにリンクします。|

### エンベロープ
|プロパティ|説明 |
|----|----|
|UNB8 (処理優先度コード)|最大 1 文字の値をアルファベットで入力します。|
|UNB10 (通信アグリーメント)|1 ～ 40 文字の英数字を入力します。|
|UNB11 (テスト インジケーター)|生成されたインターチェンジがテスト データであることを指定するには、このチェック ボックスをオンにします。|
|UNA セグメントの適用 (サービスの文字列通知)|送信するインターチェンジの UNA セグメントを生成するには、このチェック ボックスをオンにします。|
|UNG セグメントの適用 (機能グループ ヘッダー)|ゲスト パートナーに送信されるメッセージの機能グループ ヘッダーにグループ化セグメントを作成するには、このチェック ボックスをオンにします。UNG セグメントの作成には、次の値を使用します。</br></br>**UNG1** の場合、1 ～ 6 文字の英数字を値として入力します。</br></br>**UNG2.1** の場合、1 ～ 35 文字の英数字を値として入力します。</br></br>**UNG2.2** の場合、最大 4 文字の英数字を値として入力します。</br></br>**UNG3.1** の場合、1 ～ 35 文字の英数字を値として入力します。</br></br>**UNG3.2** の場合、最大 4 文字の英数字を値として入力します。</br></br>**UNG6** の場合、1 ～ 3 文字の英数字を値として入力します。</br></br>**UNG7.1** の場合、1 ～ 3 文字の英数字を値として入力します。</br></br>**UNG7.2** の場合、1 ～ 3 文字の英数字を値として入力します。</br></br>**UNG7.3** の場合、1 ～ 6 文字の英数字を値として入力します。</br></br>**UNG8** の場合、1 ～ 14 文字の英数字を値として入力します。|

### Character Sets and Separators (文字セットと区切り文字)
各メッセージ タイプで使用する文字セットや、異なるセットの区切り文字を入力できます。特定のメッセージ スキーマで文字セットが指定されていない場合は、既定の文字セットが使用されます。

|プロパティ|説明 |
|----|----|
|UNB1.1 (システム識別子)|送信インターチェンジで適用する EDIFACT 文字セットを選択します。|
|スキーマ|ドロップダウン リストから [スキーマ] を選択します。行が 1 つ完了するたびに新しい行が追加されます。選択したスキーマについて、使用する区切り記号のセットを選択します。</br></br>**[コンポーネント要素区切り記号]** - 複合データ要素を区切る単一の文字を入力します。</br></br>**[データ要素区切り記号]** - 複合データ要素内の単純データ要素を区切る単一の文字を入力します。</br></br></br></br>**[Replacement Character (置換文字)]** - ペイロード データにデータ、セグメント、またはコンポーネントの区切り記号としても使用される文字が含まれる場合は、このチェック ボックスをオンにします。その後置換文字を入力できます。EDIFACT 送信メッセージが生成されるときに、ペイロード データ内の区切り文字のすべてのインスタンスが指定した文字に置換されます。</br></br>**[セグメント終端記号]** - EDI セグメントの終端を示す単一の文字を入力します。</br></br>**[サフィックス]** - セグメント識別子と共に使用される文字を選択します。サフィックスを指定する場合は、セグメント終端記号のデータ要素が空でもかまいません。セグメント終端記号を空にする場合は、サフィックスを指定する必要があります。|

### 制御番号
|プロパティ|説明 |
|----|----|
|UNB5 (インターチェンジ制御番号)|プレフィックス、インターチェンジ制御番号の値、サフィックスを入力します。これらの値は、送信インターチェンジを生成する目的で使用されます。プレフィックスとサフィックスは省略可能です。制御番号は必須です。制御番号は、新しいメッセージごとにインクリメントされます。プレフィックスとサフィックスは変化しません。|
|UNG5 (グループ制御番号)|プレフィックス、インターチェンジ制御番号の値、サフィックスを入力します。これらの値は、グループ制御番号を生成する目的で使用されます。プレフィックスとサフィックスは省略可能です。制御番号は必須です。制御番号は、最大値に達するまで新しいメッセージごとにインクリメントされます。プレフィックスとサフィックスは変化しません。|
|UNH1 (メッセージ ヘッダーの参照番号)|プレフィックス、インターチェンジ制御番号の値、サフィックスを入力します。これらの値は、メッセージ ヘッダー参照番号を生成する目的で使用されます。プレフィックスとサフィックスは省略可能です。参照番号は必須です。参照番号は、新しいメッセージごとにインクリメントされます。プレフィックスとサフィックスは変化しません。|

### Validations (検証)
|プロパティ|説明 |
|----|----|
|メッセージの種類|このオプションを選択すると、インターチェンジ受信者の検証を有効にします。この検証では、データ型、長さの制限、および空のデータ要素と末尾の区切り記号を検証することで、トランザクション セットのデータ要素に対して EDI の検証を実行します。|
|EDI Validation (EDI の検証)|スキーマ、長さ制限、空のデータ要素、および末尾の区切り記号の EDI プロパティで定義されたデータ型で EDI 検証を実行する場合は、このチェック ボックスをオンにします。|
|拡張された検証|このオプションを選択すると、インターチェンジ送信者から受信したインターチェンジの拡張された検証を有効にします。これには、XSD データ型の検証に加えて、フィールド長、省略可能性、および繰り返し回数の検証が含まれます。EDI の検証を有効にしなくても拡張された検証を有効にすることができます。また、その逆も可能です。|
|先頭および末尾のゼロを許可する|このオプションを選択すると、当事者から受け取った EDI インターチェンジのデータ要素が末尾のスペースのために長さ要件に準拠しないが、そのスペースが削除されたときに長さ要件に準拠している場合に、EDI インターチェンジの検証が失敗とみなされません。|
|先頭および末尾のゼロをトリミングする|このオプションを選択すると、先頭と末尾のゼロがトリミングされます。|
|末尾の区切り記号|このオプションを選択すると、当事者から受け取った EDI インターチェンジのデータ要素が先頭の (または末尾の) ゼロや末尾のスペースのために長さ要件に準拠しないが、そのスペースが削除されたときに長さ要件に準拠している場合に、EDI インターチェンジの検証が失敗と見なされません。</br></br>インターチェンジ送信者から受信したインターチェンジで末尾の区切り記号を許可しない場合は、**[許可しない]** を選択します。インターチェンジに末尾の区切り記号が含まれている場合は無効と宣言されます。</br></br>末尾の区切り記号の有無に関係なくインターチェンジを受け入れる場合は、**[省略可能]** を選択します。</br></br>受信したインターチェンジで末尾の区切り記号を必須とする場合は、**[必須]** を選択します。|

開いているブレードで **[OK]** を選択した後は、次のようにします。
12. [統合アカウント] ブレード上の**[契約]** タイルを選択すると、新しく追加された契約が表示されます。![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-4.png)

## 詳細情報
- [Enterprise Integration Pack についての詳細情報](./app-service-logic-enterprise-integration-overview.md "Enterprise Integration Pack についての詳細情報")

<!---HONumber=AcomDC_0727_2016-->