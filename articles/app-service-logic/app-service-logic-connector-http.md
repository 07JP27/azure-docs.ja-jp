<properties
   pageTitle="HTTP リスナーとコネクタ"
   description="ロジック アプリでの HTTP リスナーと HTTP アクションの使用"
   services="app-service\logic"
   documentationCenter=".net,nodejs,java"
   authors="anuragdalmia"
   manager="dwrede"
   editor=""/>

<tags
   ms.service="app-service-logic"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="07/02/2015"
   ms.author="prkumar"/>


#ロジック アプリでの HTTP リスナーと HTTP アクションの使用#

ロジック アプリはさまざまなデータ ソースを基にトリガーでき、フローの一環としてデータの取得と処理のためのコネクタを提供します。ただし、次のような一部のシナリオで、直接の HTTP 接続が必要になる場合があります

1.	Web ユーザーまたはモバイル ユーザーの対話型のフロント エンドをサポートするロジック アプリを開発する。
2.	すぐに使用できるコネクタがない Web サービスからデータを取得して、処理する。
3.	Web サービスとして既に公開されているが、API アプリとしては利用できないアクションを実行する。


これらのシナリオに対して、ギャラリーでは 2 つのオプションを用意しています。

1. HTTP リスナー: このコネクタは、トリガーとして機能し、構成されたエンドポイントで HTTP 要求をリッスンします。呼び出しが、構成されたエンドポイントで受信されると、このコネクタはフローの新しいインスタンスをトリガーし、処理のために、要求された受信データをフローに渡します。また、このコネクタは、フローが開始したときに受信要求に対して自動的に応答するか、またはフローの実行に合わせて応答を作成し、呼び出し元に応答を送信するように構成することもできます。
2.	HTTP アクション: このアクションでは、インターネットで使用可能な任意のエンドポイントへの Web 要求を構成し、応答を取得して、使用するフローでアクションがその応答を使用できるようします。

##アプリ ロジックの HTTP リスナーの作成
HTTP リスナーを使用するには、まず、HTTP リスナーの API アプリのインスタンスを作成する必要があります。そのためには、次の手順に従います。

1.	Azure ポータルの右下にある [+ 新規] オプションを使用して Azure Marketplace を開きます。
2.	[Web + モバイル]、[API Apps] の順に移動し、「HTTP リスナー」を検索します。
3.	次のように、HTTP リスナーを構成します。

	![][1]

4.	パッケージの設定をセットアップするときに、次のオプションが表示され、リスナーが自動的に応答する必要があるのか、またはユーザーが明示的な応答を送信する必要があるのかを選択できます。これを False に設定し、ユーザー自身の応答を送信できるようにします。

	![][2]

5.	[OK] をクリックして作成します。
6.	API アプリのインスタンスが作成されたら、この設定を開き、セキュリティを構成します。現在、HTTP リスナーは基本認証をサポートします。HTTP リスナーを開くと、[セキュリティ] オプションを使用してセキュリティを構成できます。

	![][3] <br> <br> <b><u>既知の問題</u></b><br> *セキュリティ設定には既定値の [なし] が表示されていますが、まだ未定義の状態です。HTTP リスナーを正しく構成するには、保存する前にこの設定をいったん [基本] に変更して再度 [なし] に戻す必要があります。*

7. 最後に、外部のクライアントがエンド ポイントにアクセスできるように、API アプリのセキュリティ設定を [パブリック(匿名)] に設定する必要があります。この設定は HTTP リスナー API アプリの [すべての設定] > [アプリケーションの設定] にあります。

	![][10]

完了すると、HTTP リスナーを使用する同じリソース グループに、ロジック アプリを作成できます。

##ロジック アプリでの HTTP リスナーの使用
API アプリが作成されると、ロジック アプリのトリガーとして HTTP リスナーを使用できます。そのためには、次の手順を実行する必要があります。

4.	新しいロジック アプリを作成し、HTTP リスナーがある同じリソース グループを選択します。
5.	[トリガーとアクション] を選択してロジック アプリ デザイナーを開き、フローを構成します。HTTP リスナーが、ギャラリーの右側の [最近使用した項目] セクションに表示されます。それを選択します。
6.	これで、HTTP メソッドと、フローをトリガーするリスナーを必要とする相対 URL を設定できます。<br>

	![][4] ![][5]

7.	完全な URI を取得するには、HTTP リスナーをダブルクリックしてその構成設定を表示し、API アプリの "ホスト" の URL をコピーします。


	![][6]
8.	これで、HTTP 要求で受信したデータを、次のようにフローのその他のアクションで使用できます。<br> ![][7] ![][8]
9.	最後に、応答を送信するには、もう一つの HTTP リスナーを追加して、HTTP 応答の送信アクションを選択します。要求 ID に HTTP リスナーから取得した要求 ID を設定して、返す対象の応答の本文と HTTP ステータスに入力します。![][9]

##HTTP アクションの使用
HTTP アクションは、ロジック アプリがネイティブでサポートしており、使用可能にするために最初に API アプリを作成する必要はありません。ロジック アプリの任意の場所に HTTP アクションを挿入し、呼び出しの URI、ヘッダーおよび本文を選択できます。HTTP アクションはクライアント側のセキュリティの複数のオプションをサポートします。これらのオプションを使用する場合は、[この記事](http://aka.ms/logicapphttpauth)を参照してください。

HTTP アクションの出力は、ヘッダーと本文です。これらは、その他のアクションとコネクタの出力を使用する場合と同様、フローのさらに下流で使用することができます。

<!--Image references-->
[1]: ./media/app-service-logic-connector-http/1.png
[2]: ./media/app-service-logic-connector-http/2.png
[3]: ./media/app-service-logic-connector-http/3.png
[4]: ./media/app-service-logic-connector-http/4.png
[5]: ./media/app-service-logic-connector-http/5.png
[6]: ./media/app-service-logic-connector-http/6.png
[7]: ./media/app-service-logic-connector-http/7.png
[8]: ./media/app-service-logic-connector-http/8.png
[9]: ./media/app-service-logic-connector-http/9.png
[10]: ./media/app-service-logic-connector-http/10.png

<!---HONumber=July15_HO4-->