<properties 
	pageTitle="X12 と Enterprise Integration Pack の概要 | Microsoft Azure App Service | Microsoft Azure" 
	description="X12 契約を使用してロジック アプリを作成する方法について説明しています。" 
	services="app-service\logic" 
	documentationCenter=".net,nodejs,java"
	authors="msftman" 
	manager="erikre" 
	editor="cgronlun"/>

<tags 
	ms.service="app-service-logic" 
	ms.workload="integration" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="07/08/2016" 
	ms.author="deonhe"/>

# X12 での Enterprise Integration 

## X12 契約の作成 
X12 メッセージの交換を始める前に、X12 契約を作成し、統合アカウントに格納する必要があります。次の手順では、X12 契約を作成するプロセスについて説明します。

### 開始する前に必要な項目
- Azure サブスクリプションで定義されている[統合アカウント](./app-service-logic-enterprise-integration-accounts.md)
- 統合アカウントで既に定義されている 2 つ以上の[パートナー](./app-service-logic-enterprise-integration-partners.md)

>[AZURE.NOTE]契約を作成する場合は、契約のファイルの内容が契約の種類と一致している必要があります。


[統合アカウントを作成](./app-service-logic-enterprise-integration-accounts.md)し、[パートナーを追加](./app-service-logic-enterprise-integration-partners.md)した後に、X12 契約を作成するには、次の手順に従います。

### Azure ポータルのホーム ページから

[Azure ポータル](http://portal.azure.com "Azure ポータル")にログインしたら、次の手順に従います。
1. 左側のメニューの **[参照]** を選択します。

>[AZURE.TIP]**[参照]** リンクが表示されない場合は、最初にメニューを展開する必要があります。これを行うには、折りたたまれたメニューの左上にある **[メニューの表示]** リンクを選択します。

![](./media/app-service-logic-enterprise-integration-overview/overview-1.png)
2. フィルター検索ボックスに「*integration*」と入力し、結果のリストから **[Integration Accounts (統合アカウント)]** を選択します。![](./media/app-service-logic-enterprise-integration-x12/x12-1-3.png)
3. 開いた **[Integration Accounts (統合アカウント)]** ブレードで、契約を作成する統合アカウントを選択します。統合アカウントがリストに表示されない場合は、[最初に統合アカウントを 1 つ作成](./app-service-logic-enterprise-integration-accounts.md "統合アカウントについて")します。![](./media/app-service-logic-enterprise-integration-x12/x12-1-4.png)
4.  **[Agreements (契約)]** タイルを選択します。契約タイルが表示されない場合は、最初に契約タイルを追加します。![](./media/app-service-logic-enterprise-integration-x12/x12-1-5.png)
5. 開いた [Agreements (契約)] ブレードで、**[追加]** ボタンを選択します。![](./media/app-service-logic-enterprise-integration-agreements/agreement-2.png)
6. 開いた [Agreements (契約)] ブレードで、契約の**名前**を入力し、**契約の種類**、**ホスト パートナー**、**ホスト ID**、**ゲスト パートナー**、**ゲスト ID** を選択します。![](./media/app-service-logic-enterprise-integration-x12/x12-1.png)
7. 受信設定のプロパティを設定したら、**[OK]** ボタンを選択して続行します。
8. **[Receive Settings (受信の設定)]** を選択し、この契約を使用して受信されたメッセージを処理する方法を構成します。
9. [Receive Settings (受信の設定)] コントロールは、[識別子]、[Acknowledgement (受信確認)]、[スキーマ]、[エンベロープ]、[制御番号]、[Validations (検証)]、[Internal Settings (内部設定)] セクションに分かれています。メッセージを交換するパートナーとの契約に基づいて、これらのプロパティを構成します。これらのコントロールのビューは次のようになります。この契約で受信メッセージをどのように特定して処理するかに基づいてコントロールを構成してください。![](./media/app-service-logic-enterprise-integration-x12/x12-2.png)

![](./media/app-service-logic-enterprise-integration-x12/x12-3.png)
10. **[OK]** ボタンを選択して設定を保存します。

### 識別子

|プロパティ|説明 |
|---|---|
|ISA1 (Authorization Qualifier) (ISA1 (認証修飾子))|ドロップダウン リストから認証修飾子値を選択します。|
|ISA2|省略可能。認証情報値を入力します。ISA1 に入力された値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。|
|ISA3 (Security Qualifier) (ISA3 (セキュリティ修飾子))|ドロップダウン リストからセキュリティ修飾子値を選択します。|
|ISA4|省略可能。セキュリティ情報値を入力します。ISA3 に入力された値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。|

### 謝辞 

|プロパティ|説明 |
|----|----|
|TA1 が必要|インターチェンジの送信者に技術確認 (TA1) を返す場合は、このチェックボックスをオンにします。これらの受信確認は、契約の送信設定に基づいてインターチェンジの送信者に送信されます。|
|FA Expected (FA が必要)|インターチェンジの送信者に機能確認 (FA) を返す場合は、このチェックボックスをオンにします。次に、使用しているスキーマのバージョンに基づいて、997 または 999 の受信確認のいずれかを選択します。これらの受信確認は、契約の送信設定に基づいてインターチェンジの送信者に送信されます。|
|Include AK2/IK2 Loop (AK2/IK2 ループを含める)|受理されたトランザクション セットの機能確認で AK2 ループの生成を有効にするには、このチェックボックスを選択します。注: このチェックボックスは [FA Expected (FA が必要)] チェックボックスを選択した場合にのみ有効です。|

### スキーマ

各トランザクション タイプ (ST1) および送信側アプリケーション (GS2) のスキーマを選択します。受信パイプラインは、受信メッセージの ST1 と GS2 の値とここで設定した値、および受信メッセージのスキーマとここで設定したスキーマと照合することで受信メッセージを逆アセンブルします。

|プロパティ|説明 |
|----|----|
|バージョン|X12 のバージョンを選択します|
|トランザクションの種類 (ST01)|トランザクションの種類を選択します|
|Sender Application (GS02) (送信側アプリケーション (GS02))|送信側のアプリケーションを選択します|
|スキーマ|使用するスキーマ ファイルを選択します。スキーマ ファイルは統合アカウント内にあります。|

### エンベロープ

|プロパティ|説明 |
|----|----|
|ISA11 の使用法|このフィールドを使用して、トランザクション セットに区切り記号を指定します。</br></br>EDI 受信パイプラインの10 進数表記の代わりに "." の 10 進数表記を使用する場合は、[標準識別子] を選択します。</br></br>繰り返し出現する単純なデータ要素または繰り返されるデータ構造体の区切り記号を指定するには、[繰り返し区切り記号] を選択します。たとえば、繰り返しの区切り記号としては通常、(^) が使用されます。HIPAA スキーマに対しては、(^) のみ使用できます。|

### 制御番号

|プロパティ|説明 |
|----|----|
|Disallow Interchange control number duplicates (インターチェンジ制御番号の重複を許可しない)|インターチェンジの重複を防止するには、このオプションをオンにします。選択した場合、BizTalk Services ポータルは受信したインターチェンジのインターチェンジ制御番号 (ISA13) とインターチェンジ制御番号が一致しないことを確認します。一致が検出された場合、受信パイプラインはインターチェンジを処理しません。<br/>重複するインターチェンジ制御番号を許可しないように選択した場合は、[Check for duplicate ISA13 every (days) (重複している ISA13 を確認する間隔 (日数))] に適切な値を指定して、チェックを実行する間隔の日数を指定できます。|
|Disallow Group control number duplicates (グループ制御番号の重複を許可しない)|グループ制御番号が重複したインターチェンジを防止するには、このオプションをオンにします。|
|Disallow Transaction set control number duplicates (トランザクション セット制御番号の重複を許可しない)|トランザクション セット制御番号が重複したインターチェンジを防止するには、このオプションをオンにします。|

### Validations (検証)

|プロパティ|説明 |
|----|----|
|メッセージの種類|EDI メッセージの種類 ([850-Purchase Order (850 - 発注書)] や [999-Implementation Acknowledgement (999 - 実装確認)] など)。|
|EDI Validation (EDI の検証)|スキーマ、長さ制限、空のデータ要素、および末尾の区切り記号の EDI プロパティで定義されたデータ型で EDI 検証を実行します。|
|拡張された検証|データ型が EDI でない場合は、検証はデータ要素の要件と許可された繰り返し、列挙、およびデータ要素の長さの検証 (最小/最大) で実行されます。|
|Allow Leading/Trailing Zeroes (先頭および末尾のゼロを許可)|先頭または末尾のスペースおよびゼロの文字が保持されます。これらは削除されません。|
|末尾の区切り記号のポリシー|受信したインターチェンジに末尾の区切り記号を生成します。[許可しない]、[省略可能]、および [必須] のオプションがあります。|

### Internal Settings (内部設定)

|プロパティ|説明 |
|----|----|
|暗黙的に指定された 10 進形式 Nn を 底 10 の数値に変換する|BizTalk Services ポータルの中間 XML で、形式 Nn で指定されている EDI 番号を底 10 の数値に変換します。|
|末尾の区切り記号が許可されている場合は空の XML タグを作成する|インターチェンジの送信者が末尾の区切り記号に空の XML タグを含めるには、このチェック ボックスをオンにします。|
|Inbound batching processing (受信バッチ処理)|インターチェンジをトランザクション セットとして分割 - エラー発生時にトランザクション セットを中断: トランザクション セットに適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。このオプションを使用すると、インターチェンジの 1 つまたは複数のトランザクション セットが失敗した場合に、BizTalk Services が失敗したトランザクション セットのみを中断します。</br></br>[インターチェンジをトランザクション セットとして分割 - エラー発生時にインターチェンジを中断]: 適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。このオプションを使用すると、インターチェンジの 1 つまたは複数のトランザクション セットが失敗した場合に、BizTalk Services がインターチェンジ全体を中断します。</br></br>[インターチェンジの保存 - エラー発生時にトランザクション セットを中断]: インターチェンジをそのまま残し、バッチ インターチェンジ全体に対して XML ドキュメントを作成します。このオプションを使用すると、インターチェンジの 1 つまたは複数のトランザクション セットが失敗した場合に、BizTalk Services が失敗したトランザクション セットのみを中断し、その他のトランザクション セットの処理は継続します。</br></br>[インターチェンジの保存 - エラー発生時にインターチェンジを中断]: インターチェンジをそのまま残し、バッチ インターチェンジ全体に対して XML ドキュメントを作成します。このオプションを使用すると、インターチェンジの 1 つまたは複数のトランザクション セットが失敗した場合に、BizTalk Services がインターチェンジ全体を中断します。</br></br>|

これで選択したスキーマに準拠する受信メッセージを処理する準備ができました。

パートナーに送信するメッセージを処理する設定を構成するには:
11. **[Send Settings (送信の設定)]** を選択し、この契約を使用して送信されたメッセージを処理する方法を構成します。

[Send Settings (送信の設定)] コントロールは、[Identifiers (識別子)]、[Acknowledgement (確認)]、[Schemas (スキーマ)]、[Envelopes (エンベロープ)]、[Control Numbers (コントロール番号)]、[Character Sets and Separators (文字セットと区切り文字)]、[Validation (検証)] のセクションに分かれています。

これらのコントロールのビューは以下のとおりです。この契約でパートナーに送信するメッセージをどのように処理するかに基づいて選択してください。![](./media/app-service-logic-enterprise-integration-x12/x12-4.png)

![](./media/app-service-logic-enterprise-integration-x12/x12-5.png)

![](./media/app-service-logic-enterprise-integration-x12/x12-6.png)
12. **[OK]** ボタンを選択して設定を保存します。

### 識別子
|プロパティ|説明 |
|----|----|
|認証修飾子 (ISA1)|ドロップダウン リストから認証修飾子値を選択します。|
|ISA2|認証情報値を入力します。この値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。|
|セキュリティ修飾子 (ISA3)|ドロップダウン リストからセキュリティ修飾子値を選択します。|
|ISA4|セキュリティ情報値を入力します。値 (ISA4) テキスト ボックスのこの値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。|

### Acknowledgement (受信確認)
|プロパティ|説明 |
|----|----|
|TA1 が必要|インターチェンジの送信者に技術確認 (TA1) を返す場合は、このチェックボックスをオンにします。この設定は、メッセージを送信しているホスト パートナーが契約でゲスト パートナーからの受信確認を要求していることを指定します。これらの受信確認は、契約の [受信の設定] に基づいてホスト パートナーから求められます。|
|FA Expected (FA が必要)|インターチェンジの送信者に機能的 (FA) な受信確認を返す場合は、このチェックボックスをオンにし、使用しているスキーマのバージョンに基づいて、997 または 999 の受信確認のいずれかを選択します。これらの受信確認は、契約の [受信の設定] に基づいてホスト パートナーから求められます。|
|FA Version (FA のバージョン)|FA のバージョンを選択します|

### スキーマ
|プロパティ|説明 |
|----|----|
|バージョン|X12 のバージョンを選択します|
|トランザクションの種類 (ST01)|トランザクションの種類を選択します|
|スキーマ|使用するスキーマを選択します。スキーマは統合アカウント内にあります。スキーマにアクセスするには、まず統合アカウントをロジック アプリにリンクします。|

### エンベロープ
|プロパティ|説明 |
|----|----|
|ISA11 の使用法|このフィールドを使用して、トランザクション セットに区切り記号を指定します。</br></br>EDI 受信パイプラインの10 進数表記の代わりに "." の 10 進数表記を使用する場合は、[標準識別子] を選択します。</br></br>繰り返し出現する単純なデータ要素または繰り返されるデータ構造体の区切り記号を指定するには、[繰り返し区切り記号] を選択します。たとえば、繰り返しの区切り記号としては通常、(^) が使用されます。HIPAA スキーマに対しては、(^) のみ使用できます。</br>|
|繰り返し区切り記号|繰り返し区切り記号を入力します|
|制御バージョン番号 (ISA12)|送信インターチェンジを生成するために、BizTalk Services ポータルで使用される X12 標準のバージョンを選択します。|
|使用状況インジケーター (ISA15)|インターチェンジのコンテキストが情報 (I)、運用データ (P)、またはテストデータ (T) であるかどうかを入力します。EDI 受信パイプラインがこのプロパティをコンテキストに昇格させます。|
|スキーマ|BizTalk Services ポータルが、送信パイプラインに送信する X12 でエンコードされたインターチェンジの GS および ST セグメントをどのように生成するかを入力できます。</br></br>GS1、GS2、GS3、GS4、GS5、GS7、GS8 のデータ要素を [トランザクションの種類] の値、および [バージョン/リリース] のデータ要素を関連付けることができます。BizTalk Services ポータルで、XML メッセージのグリッドの行に [トランザクションの種類] で設定された値、および [バージョン/リリース] の要素が検出されると、送信インターチェンジのエンベロープ内の GS1、GS2、GS3、GS4、GS5、GS7、GS8 のデータ要素にそのグリッドの同じ行からの値が入力されます。[トランザクションの種類] の値と [バージョン/リリース] の要素は一意である必要があります。</br></br>省略可能。GS1 では、機能コードの値をドロップダウン リストから選択します。</br></br>必須。GS2 では、アプリケーションの送信者の英数字値を 2 ～ 15 文字で入力します。</br></br>必須。GS3 では、アプリケーションの受信者の英数字値を 2 ～ 15 文字で入力します。</br></br>省略可能。GS4 では、CCYYMMDD または YYMMDD を選択します。</br></br>省略可能。GS5 では、HHMM、HHMMSS、または HHMMSSdd を選択します。</br></br>省略可能。GS7 では、担当機関の値をドロップダウン リストから選択します。</br></br>省略可能。GS8 では、識別されたドキュメントの英数字値を 1 ～ 12 文字で入力します。</br></br>**注**: これらの値は、[トランザクションの種類]、および [バージョン/リリース] の同じ行の要素がBizTalk Services ポータルが構築しているインターチェンジに関連付けられているものと一致する場合に、そのインターチェンジの GS フィールドに入力されます。|

### 制御番号
|プロパティ|説明 |
|----|----|
|インターチェンジ制御番号 (ISA13)|必須。BizTalk Services ポータルで送信インターチェンジを生成するために使用されるインターチェンジ制御番号の値の範囲を入力します。1 ～ 999999999 の数値を入力します。|
|グループ制御番号 (GS06)|必須。BizTalk Services ポータルがグループ制御番号として使用する番号の範囲を入力します。1 ～ 9 文字の数値を入力します。|
|トランザクション セット制御番号 (ST02)|トランザクション セット制御番号 (ST02) には、中間の必須フィールドの数値の範囲と、オプションでプレフィックスおよびサフィックスの英数字値を入力します。4 つのフィールドの最大長は、すべて 9 文字です。|
|Prefix (プレフィックス)|受信確認で使用されるトランザクション セット制御番号の範囲を指定するには、[確認制御番号 (ST02)] フィールドに値を入力します。中間の 2 つのフィールドに数値を、プレフィックスとサフィックスのフィールドに英数字値 (必要な場合) を入力します。中間のフィールドは必須であり、制御番号の最小値と最大値が含まれます。プレフィックスとサフィックスは省略可能です。3 つのフィールドの最大長は、すべて 9 文字です。|
|サフィックス|受信確認で使用されるトランザクション セット制御番号の範囲を指定するには、[確認制御番号 (ST02)] フィールドに値を入力します。中間の 2 つのフィールドに数値を、プレフィックスとサフィックスのフィールドに英数字値 (必要な場合) を入力します。中間のフィールドは必須であり、制御番号の最小値と最大値が含まれます。プレフィックスとサフィックスは省略可能です。3 つのフィールドの最大長は、すべて 9 文字です。|

### Character Sets and Separators (文字セットと区切り文字)
各メッセージ タイプで使用する文字セットや、異なるセットの区切り文字を入力できます。特定のメッセージ スキーマで文字セットが指定されていない場合は、既定の文字セットが使用されます。

|プロパティ|説明 |
|----|----|
|使用する文字セット|契約に入力されるプロパティを検証する X12 文字セットを選択します。</br></br>**注**: BizTalk Services ポータルは、関連する契約のプロパティに入力された値を検証するためにのみこの設定を使用します。受信パイプラインや送信パイプラインは、実際の処理の実行時にはこの文字セット プロパティを無視します。|
|スキーマ|(+) 記号を選択して、ドロップダウン リストからスキーマを選択します。選択したスキーマについて、使用する区切り記号のセットを選択します。</br></br>[コンポーネント要素区切り記号] - 複合データ要素を区切る単一の文字を入力します。</br></br>[データ要素区切り記号] - 複合データ要素内の単純データ要素を区切る単一の文字を入力します。</br></br></br></br>[Replacement Character (置換文字)] - ペイロード データにデータ、セグメント、またはコンポーネントの区切り記号としても使用される文字が含まれる場合は、このチェックボックスをオンにします。その後置換文字を入力できます。X12 送信メッセージが生成されるときに、ペイロード データ内の区切り文字のすべてのインスタンスが指定した文字に置換されます。</br></br>[セグメント終端記号] - EDI セグメントの終端を示す単一の文字を入力します。</br></br>[Suffix (サフィックス)] - セグメント識別子と共に使用される文字を選択します。サフィックスを指定する場合は、セグメント終端記号のデータ要素が空でもかまいません。セグメント終端記号を空にする場合は、サフィックスを指定する必要があります。|

### 検証
|プロパティ|説明 |
|----|----|
|メッセージの種類|このオプションを選択すると、インターチェンジ受信者の検証を有効にします。この検証では、データ型、長さの制限、および空のデータ要素と末尾の区切り記号を検証することで、トランザクション セットのデータ要素に対して EDI の検証を実行します。|
|EDI Validation (EDI の検証)||
|拡張された検証|このオプションを選択すると、インターチェンジ送信者から受信したインターチェンジの拡張された検証を有効にします。これには、XSD データ型の検証に加えて、フィールド長、省略可能性、および繰り返し回数の検証が含まれます。EDI の検証を有効にしなくても拡張された検証を有効にすることができます。また、その逆も可能です。|
|Allow leading/ trailing zeroes (先頭および末尾のゼロを許可)|このオプションを選択すると、当事者から受け取った EDI インターチェンジのデータ要素が末尾のスペースのために長さ要件に準拠しないが、そのスペースが削除されたときに長さ要件に準拠している場合に、EDI インターチェンジの検証が失敗とみなされません。|
|末尾の区切り記号|このオプションを選択すると、当事者から受け取った EDI インターチェンジのデータ要素が先頭の (または末尾の) ゼロや末尾のスペースのために長さ要件に準拠しないが、そのスペースが削除されたときに長さ要件に準拠している場合に、EDI インターチェンジの検証が失敗とみなされません。</br></br>インターチェンジ送信者から受信したインターチェンジで末尾の区切り記号を許可しない場合は、[許可しない] を選択します。インターチェンジに末尾の区切り記号が含まれている場合は無効と宣言されます。</br></br>末尾の区切り記号の有無に関係なくインターチェンジを受け入れる場合は、[省略可能] を選択します。</br></br>受信したインターチェンジで末尾の区切り記号を必須とする場合は、[必須] を選択します。|

開いているブレードで **[OK]** を選択した後は、次のようにします。
13. [Integration Accounts (統合アカウント)] ブレード上の**[Agreements (契約)]** タイルを選択し、新しく追加された契約を確認します。![](./media/app-service-logic-enterprise-integration-x12/x12-7.png)

## 詳細情報
- [Enterprise Integration Pack についての詳細情報](./app-service-logic-enterprise-integration-overview.md "Enterprise Integration Pack についての詳細情報")

<!---HONumber=AcomDC_0713_2016-->