<properties
	pageTitle="Azure Search のインデックス | Microsoft Azure | ホステッド クラウド検索サービス"
	description="Azure Search のインデックスとその使用方法について"
	services="search"
	documentationCenter=""
	authors="HeidiSteen"
	manager="mblythe"
	editor=""
    tags="azure-portal"/>

<tags
	ms.service="search"
	ms.devlang="na"
	ms.workload="search"
	ms.topic="get-started-article"
	ms.tgt_pltfrm="na"
	ms.date="11/09/2015"
	ms.author="heidist"/>

# Azure Search のインデックス
> [AZURE.SELECTOR]
- [Overview](search-what-is-an-index.md)
- [Portal](search-create-index-portal.md)
- [.NET](search-create-index-dotnet.md)
- [REST](search-create-index-rest-api.md)

ホステッド クラウド検索サービスである Azure Search は、検索エンジンはもちろんのこと、Bing や Google のような操作をカスタム アプリケーションで実現できる各種検索機能、Azure Search を Web アプリケーションやデスクトップ アプリケーションと統合するための .NET API と REST API、および検索可能データの*インデックス*形式によるデータ保存を提供します。

##インデックスとは

*インデックス*とは、Azure Search サービスで使用されるドキュメントなどの構成要素を永続的に保存したものです。

具体的には、インデックスの処理やクエリの実行に使用される検索可能なすべてのデータがインデックスに格納されます。これらのデータは、アプリケーションに検索結果の一覧、ファセット ナビゲーション構造、詳細ページを返すためにも使用されます。Azure Search では、フィルター式やスコアリング プロファイルで使用される検索不可能なデータ (クエリの絞り込みや検索ランキング スコアの引き上げに使用されます) や、Azure Search と統合されるカスタム アプリケーションを対象とした構造体も、インデックスに格納されます。

データベースの概念をご存じであれば、インデックスは概念的にはテーブルに似ており、ドキュメントはテーブルにおける行とほぼ同じです。

詳細については後ほど説明しますが、インデックスの主要なセクションは次のとおりです。 - フィールド。*ドキュメント*の本文を定義し、個々の動作の属性を設定します。 - スコアリング プロファイル - 検索候補 - CORS オプション - 既定のアナライザー

アプリケーションで使用できるように検索サービスをプロビジョニングする一環として、インデックスを作成する必要があります。インデックスの作成は、そのスキーマの定義を中心とした作業です。最低でも、フィールドの定義と属性の設定で構成されます。必要に応じて、スコアリング プロファイルと検索候補を定義し、検索操作を強化できます。

スキーマの作成には、ポータルを使用するか、.NET SDK または REST API を呼び出すコードを記述します。

スキーマを定義してインデックスを作成したら、次の作業はインデックスへのデータ読み込みです。インデックス作成後のデータ取り込みの詳細については、「[Azure Search へのデータのインポート](search-what-is-data-import.md)」を参照してください。

##Azure Search でのインデックスの使用方法

Azure Search で実行されるデータ関連操作では、常にインデックスからデータを取得して使用したり返したりします。例外はありません。サービスでインデックス以外のデータ ソースを指定し、応答として外部データを返すことはできません。

OLTP データベースにデータを格納するオンライン小売アプリの販売トランザクションのように、アプリケーションがデータを蓄積して操作する場合、Azure Search のインデックスはソリューション全体に対する追加的なデータ ソースになります。このような場合、インデックスは専用データ ストレージとして検索サービスでのみ使用されます。サービスのすぐそばに専用データ ソースがあると、リソースやデータの競合がなくなるため、検索結果の一貫性確保、揮発性の軽減、アプリケーションと Azure Search の間のラウンド トリップ回数の削減、および検索操作の全体的なパフォーマンスの向上が実現されます。

##スキーマ定義のガイダンス

スキーマは、JSON 構造として作成されます。Azure Search と統合するカスタム ソリューションごとにインデックスを 1 つ作成する必要があります。複数のインデックスをリンクしたり結合したりすることはできませんが、ソリューションでさまざまな検索シナリオに対応する際に必要となる複雑なインデックスを作成できます。たとえば、アプリケーションで複数の言語をサポートしている場合、インデックス内のフィールド コレクションでフィールドごとに言語固有のバリアントを設定できます。

インデックスを設計する際は、計画フェーズに時間をかけ、それぞれの決定項目を十分に検討してください。デプロイ後にインデックスを変更するには、再構築とデータの再読み込みが必要になります。コードでインデックスを作成すれば、ポータルで手動で作成する場合よりも、手順がはるかに簡単になります。

適切なスキーマを作成するうえで、元のソース データについて十分に理解することが重要です。データ型を正しく一致させ、インデックス内の各ドキュメントを一意に識別する*キー*として使用するフィールドと、検索結果の一覧または詳細ページに表示させるフィールドを把握する必要があります。

リソースへの URL が格納される代理的なフィールドがインデックスにある場合、画像、音声、映像のコンテンツはインデックス以外の場所に格納する必要があります。検索できないコンテンツ、特にバイナリ コンテンツは、すべてインデックス以外の場所に格納し、インデックスのフィールド内の URI で参照します。

ご想像いただけるとおり、インデックスは、ソリューションで使用される他のデータ ソースと定期的に同期する必要があります。オンライン小売カタログであれば、検索結果に表示される情報には、販売トランザクションをキャプチャするインベントリ データベース内にあるのと同じ SKU、価格、在庫状況が使用される必要があります。ソリューションで許容される遅延の程度に応じて、データの同期を 1 日に 1 回や週に 1 回実行できるほか、インベントリ データベースと Azure Search インデックスの両方に対する同時書き込みを使用してほぼリアルタイムで実行することもできます。使用可能なオプションの詳細については、「[Azure Search へのデータのインポート](search-what-is-data-import.md)」を参照してください。

##スキーマ要素

インデックスは、属性付きのフィールド、データ値のほか、クエリと検索結果の生成方法を決定する要素で構成されます。

- フィールドは、ドキュメントの本文を定義します。オンライン小売業者であれば SKU ごとにドキュメントを作成し、報道機関であれば記事ごとに、情報メディア ポータルであればベンダーやストアフロントごとにドキュメントを作成します。
- 属性 (プロパティ) は、そのフィールドで許可されるデータの型、長さ、値、および動作を指定する注釈です。フィールドは検索、取得、並べ替えできるかどうかをすべてのフィールドごとに指定できます。また、フィールド レベルで使用する言語アナライザーを指定することもできます。*キー*は、スキーマで予約されたフィールドで、フィールド コレクション内の各ドキュメントに一意の識別子を提供します。
- スコアリング プロファイルは、検索ヒットのランキングを上げるために使用する条件で、通常よりも多くの特性をプロファイルに設定できます。たとえば、検索語句が製品名と製品の説明に一致する場合、製品名との一致を説明との一致よりもランキングの上位に位置付けることができます。
- 検索候補は、オート コンプリートや先行入力クエリとも呼ばれ、インデックス内にセクションとして定義されます。
- 既定の言語アナライザーは、インデックス レベルで指定し、すべてのフィールドにグローバルに適用されます。
- CORS オプションを使用すると、クロス ドメイン スクリプトを作成できます。このオプションは、インデックス定義の一部でもあります。

## インデックスの属性

|**プロパティ**|説明|
|------------|-----------|
|**Retrievable**|検索結果でフィールドを返すことができるかどうかを設定します。|
|**Filterable**|**$filter** クエリでフィールドを使用できるようにします。|
|**Sortable**|並べ替えオプションとしてフィールドを使用できるようにします。|
|**Facetable**|自律フィルター処理のファセット ナビゲーション構造でフィールドを使用できるようにします。通常は、複数のドキュメント (たとえば、1 つの製品やサービス カテゴリに属する複数のドキュメント) をまとめてグループ化するために使用できる、反復する値があるフィールドが、ファセットとして最適です。|
|**Key**|ドキュメント検索に使用される、各ドキュメントの一意の ID です。各インデックスに、1 つのキーが必要です。1 つのフィールドだけをキーにすることができ、そのフィールドを Edm.String に設定する必要があります。|
|**Searchable**|フィールドをフルテキスト検索可能としてマークします。|

## クラウドへの保存

Azure Search は、完全に管理されたサービスであるため、データ ストレージは内部操作として処理されます。プログラマは、Azure Search API をバイパスしてインデックスに直接接続することはできないこと、ポータルの通知または API 呼び出し以外の方法ではインデックスのサイズや正常性を監視できないことを理解しておくことが重要です。インデックスのバックアップと復元、ストレージ層のパフォーマンスの最適化や調整を行う機能はありません。内部では、データは BLOB ストレージとして格納されますが、インデックスの物理的なストレージと管理は、後から変更できる実装の詳細として捉えるのが最適な方法です。このサービスの主な利点の 1 つは、データ管理の自動化アプローチです。

クエリ ボリュームとデータ ストレージの要件が随時変更される環境でも、レプリカとパーティションを追加または移動することで容量を増減できます。詳細については、「[Microsoft Azure で Search サービスを管理する](search-manage.md)」または「[サービスの制限](search-limits-quotas-capacity.md)」を参照してください。

<!---HONumber=Nov15_HO3-->