<properties
	pageTitle="Azure Active Directory B2C: トークン、セッション、シングル サインオンの構成 | Microsoft Azure"
	description="Azure Active Directory B2C でのトークン、セッション、シングル サインオンの構成"
	services="active-directory-b2c"
	documentationCenter=""
	authors="swkrish"
	manager="msmbaldwin"
	editor="bryanla"/>

<tags
	ms.service="active-directory-b2c"
	ms.workload="identity"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/24/2016"
	ms.author="swkrish"/>

# Azure Active Directory B2C: トークン、セッション、シングル サインオンの構成

この機能を使用すると、[個別のポリシーに基づいて](active-directory-b2c-reference-policies.md)、以下の対象をきめ細かく制御することができます。
 
1. Azure Active Directory (Azure AD) B2C が出力するセキュリティ トークンの有効期間。
2. Azure AD B2C によって管理される Web アプリケーションのセッションの有効期間。
3. B2C テナントに含まれる複数のアプリケーションとポリシーの間でのシングル サインオン (SSO) の動作。

B2C テナントでこの機能を使用する手順は、以下のとおりです。

1. この手順に従って、Azure ポータルで [B2C 機能ブレードに移動](active-directory-b2c-app-registration.md#navigate-to-the-b2c-features-blade)します。
2. **[サインイン ポリシー]** をクリックします。"*注: この機能は **[サインイン ポリシー]** に限らず、あらゆるポリシー タイプで使用できます*"。
3. ポリシーをクリックして開きます。たとえば、**[B2C\_1\_SiIn]** をクリックします。
4. ブレードの上部にある **[編集]** をクリックします。
5. **[トークン、セッション、シングル サインオンの構成]** をクリックします。
6. 必要な変更を施します。後のセクションに、利用できるプロパティの説明があります。
7. **[OK]** をクリックします。
8. ブレードの上部で **[保存]** をクリックします。

![Screenshot of token, session and single sign-on config](./media/active-directory-b2c-token-session-sso/token-session-sso.png)

## トークンの有効期間の構成

Azure AD B2C は保護されたリソースへの安全なアクセスを実現する [OAuth 2.0 認証プロトコル](active-directory-b2c-reference-protocols.md)をサポートしています。このサポートを実施するために、Azure AD B2C は各種の[セキュリティ トークン](active-directory-b2c-reference-tokens.md)を発行します。Azure AD B2C は以下のプロパティを使用して、セキュリティ トークンの有効期間を管理することができます。

- **[Access & ID token lifetimes (minutes) (アクセス & ID トークンの有効期間 (分))]**: 保護されたリソースへのアクセスに使用する OAuth 2.0 ベアラー トークンの有効期間。現在、Azure AD B2C は ID トークンのみを発行します。アクセス トークンのサポートが開始されたら、このプロパティの値がアクセス トークンにも適用されます。
   - 既定値 = 60 分。
   - 最小値 (この値を含む) = 5 分。
   - 最大値 (この値を含む) = 1,440 分。
- **[Refresh token lifetime (days) (更新トークン有効期間 (日))]**: 更新トークンで新しいアクセスや ID トークン (および使用するアプリケーションで `offline_access` スコープが与えられている場合は、新しい更新トークン) を取得できる最長期間。
   - 既定値 = 14 日。
   - 最小値 (この値を含む) = 1 日。
   - 最大値 (この値を含む) = 90 日。
- **[Refresh token sliding window lifetime (days) (更新トークン スライディング ウィンドウの有効期間 (日))]**: この期間の経過後は、アプリケーションが取得した最新の更新トークンの有効期間にかかわらず、強制的にユーザーを再認証します。スイッチが **[制限あり]** の場合にのみ、この設定が可能です。**[Refresh token lifetime (days) (更新トークン有効期間 (日))]** の値以上であることが必要です。スイッチが **[制限なし]** の場合は、特定の値を設定できません。
   - 既定値 = 90 日。
   - 最小値 (この値を含む) = 1 日。
   - 最大値 (この値を含む) = 365 日。

次の 2 つのユース ケースは、これらのプロパティを使用して実現できます。

- ユーザーがモバイル アプリケーションでアクティブな状態を継続している限り、そのアプリケーションへのサインインを無制限に持続することができます。そのためには、サインイン ポリシーで **[Refresh token sliding window lifetime (days) (更新トークン スライディング ウィンドウの有効期間 (日))]** スイッチを **[Unbounded (制限なし)]** に設定します。
- 適切なアクセス トークン有効期間を設定して、業界のセキュリティ要件やコンプライアンス要件を満たすことができます。

## セッションの構成

Azure AD B2C がサポートしている [OpenID Connect 認証プロトコル](active-directory-b2c-reference-oidc.md)を使用して、Web アプリケーションへの安全なサインインを実現できます。次のプロパティを使用して、Web アプリケーション セッションを管理できます。

- **[Web app session lifetime (minutes) (Web アプリ セッション有効期間 (分))]**: ユーザーのブラウザーに保存した Azure AD B2C のセッション Cookie が正常に認証される有効期間。
   - 既定値 = 1,440 分。
   - 最小値 (この値を含む) = 15 分。
   - 最大値 (この値を含む) = 1,440 分。
- **[Web app session timeout (Web アプリ セッションのタイムアウト)]**: このスイッチを **[絶対]** に設定すると、**[Web app session lifetime (minutes) (Web アプリ セッション有効期間 (分))]** で指定した期間の経過後に、強制的にユーザーを再認証します。このスイッチを **[ローリング]** (既定値) に設定すると、ユーザーが Web アプリケーションでアクティブな状態を継続している限り、そのユーザーのサインインは継続されます。

次の 2 つのユース ケースは、これらのプロパティを使用して実現できます。

- 適切な Web アプリケーション セッション有効期間を設定して、業界のセキュリティ要件やコンプライアンス要件を満たすことができます。
- ユーザーが Web アプリケーションの高セキュリティ部分を操作しているときに、設定期間が過ぎると、強制的に再認証を実施できます。

## シングル サインオン (SSO) の構成

B2C テナントで複数のアプリケーションやポリシーを運用している場合は、**シングル サインオン構成**プロパティを使用して、アプリケーションやポリシー間でのユーザーの操作を管理できます。以下のいずれかのプロパティを設定することができます。

- **[テナント]**: これは既定の設定です。この設定を使用すると、B2C テナント内の複数のアプリケーションとポリシーで同じユーザー セッションを共有できます。たとえば、ユーザーが Contoso Shopping というアプリケーションにサインインすると、そのユーザーは別のアプリケーション Contoso Pharmacy にもシームレスにアクセスできます。
- **[アプリケーション]**: この設定を行うと、ユーザー セッションは、特定のアプリケーション専用として、他のアプリケーションから独立して維持されます。たとえば、ユーザーが既に Contoso Shopping にサインインしている場合でも、同じ B2C テナントの別のアプリケーションである Contoso Pharmacy に (同じ資格情報で) サインインするように指定できます。
- **[ポリシー]**: この設定を行うと、ユーザー セッションは、アプリケーションにかかわらず、特定のポリシー専用として維持されます。たとえば、ユーザーがサインインを済ませ、Multi-Factor Authentication (MFA) ステップを完了すると、ポリシーに関連付けられたセッションが期限切れになるまで、ユーザーは複数のアプリケーションの高セキュリティ部分にアクセスできます。
- **[無効]**: この設定は、ポリシーの実行時に毎回、ユーザーの完全な手続きを必要とします。これにより、たとえば (共有デスクトップのシナリオで)、1 人のユーザーがアプリケーションへのサインインを終始継続していても、複数のユーザーがそのアプリケーションにサインインすることができます。

<!---HONumber=AcomDC_0727_2016-->