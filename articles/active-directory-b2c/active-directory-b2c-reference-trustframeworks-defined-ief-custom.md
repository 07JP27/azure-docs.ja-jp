---
title: "Azure Active Directory B2C: リファレンス - 信頼フレームワーク | Microsoft Docs"
description: "Azure Active Directory B2C のカスタム ポリシーに関するトピック"
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: krassk
editor: rojasja
ms.assetid: 
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/25/2017
ms.author: joroja
ms.translationtype: Human Translation
ms.sourcegitcommit: 2db2ba16c06f49fd851581a1088df21f5a87a911
ms.openlocfilehash: 019dd66d5abe4242ffb6cdc3276929dcd7f04466
ms.contentlocale: ja-jp
ms.lasthandoff: 05/09/2017


---

# <a name="defining-trust-frameworks-with-azure-ad-b2c-identity-experience-framework"></a>Azure AD B2C Identity Experience Framework による信頼フレームワークの定義

Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーでは、大規模な関係者コミュニティでの ID フェデレーションの複雑さを軽減し、単一の信頼関係やメタデータ交換へと単純化する集中型サービスを組織に提供します。

このためには、Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーを利用して、以下の質問に回答することが必要です。

- "*遵守しなければならない法的ポリシー、セキュリティ ポリシー、プライバシー ポリシー、データ保護ポリシーとは何か。*"
- "*連絡先はだれか。認定参加者になるためのプロセスとはどのようなものか。*"
- "*認定 ID 情報プロバイダー (別名: 要求プロバイダー) はだれか。何を提供するのか。*"
- "*認定証明書利用者はだれか。何を必要とするのか (任意)。*"
- "*参加者に求められる技術的な "ネットワーク上の" 相互運用性要件とは。*"
- "*デジタル ID 情報の交換に関して適用される必要がある "ランタイム" 運用ルールとは。*"

これらの質問すべてに回答するために、Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーでは信頼フレームワーク (TF) コンストラクトを利用しています。 では、このコンストラクトについて、また前述した点でこのコンストラクトが何に役立つかを考えてみましょう。

## <a name="understanding-the-trust-framework-and-federation-management-foundation"></a>信頼フレームワークとフェデレーションの管理基盤について

このようなコンストラクトは、関係者コミュニティの参加者が準拠しなければならない ID、セキュリティ、プライバシー、データ保護の各ポリシーについて記述された仕様として理解する必要があります。

フェデレーション ID は、インターネット規模でのエンド ユーザー ID 保証を実現するための基盤となります。  ID 管理を第三者に委任することで、エンド ユーザー用の単一のデジタル ID を複数の証明書利用者が再利用できます。  

実際のところ、ID 保証を実現するには、ID プロバイダー (IdP) と属性プロバイダー (AtP) が特定のセキュリティ、プライバシー、運用に関するポリシーと慣例に従うことが必要となります。  直接検査を行う手段がない場合、証明書利用者 (RP) は、連携することに決めた IdP および AtP との信頼関係を構築する必要があります。  デジタル ID 情報の利用者と提供者の数が急増するにつれ、このような信頼関係の対ごとの管理や、ネットワークの接続性に必要な技術メタデータの対ごとの交換を継続的に行うことが難しくなります。  フェデレーション ハブでは、こうした問題を限定的にしか解決できていません。

TF は Open Identity Exchange (OIX) の信頼フレームワーク モデルの要であり、このモデルでは、各関係者コミュニティが特定の TF 仕様によって管理されます。 このような TF 仕様によって、以下のような点が定義されます。

- 以下の定義を含む関係者コミュニティのセキュリティおよびプライバシー メトリック:
    - 参加者によって提供または要求される保証のレベル (LOA)、つまりデジタル ID 情報の信頼性に関する確信度の順序付けされたセット。
    - 参加者によって提供または要求される保護のレベル (LOP)、つまり関係者コミュニティの参加者が扱うデジタル ID 情報の保護に関する確信度の順序付けされたセット。
- 参加者によって提供または要求されるデジタル ID 情報についての説明。
- デジタル ID 情報の作成と使用、および LOA と LOP の測定に関する技術ポリシー。 通常、この文書化されたポリシーには以下のようなカテゴリがあります。
    - ID 証明ポリシー: "*個人の ID 情報がどれだけ詳細に審査されているか。*"
    - セキュリティ ポリシー: "*情報の整合性と機密性がどれだけ強力に保護されているか。*"
    - プライバシー ポリシー: "*個人を特定できる情報 (PII) をユーザーがどのように管理できるか。*"
    - 存続可能性ポリシー: プロバイダーが運用を中止した場合の PII の継続性と保護。
- デジタル ID 情報の作成と使用に関する技術プロファイル。 このプロファイルには、以下のような役割があります。
    - 指定された LOA でデジタル ID 情報を利用できるインターフェイスの範囲を設定する。
    - ネットワーク上の相互運用性に関する技術要件を説明する。
- コミュニティの参加者が実行する可能性のある各種ロールと、それらのロールを完了するために必要な資格についての説明。

このように、TF 仕様によって関係者コミュニティの参加者 (証明書利用者、ID および属性プロバイダー、属性検証者) 間における ID 情報の交換方法が決まります。

この OIX TF モデルの用語では、TF 仕様は関係者コミュニティのガバナンスに関する参照として機能し、コミュニティ内でのデジタル ID 情報のアサーションと使用を制限する、1 つまたは複数のドキュメントとされています。 つまり、TF 仕様とは、関係者コミュニティのメンバー間でのオンライン トランザクションに使用されるデジタル ID の信頼を確立するために設計され、ドキュメント化された一連のポリシーと手順です。  **TF 仕様には、一部のコミュニティ向けに実行可能なフェデレーション ID エコシステムを作成するためのルールが定義されています。**

現在、このような手法の利点は広く認められており、信頼フレームワーク仕様によって、複数の関係者コミュニティ間で再利用できる、検証可能なセキュリティ、保証、およびプライバシー特性を備えたデジタル ID エコシステムの開発が容易になることは間違いありません。

このような理由から、Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーでは、相互運用性を促進するために、その中核となる TF のデータ表現基盤として仕様を利用しています。  

Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーでの TF 仕様とは、人が判読できるデータとコンピューターで読み取り可能なデータが混在するものとされています。つまり、このモデルの一部のセクション (通常はよりガバナンス向けのセクション) は、発行済みのセキュリティおよびプライバシー ポリシーのドキュメントや関連する手順 (存在する場合) への参照として示されていますが、一方で他のセクションには、運用の自動化を促進するための構成メタデータとランタイム ルールが詳しく記述されています。

## <a name="understanding-trust-framework-policies"></a>信頼フレームワーク ポリシーについて

実装の観点から考えると、前述の TF 仕様は、Identity Experience Framework を活用した Azure AD B2C カスタム ポリシー内に、ID 動作と ID エクスペリエンスの完全な制御を実現する一連のポリシーとして含まれています。  Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーでは、そのような宣言型のポリシーを通じて、以下に示す内容の定義と構成が可能な独自の TF を実際に作成できます。

- TF に関連するコミュニティのフェデレーション ID エコシステムを定義しているドキュメントの参照。 これは TF ドキュメントへのリンクです。 要求の交換と使用を自動化/制御する (定義済みの) "ランタイム" 運用ルールまたはユーザー体験。 このユーザー体験は LOA (および LOP) に関連付けられています。 このため、ポリシーにはさまざまな LOA (および LOP) のユーザー体験が含まれる可能性があります。
- 関係者コミュニティ内の ID および属性プロバイダー、または要求プロバイダーと、コミュニティでサポートされている技術プロファイル、およびコミュニティに関連する (アウトオブバンド) LOA/LOP 認定。
- 属性検証者や要求プロバイダーとの統合。
- コミュニティ内の証明書利用者 (推定)。
- 参加者間でネットワーク通信を確立するためのメタデータ。 これらのメタデータは、証明書利用者と他のコミュニティ参加者との間に "ネットワーク上の" 相互運用性を組み込むため、技術プロファイルと共にトランザクション中に使用されます。
- 必要に応じたプロトコル変換 (SAML、OAuth2、WS-Federation、OpenID Connect)。
- 認証要件。
- 多要素オーケストレーション (必要な場合)。
- 利用できるすべての要求と関係者コミュニティの参加者へのマッピングに関する共有スキーマ。
- 要求の交換と使用を維持するためのすべての要求変換と、その場合に可能なデータ最小化。
- バインディングと暗号化。
- 要求ストレージ。

> [!NOTE]
> エンド ユーザーの認証資格情報、ID 審査、通信デバイス、物理的な場所、個人を特定できる属性などについての要求を含む、交換される可能性があるすべての種類の ID 情報をまとめて要求と呼びます。  
>
> "*要求*" という用語を使用し、その一部である属性を使用しない理由は、オンライン トランザクションにおける属性は証明書利用者が直接検証できるファクトではないためです。属性はどちらかといえばアサーションや、ファクトについての要求です (エンド ユーザーから要求されたトランザクションを許可するために、証明書利用者は、このファクトの確信度を十分に高める必要があります)。  
>
> また、Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーが、ユーザー認証や属性の取得の基盤となるプロトコルが定義されているかどうかに関係なく、一貫した方法ですべての種類のデジタル ID 情報の交換を簡易化できるように設計されているという理由もあります。  同様に、ID プロバイダー、属性プロバイダー、属性検証者の特定の機能を区別したくない場合に、それらをまとめて指す用語として要求プロバイダーを使用します。   

上記のように、これらの定義によって証明書利用者、ID および属性プロバイダー、属性検証者の間での ID 情報の交換方法が決まります。 また、証明書利用者の認証にどの ID および属性プロバイダーが必要かという点が、これらの定義によって制御されます。 これらは、継承、*if* ステートメント、ポリモーフィズムを備え、特定のアプリケーション ドメインに特化したコンピューター言語である、ドメイン固有言語 (DSL) として扱う必要があります。

これらのポリシーにより、Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーにおける TF コンストラクトのコンピューターで読み取り可能な部分が構成され、要求プロバイダーのメタデータおよび技術プロファイル要求のスキーマ定義、要求変換機能、ユーザー体験など、運用に関するすべての詳細が入力されることで、運用のオーケストレーションと自動化が容易になります。  

ポリシー内で宣言されているアクティブな参加者や、場合によっては参加者となるための条件に関して時間の経過に伴うコンテンツの変更が何度も発生する可能性があるため、これらのポリシーは、Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーの "*生きたドキュメント*" と見なされています。  
一連のポリシー (によって表されるコミュニティ) への別の要求プロバイダー/検証者の参加や脱退に伴う信頼および接続性の再構成から証明書利用者を保護することにより、フェデレーションのセットアップとメンテナンスは大幅に簡易化できます。

証明書利用者が必要なすべてのプロトコルをサポートしている可能性は低いため、追加の要求プロバイダー/検証者を統合することが必要になった場合は、相互運用性が別の大きな課題となります。 Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーでは、業界標準のプロトコルをサポートすることと、証明書利用者と属性プロバイダーが同じプロトコルをサポートしていない場合に要求を入れ替える特定のユーザー体験を適用することで、この問題を解決しています。  

ユーザー体験にはプロトコル プロファイルとメタデータが含まれ、証明書利用者と他の参加者の間に "ネットワーク上の" 相互運用性を組み込むために使用されます。  また、TF 仕様の一部として発行されたポリシーへのコンプライアンスを強制適用するために、ID 情報の交換要求/応答メッセージに適用されるランタイム運用ルールもあります。 ユーザー体験というアイデアはカスタマー エクスペリエンスをカスタマイズするための鍵となり、システムがプロトコル レベルで機能するしくみを明確にします。

このようなしくみを基に、証明書利用者アプリケーションとポータルでは、コンテキストに応じて Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーを呼び出し、その際に特定のポリシーの名前を渡すことで、面倒やリスクを伴わずに必要な動作と情報交換を正確に行うことができます。

