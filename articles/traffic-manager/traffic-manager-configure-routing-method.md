---
title: "Traffic Manager のルーティング方法の構成 | Microsoft Docs"
description: "この記事では、Traffic Manager で各種のルーティング方法を構成する方法について説明します。"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: 6dca6de1-18f7-4962-bd98-6055771fab22
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/18/2016
ms.author: kumud
translationtype: Human Translation
ms.sourcegitcommit: 8827793d771a2982a3dccb5d5d1674af0cd472ce
ms.openlocfilehash: d4481115dbf8cc720019096969c55509f33d250c

---

# <a name="configure-traffic-manager-routing-methods"></a>Traffic Manager のルーティング方法の構成

Azure Traffic Manager には、使用可能なサービス エンドポイントにトラフィックをルーティングする方法を制御するルーティング方法が 3 つ用意されています。 トラフィック ルーティング方法は、DNS 応答先のエンドポイントを決定するために、受信した各 DNS クエリに適用されます。

Traffic Manager では、次の 3 つのトラフィック ルーティング方法を使用できます。

* **優先順位:** プライマリ サービス エンドポイントを使用し、プライマリが使用できない場合に備えてバックアップを用意する場合は、"優先順位" を選択します。
* **重み付け:** 一連のエンドポイントに、均等にまたは定義した重みに従ってトラフィックを分散させる場合は、"重み付け" を選択します。
* **パフォーマンス**: 複数のエンドポイントが地理的に異なる場所にあり、エンド ユーザーが、ネットワーク待ち時間が最も短いという意味で "最も近い" エンドポイントを使用できるようにする場合は、"パフォーマンス" を選択します。

## <a name="configure-priority-routing-method"></a>優先順位によるルーティング方法の構成

Azure Websites では、Web サイトのモードにかかわらず、データセンター ("リージョン" と呼びます) 内の Web サイト用に、フェールオーバー機能があらかじめ用意されています。 Traffic Manager は、さまざまなデータセンター内の Web サイトにフェールオーバーを提供します。

サービスのフェールオーバーの一般的なパターンでは、トラフィックをプライマリ サービスに送信する一方で、フェールオーバー用に同じ一連のバックアップ サービスを提供します。 次の手順では、Azure のクラウド サービスと Web サイトを使用してこの優先フェールオーバーを構成する方法について説明します。

1. Azure クラシック ポータルの左側のウィンドウで、 **[Traffic Manager]** アイコンをクリックして [Traffic Manager] ウィンドウを開きます。
2. Azure クラシック ポータルの [Traffic Manager] ウィンドウで、変更対象の設定が保存されている Traffic Manager プロファイルを見つけます。 プロファイル設定ページを開くには、プロファイル名の右側にある矢印をクリックします。
3. プロファイル ページで、ページの上部にある **[エンドポイント]** をクリックします。 構成に追加するクラウド サービスと Web サイトの両方があることを確認します。
4. 上部にある **[構成]** をクリックして構成ページを開きます。
5. **[traffic routing method settings (トラフィック ルーティング方法の設定)]** で、トラフィック ルーティング方法が **[フェールオーバー]** に設定されていることを確認します。 他の方法に設定されている場合は、ドロップダウン リストから **[フェールオーバー]** をクリックします。
6. **[フェールオーバー優先度リスト]**で、エンドポイントのフェールオーバー順序を調整します。 **フェールオーバー** によるトラフィック ルーティング方法を選択する場合、選択したエンドポイントの順序が重要です。 最上位のエンドポイントがプライマリ エンドポイントになります。 上下の矢印を使用して、必要に応じて順序を変更します。 Windows PowerShell を使用してフェールオーバーの優先度を設定する方法については、 [Set-AzureTrafficManagerProfile](http://go.microsoft.com/fwlink/p/?LinkId=400880)に関するページを参照してください。
7. **[監視の設定]** が適切に構成されていることを確認します。 監視を構成することで、オフラインになっているエンドポイントにトラフィックが送信されなくなります。 エンドポイントを監視するには、パスとファイル名を指定する必要があります。 スラッシュ "/" は、相対パスの有効な入力値で、ファイルがルート ディレクトリ (既定のディレクトリ) にあることを意味します。
8. 構成の変更が完了したら、ページの下部にある **[保存]** をクリックします。
9. 構成の変更をテストします。
10. Traffic Manager プロファイルが機能したら、権限のある DNS サーバー上の DNS レコードを編集して、会社のドメイン名が Traffic Manager ドメイン名を参照するようにします。

## <a name="configure-weighted-routing-method"></a>重み付けによるルーティング方法の構成

トラフィック ルーティング方法の一般的なパターンは、クラウド サービスや Web サイトを含む同一のエンドポイントのセットを提供し、ラウンド ロビン方式で各エンドポイントにトラフィックを送信することです。 次の手順では、この種類のトラフィック ルーティング方法を構成する方法について説明します。

> [!NOTE]
> Azure Websites では、データセンター (リージョンとも呼ばれます) 内の Web サイトに対するラウンド ロビン負荷分散の機能が既に用意されています。 Traffic Manager を使用すると、異なるデータセンター内の Web サイトに対して、ラウンド ロビンによるトラフィック ルーティング方法を指定できます。

1. Azure クラシック ポータルの左側のウィンドウで、 **[Traffic Manager]** アイコンをクリックして [Traffic Manager] ウィンドウを開きます。
2. [Traffic Manager] ウィンドウで、変更対象の設定が保存されている Traffic Manager プロファイルを見つけます。 プロファイル設定ページを開くには、プロファイル名の右側にある矢印をクリックします。
3. プロファイルのページで、ページの上部にある **[エンドポイント]** をクリックし、構成に含めるサービス エンドポイントが存在することを確認します。
4. プロファイル ページで、上部にある **[構成]** をクリックし、構成ページを開きます。
5. **[traffic routing method Settings (トラフィック ルーティング方法の設定)]** で、トラフィック ルーティング方法が **[ラウンド ロビン]** に設定されていることを確認します。 他の方法に設定されている場合は、ドロップダウン リストで **[ラウンド ロビン]** をクリックします。
6. **[監視の設定]** が適切に構成されていることを確認します。 監視を構成することで、オフラインになっているエンドポイントにトラフィックが送信されなくなります。 エンドポイントを監視するには、パスとファイル名を指定する必要があります。 スラッシュ "/" は、相対パスの有効な入力値で、ファイルがルート ディレクトリ (既定のディレクトリ) にあることを意味します。
7. 構成の変更が完了したら、ページの下部にある **[保存]** をクリックします。
8. 構成の変更をテストします。
9. Traffic Manager プロファイルが機能したら、権限のある DNS サーバー上の DNS レコードを編集して、会社のドメイン名が Traffic Manager ドメイン名を参照するようにします。

## <a name="configure-performance-traffic-routing-method"></a>パフォーマンスによるトラフィック ルーティング方法の構成

パフォーマンスによるトラフィック ルーティング方法では、クライアントのネットワークからの待機時間が最も短いエンドポイントにトラフィックを転送できます。 通常、待機時間が最も短いデータセンターは、地理的に最も近いデータセンターです。 このトラフィック ルーティング方法では、ネットワーク構成または負荷のリアルタイムの変化に対応できません。

1. Azure クラシック ポータルの左側のウィンドウで、 **[Traffic Manager]** アイコンをクリックして [Traffic Manager] ウィンドウを開きます。
2. [Traffic Manager] ウィンドウで、変更対象の設定が保存されている Traffic Manager プロファイルを見つけます。 プロファイル設定ページを開くには、プロファイル名の右側にある矢印をクリックします。
3. プロファイルのページで、ページの上部にある **[エンドポイント]** をクリックし、構成に含めるサービス エンドポイントが存在することを確認します。
4. プロファイルのページで、上部にある **[構成]** をクリックし、構成ページを開きます。
5. **トラフィック ルーティング方法の設定**で、トラフィック ルーティング方法が **[パフォーマンス]** に設定されていることを確認します。 他の方式に設定されている場合は、ドロップダウン リストから **[パフォーマンス]** をクリックします。
6. **[監視の設定]** が適切に構成されていることを確認します。 監視を構成することで、オフラインになっているエンドポイントにトラフィックが送信されなくなります。 エンドポイントを監視するには、パスとファイル名を指定する必要があります。 スラッシュ "/" は、相対パスの有効な入力値で、ファイルがルート ディレクトリ (既定のディレクトリ) にあることを意味します。
7. 構成の変更が完了したら、ページの下部にある **[保存]** をクリックします。
8. 構成の変更をテストします。
9. Traffic Manager プロファイルが機能したら、権限のある DNS サーバー上の DNS レコードを編集して、会社のドメイン名が Traffic Manager ドメイン名を参照するようにします。

## <a name="next-steps"></a>次のステップ

* [Traffic Manager プロファイルの管理](traffic-manager-manage-profiles.md)
* [Traffic Manager のルーティング方法](traffic-manager-routing-methods.md)
* [Traffic Manager の設定のテスト](traffic-manager-testing-settings.md)
* [会社のインターネット ドメインで Traffic Manager ドメインが参照されるようにする](traffic-manager-point-internet-domain.md)
* [Traffic Manager エンドポイントの管理](traffic-manager-manage-endpoints.md)
* [Traffic Manager の機能低下状態のトラブルシューティング](traffic-manager-troubleshooting-degraded.md)




<!--HONumber=Nov16_HO5-->


